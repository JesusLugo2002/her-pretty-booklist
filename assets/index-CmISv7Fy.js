var dy=Object.defineProperty;var py=(n,t,e)=>t in n?dy(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Nh=(n,t,e)=>py(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ac(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const It={},Ys=[],Je=()=>{},my=()=>!1,ra=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),bc=n=>n.startsWith("onUpdate:"),ae=Object.assign,wc=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},gy=Object.prototype.hasOwnProperty,At=(n,t)=>gy.call(n,t),at=Array.isArray,Xs=n=>bi(n)==="[object Map]",ia=n=>bi(n)==="[object Set]",Oh=n=>bi(n)==="[object Date]",ht=n=>typeof n=="function",kt=n=>typeof n=="string",rn=n=>typeof n=="symbol",Pt=n=>n!==null&&typeof n=="object",Xd=n=>(Pt(n)||ht(n))&&ht(n.then)&&ht(n.catch),Jd=Object.prototype.toString,bi=n=>Jd.call(n),_y=n=>bi(n).slice(8,-1),Zd=n=>bi(n)==="[object Object]",Ic=n=>kt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Xr=Ac(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oa=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},yy=/-(\w)/g,Kn=oa(n=>n.replace(yy,(t,e)=>e?e.toUpperCase():"")),Ey=/\B([A-Z])/g,Rs=oa(n=>n.replace(Ey,"-$1").toLowerCase()),tp=oa(n=>n.charAt(0).toUpperCase()+n.slice(1)),nl=oa(n=>n?`on${tp(n)}`:""),Fn=(n,t)=>!Object.is(n,t),fo=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},ep=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Po=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Vh;const aa=()=>Vh||(Vh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Sc(n){if(at(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=kt(s)?by(s):Sc(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(kt(n)||Pt(n))return n}const vy=/;(?![^(]*\))/g,Ty=/:([^]+)/,Ay=/\/\*[^]*?\*\//g;function by(n){const t={};return n.replace(Ay,"").split(vy).forEach(e=>{if(e){const s=e.split(Ty);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function la(n){let t="";if(kt(n))t=n;else if(at(n))for(let e=0;e<n.length;e++){const s=la(n[e]);s&&(t+=s+" ")}else if(Pt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const wy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Iy=Ac(wy);function np(n){return!!n||n===""}function Sy(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=ca(n[s],t[s]);return e}function ca(n,t){if(n===t)return!0;let e=Oh(n),s=Oh(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=rn(n),s=rn(t),e||s)return n===t;if(e=at(n),s=at(t),e||s)return e&&s?Sy(n,t):!1;if(e=Pt(n),s=Pt(t),e||s){if(!e||!s)return!1;const r=Object.keys(n).length,i=Object.keys(t).length;if(r!==i)return!1;for(const a in n){const l=n.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!ca(n[a],t[a]))return!1}}return String(n)===String(t)}function Cy(n,t){return n.findIndex(e=>ca(e,t))}const sp=n=>!!(n&&n.__v_isRef===!0),xn=n=>kt(n)?n:n==null?"":at(n)||Pt(n)&&(n.toString===Jd||!ht(n.toString))?sp(n)?xn(n.value):JSON.stringify(n,rp,2):String(n),rp=(n,t)=>sp(t)?rp(n,t.value):Xs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r],i)=>(e[sl(s,i)+" =>"]=r,e),{})}:ia(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>sl(e))}:rn(t)?sl(t):Pt(t)&&!at(t)&&!Zd(t)?String(t):t,sl=(n,t="")=>{var e;return rn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let be;class Ry{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=be,!t&&be&&(this.index=(be.scopes||(be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=be;try{return be=this,t()}finally{be=e}}}on(){be=this}off(){be=this.parent}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Py(){return be}let St;const rl=new WeakSet;class ip{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,be&&be.active&&be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rl.has(this)&&(rl.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ap(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xh(this),lp(this);const t=St,e=He;St=this,He=!0;try{return this.fn()}finally{cp(this),St=t,He=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Pc(t);this.deps=this.depsTail=void 0,xh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rl.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ml(this)&&this.run()}get dirty(){return Ml(this)}}let op=0,Jr,Zr;function ap(n,t=!1){if(n.flags|=8,t){n.next=Zr,Zr=n;return}n.next=Jr,Jr=n}function Cc(){op++}function Rc(){if(--op>0)return;if(Zr){let t=Zr;for(Zr=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Jr;){let t=Jr;for(Jr=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function lp(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cp(n){let t,e=n.depsTail,s=e;for(;s;){const r=s.prevDep;s.version===-1?(s===e&&(e=r),Pc(s),Dy(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=t,n.depsTail=e}function Ml(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(up(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function up(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ci))return;n.globalVersion=ci;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Ml(n)){n.flags&=-3;return}const e=St,s=He;St=n,He=!0;try{lp(n);const r=n.fn(n._value);(t.version===0||Fn(r,n._value))&&(n._value=r,t.version++)}catch(r){throw t.version++,r}finally{St=e,He=s,cp(n),n.flags&=-3}}function Pc(n,t=!1){const{dep:e,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)Pc(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Dy(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let He=!0;const hp=[];function es(){hp.push(He),He=!1}function ns(){const n=hp.pop();He=n===void 0?!0:n}function xh(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=St;St=void 0;try{t()}finally{St=e}}}let ci=0;class Ny{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!St||!He||St===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==St)e=this.activeLink=new Ny(St,this),St.deps?(e.prevDep=St.depsTail,St.depsTail.nextDep=e,St.depsTail=e):St.deps=St.depsTail=e,fp(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=St.depsTail,e.nextDep=void 0,St.depsTail.nextDep=e,St.depsTail=e,St.deps===e&&(St.deps=s)}return e}trigger(t){this.version++,ci++,this.notify(t)}notify(t){Cc();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Rc()}}}function fp(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)fp(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const kl=new WeakMap,vs=Symbol(""),$l=Symbol(""),ui=Symbol("");function se(n,t,e){if(He&&St){let s=kl.get(n);s||kl.set(n,s=new Map);let r=s.get(e);r||(s.set(e,r=new Dc),r.map=s,r.key=e),r.track()}}function mn(n,t,e,s,r,i){const a=kl.get(n);if(!a){ci++;return}const l=c=>{c&&c.trigger()};if(Cc(),t==="clear")a.forEach(l);else{const c=at(n),h=c&&Ic(e);if(c&&e==="length"){const d=Number(s);a.forEach((m,g)=>{(g==="length"||g===ui||!rn(g)&&g>=d)&&l(m)})}else switch((e!==void 0||a.has(void 0))&&l(a.get(e)),h&&l(a.get(ui)),t){case"add":c?h&&l(a.get("length")):(l(a.get(vs)),Xs(n)&&l(a.get($l)));break;case"delete":c||(l(a.get(vs)),Xs(n)&&l(a.get($l)));break;case"set":Xs(n)&&l(a.get(vs));break}}Rc()}function ks(n){const t=Tt(n);return t===n?t:(se(t,"iterate",ui),Le(n)?t:t.map(re))}function ua(n){return se(n=Tt(n),"iterate",ui),n}const Oy={__proto__:null,[Symbol.iterator](){return il(this,Symbol.iterator,re)},concat(...n){return ks(this).concat(...n.map(t=>at(t)?ks(t):t))},entries(){return il(this,"entries",n=>(n[1]=re(n[1]),n))},every(n,t){return dn(this,"every",n,t,void 0,arguments)},filter(n,t){return dn(this,"filter",n,t,e=>e.map(re),arguments)},find(n,t){return dn(this,"find",n,t,re,arguments)},findIndex(n,t){return dn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return dn(this,"findLast",n,t,re,arguments)},findLastIndex(n,t){return dn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return dn(this,"forEach",n,t,void 0,arguments)},includes(...n){return ol(this,"includes",n)},indexOf(...n){return ol(this,"indexOf",n)},join(n){return ks(this).join(n)},lastIndexOf(...n){return ol(this,"lastIndexOf",n)},map(n,t){return dn(this,"map",n,t,void 0,arguments)},pop(){return jr(this,"pop")},push(...n){return jr(this,"push",n)},reduce(n,...t){return Lh(this,"reduce",n,t)},reduceRight(n,...t){return Lh(this,"reduceRight",n,t)},shift(){return jr(this,"shift")},some(n,t){return dn(this,"some",n,t,void 0,arguments)},splice(...n){return jr(this,"splice",n)},toReversed(){return ks(this).toReversed()},toSorted(n){return ks(this).toSorted(n)},toSpliced(...n){return ks(this).toSpliced(...n)},unshift(...n){return jr(this,"unshift",n)},values(){return il(this,"values",re)}};function il(n,t,e){const s=ua(n),r=s[t]();return s!==n&&!Le(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=e(i.value)),i}),r}const Vy=Array.prototype;function dn(n,t,e,s,r,i){const a=ua(n),l=a!==n&&!Le(n),c=a[t];if(c!==Vy[t]){const m=c.apply(n,i);return l?re(m):m}let h=e;a!==n&&(l?h=function(m,g){return e.call(this,re(m),g,n)}:e.length>2&&(h=function(m,g){return e.call(this,m,g,n)}));const d=c.call(a,h,s);return l&&r?r(d):d}function Lh(n,t,e,s){const r=ua(n);let i=e;return r!==n&&(Le(n)?e.length>3&&(i=function(a,l,c){return e.call(this,a,l,c,n)}):i=function(a,l,c){return e.call(this,a,re(l),c,n)}),r[t](i,...s)}function ol(n,t,e){const s=Tt(n);se(s,"iterate",ui);const r=s[t](...e);return(r===-1||r===!1)&&xc(e[0])?(e[0]=Tt(e[0]),s[t](...e)):r}function jr(n,t,e=[]){es(),Cc();const s=Tt(n)[t].apply(n,e);return Rc(),ns(),s}const xy=Ac("__proto__,__v_isRef,__isVue"),dp=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(rn));function Ly(n){rn(n)||(n=String(n));const t=Tt(this);return se(t,"has",n),t.hasOwnProperty(n)}class pp{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return i;if(e==="__v_raw")return s===(r?i?qy:yp:i?_p:gp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=at(t);if(!r){let c;if(a&&(c=Oy[e]))return c;if(e==="hasOwnProperty")return Ly}const l=Reflect.get(t,e,oe(t)?t:s);return(rn(e)?dp.has(e):xy(e))||(r||se(t,"get",e),i)?l:oe(l)?a&&Ic(e)?l:l.value:Pt(l)?r?Ep(l):Oc(l):l}}class mp extends pp{constructor(t=!1){super(!1,t)}set(t,e,s,r){let i=t[e];if(!this._isShallow){const c=As(i);if(!Le(s)&&!As(s)&&(i=Tt(i),s=Tt(s)),!at(t)&&oe(i)&&!oe(s))return c?!1:(i.value=s,!0)}const a=at(t)&&Ic(e)?Number(e)<t.length:At(t,e),l=Reflect.set(t,e,s,oe(t)?t:r);return t===Tt(r)&&(a?Fn(s,i)&&mn(t,"set",e,s):mn(t,"add",e,s)),l}deleteProperty(t,e){const s=At(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&s&&mn(t,"delete",e,void 0),r}has(t,e){const s=Reflect.has(t,e);return(!rn(e)||!dp.has(e))&&se(t,"has",e),s}ownKeys(t){return se(t,"iterate",at(t)?"length":vs),Reflect.ownKeys(t)}}class My extends pp{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const ky=new mp,$y=new My,Fy=new mp(!0);const Fl=n=>n,Xi=n=>Reflect.getPrototypeOf(n);function Uy(n,t,e){return function(...s){const r=this.__v_raw,i=Tt(r),a=Xs(i),l=n==="entries"||n===Symbol.iterator&&a,c=n==="keys"&&a,h=r[n](...s),d=e?Fl:t?Ul:re;return!t&&se(i,"iterate",c?$l:vs),{next(){const{value:m,done:g}=h.next();return g?{value:m,done:g}:{value:l?[d(m[0]),d(m[1])]:d(m),done:g}},[Symbol.iterator](){return this}}}}function Ji(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function By(n,t){const e={get(r){const i=this.__v_raw,a=Tt(i),l=Tt(r);n||(Fn(r,l)&&se(a,"get",r),se(a,"get",l));const{has:c}=Xi(a),h=t?Fl:n?Ul:re;if(c.call(a,r))return h(i.get(r));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!n&&se(Tt(r),"iterate",vs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,a=Tt(i),l=Tt(r);return n||(Fn(r,l)&&se(a,"has",r),se(a,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const a=this,l=a.__v_raw,c=Tt(l),h=t?Fl:n?Ul:re;return!n&&se(c,"iterate",vs),l.forEach((d,m)=>r.call(i,h(d),h(m),a))}};return ae(e,n?{add:Ji("add"),set:Ji("set"),delete:Ji("delete"),clear:Ji("clear")}:{add(r){!t&&!Le(r)&&!As(r)&&(r=Tt(r));const i=Tt(this);return Xi(i).has.call(i,r)||(i.add(r),mn(i,"add",r,r)),this},set(r,i){!t&&!Le(i)&&!As(i)&&(i=Tt(i));const a=Tt(this),{has:l,get:c}=Xi(a);let h=l.call(a,r);h||(r=Tt(r),h=l.call(a,r));const d=c.call(a,r);return a.set(r,i),h?Fn(i,d)&&mn(a,"set",r,i):mn(a,"add",r,i),this},delete(r){const i=Tt(this),{has:a,get:l}=Xi(i);let c=a.call(i,r);c||(r=Tt(r),c=a.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&mn(i,"delete",r,void 0),h},clear(){const r=Tt(this),i=r.size!==0,a=r.clear();return i&&mn(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Uy(r,n,t)}),e}function Nc(n,t){const e=By(n,t);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(At(e,r)&&r in s?e:s,r,i)}const jy={get:Nc(!1,!1)},Hy={get:Nc(!1,!0)},Ky={get:Nc(!0,!1)};const gp=new WeakMap,_p=new WeakMap,yp=new WeakMap,qy=new WeakMap;function Wy(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zy(n){return n.__v_skip||!Object.isExtensible(n)?0:Wy(_y(n))}function Oc(n){return As(n)?n:Vc(n,!1,ky,jy,gp)}function Gy(n){return Vc(n,!1,Fy,Hy,_p)}function Ep(n){return Vc(n,!0,$y,Ky,yp)}function Vc(n,t,e,s,r){if(!Pt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const a=zy(n);if(a===0)return n;const l=new Proxy(n,a===2?s:e);return r.set(n,l),l}function Js(n){return As(n)?Js(n.__v_raw):!!(n&&n.__v_isReactive)}function As(n){return!!(n&&n.__v_isReadonly)}function Le(n){return!!(n&&n.__v_isShallow)}function xc(n){return n?!!n.__v_raw:!1}function Tt(n){const t=n&&n.__v_raw;return t?Tt(t):n}function Qy(n){return!At(n,"__v_skip")&&Object.isExtensible(n)&&ep(n,"__v_skip",!0),n}const re=n=>Pt(n)?Oc(n):n,Ul=n=>Pt(n)?Ep(n):n;function oe(n){return n?n.__v_isRef===!0:!1}function Be(n){return Yy(n,!1)}function Yy(n,t){return oe(n)?n:new Xy(n,t)}class Xy{constructor(t,e){this.dep=new Dc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Tt(t),this._value=e?t:re(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Le(t)||As(t);t=s?t:Tt(t),Fn(t,e)&&(this._rawValue=t,this._value=s?t:re(t),this.dep.trigger())}}function Bl(n){return oe(n)?n.value:n}const Jy={get:(n,t,e)=>t==="__v_raw"?n:Bl(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return oe(r)&&!oe(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function vp(n){return Js(n)?n:new Proxy(n,Jy)}class Zy{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Dc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ci-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return ap(this,!0),!0}get value(){const t=this.dep.track();return up(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function tE(n,t,e=!1){let s,r;return ht(n)?s=n:(s=n.get,r=n.set),new Zy(s,r,e)}const Zi={},Do=new WeakMap;let ps;function eE(n,t=!1,e=ps){if(e){let s=Do.get(e);s||Do.set(e,s=[]),s.push(n)}}function nE(n,t,e=It){const{immediate:s,deep:r,once:i,scheduler:a,augmentJob:l,call:c}=e,h=L=>r?L:Le(L)||r===!1||r===0?gn(L,1):gn(L);let d,m,g,T,D=!1,N=!1;if(oe(n)?(m=()=>n.value,D=Le(n)):Js(n)?(m=()=>h(n),D=!0):at(n)?(N=!0,D=n.some(L=>Js(L)||Le(L)),m=()=>n.map(L=>{if(oe(L))return L.value;if(Js(L))return h(L);if(ht(L))return c?c(L,2):L()})):ht(n)?t?m=c?()=>c(n,2):n:m=()=>{if(g){es();try{g()}finally{ns()}}const L=ps;ps=d;try{return c?c(n,3,[T]):n(T)}finally{ps=L}}:m=Je,t&&r){const L=m,J=r===!0?1/0:r;m=()=>gn(L(),J)}const O=Py(),H=()=>{d.stop(),O&&O.active&&wc(O.effects,d)};if(i&&t){const L=t;t=(...J)=>{L(...J),H()}}let z=N?new Array(n.length).fill(Zi):Zi;const G=L=>{if(!(!(d.flags&1)||!d.dirty&&!L))if(t){const J=d.run();if(r||D||(N?J.some((tt,b)=>Fn(tt,z[b])):Fn(J,z))){g&&g();const tt=ps;ps=d;try{const b=[J,z===Zi?void 0:N&&z[0]===Zi?[]:z,T];c?c(t,3,b):t(...b),z=J}finally{ps=tt}}}else d.run()};return l&&l(G),d=new ip(m),d.scheduler=a?()=>a(G,!1):G,T=L=>eE(L,!1,d),g=d.onStop=()=>{const L=Do.get(d);if(L){if(c)c(L,4);else for(const J of L)J();Do.delete(d)}},t?s?G(!0):z=d.run():a?a(G.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function gn(n,t=1/0,e){if(t<=0||!Pt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,oe(n))gn(n.value,t,e);else if(at(n))for(let s=0;s<n.length;s++)gn(n[s],t,e);else if(ia(n)||Xs(n))n.forEach(s=>{gn(s,t,e)});else if(Zd(n)){for(const s in n)gn(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&gn(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wi(n,t,e,s){try{return s?n(...s):n()}catch(r){ha(r,t,e)}}function on(n,t,e,s){if(ht(n)){const r=wi(n,t,e,s);return r&&Xd(r)&&r.catch(i=>{ha(i,t,e)}),r}if(at(n)){const r=[];for(let i=0;i<n.length;i++)r.push(on(n[i],t,e,s));return r}}function ha(n,t,e,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](n,c,h)===!1)return}l=l.parent}if(i){es(),wi(i,null,10,[n,c,h]),ns();return}}sE(n,e,r,s,a)}function sE(n,t,e,s=!0,r=!1){if(r)throw n;console.error(n)}const ue=[];let Ge=-1;const Zs=[];let Ln=null,Bs=0;const Tp=Promise.resolve();let No=null;function Ap(n){const t=No||Tp;return n?t.then(this?n.bind(this):n):t}function rE(n){let t=Ge+1,e=ue.length;for(;t<e;){const s=t+e>>>1,r=ue[s],i=hi(r);i<n||i===n&&r.flags&2?t=s+1:e=s}return t}function Lc(n){if(!(n.flags&1)){const t=hi(n),e=ue[ue.length-1];!e||!(n.flags&2)&&t>=hi(e)?ue.push(n):ue.splice(rE(t),0,n),n.flags|=1,bp()}}function bp(){No||(No=Tp.then(Ip))}function iE(n){at(n)?Zs.push(...n):Ln&&n.id===-1?Ln.splice(Bs+1,0,n):n.flags&1||(Zs.push(n),n.flags|=1),bp()}function Mh(n,t,e=Ge+1){for(;e<ue.length;e++){const s=ue[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;ue.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function wp(n){if(Zs.length){const t=[...new Set(Zs)].sort((e,s)=>hi(e)-hi(s));if(Zs.length=0,Ln){Ln.push(...t);return}for(Ln=t,Bs=0;Bs<Ln.length;Bs++){const e=Ln[Bs];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ln=null,Bs=0}}const hi=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Ip(n){try{for(Ge=0;Ge<ue.length;Ge++){const t=ue[Ge];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),wi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ge<ue.length;Ge++){const t=ue[Ge];t&&(t.flags&=-2)}Ge=-1,ue.length=0,wp(),No=null,(ue.length||Zs.length)&&Ip()}}let xe=null,Sp=null;function Oo(n){const t=xe;return xe=n,Sp=n&&n.type.__scopeId||null,t}function oE(n,t=xe,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&qh(-1);const i=Oo(t);let a;try{a=n(...r)}finally{Oo(i),s._d&&qh(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function On(n,t){if(xe===null)return n;const e=ma(xe),s=n.dirs||(n.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,c=It]=t[r];i&&(ht(i)&&(i={mounted:i,updated:i}),i.deep&&gn(a),s.push({dir:i,instance:e,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function fs(n,t,e,s){const r=n.dirs,i=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];i&&(l.oldValue=i[a].value);let c=l.dir[s];c&&(es(),on(c,e,8,[n.el,l,n,t]),ns())}}const aE=Symbol("_vte"),lE=n=>n.__isTeleport;function Mc(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Mc(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function kc(n,t){return ht(n)?ae({name:n.name},t,{setup:n}):n}function Cp(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Vo(n,t,e,s,r=!1){if(at(n)){n.forEach((D,N)=>Vo(D,t&&(at(t)?t[N]:t),e,s,r));return}if(ti(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Vo(n,t,e,s.component.subTree);return}const i=s.shapeFlag&4?ma(s.component):s.el,a=r?null:i,{i:l,r:c}=n,h=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,g=Tt(m),T=m===It?()=>!1:D=>At(g,D);if(h!=null&&h!==c&&(kt(h)?(d[h]=null,T(h)&&(m[h]=null)):oe(h)&&(h.value=null)),ht(c))wi(c,l,12,[a,d]);else{const D=kt(c),N=oe(c);if(D||N){const O=()=>{if(n.f){const H=D?T(c)?m[c]:d[c]:c.value;r?at(H)&&wc(H,i):at(H)?H.includes(i)||H.push(i):D?(d[c]=[i],T(c)&&(m[c]=d[c])):(c.value=[i],n.k&&(d[n.k]=c.value))}else D?(d[c]=a,T(c)&&(m[c]=a)):N&&(c.value=a,n.k&&(d[n.k]=a))};a?(O.id=-1,Ae(O,e)):O()}}}aa().requestIdleCallback;aa().cancelIdleCallback;const ti=n=>!!n.type.__asyncLoader,Rp=n=>n.type.__isKeepAlive;function cE(n,t){Pp(n,"a",t)}function uE(n,t){Pp(n,"da",t)}function Pp(n,t,e=he){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(fa(t,s,e),e){let r=e.parent;for(;r&&r.parent;)Rp(r.parent.vnode)&&hE(s,t,e,r),r=r.parent}}function hE(n,t,e,s){const r=fa(t,n,s,!0);Np(()=>{wc(s[t],r)},e)}function fa(n,t,e=he,s=!1){if(e){const r=e[n]||(e[n]=[]),i=t.__weh||(t.__weh=(...a)=>{es();const l=Ii(e),c=on(t,e,n,a);return l(),ns(),c});return s?r.unshift(i):r.push(i),i}}const In=n=>(t,e=he)=>{(!di||n==="sp")&&fa(n,(...s)=>t(...s),e)},fE=In("bm"),Dp=In("m"),dE=In("bu"),pE=In("u"),mE=In("bum"),Np=In("um"),gE=In("sp"),_E=In("rtg"),yE=In("rtc");function EE(n,t=he){fa("ec",n,t)}const vE=Symbol.for("v-ndc");function TE(n,t,e,s){let r;const i=e,a=at(n);if(a||kt(n)){const l=a&&Js(n);let c=!1;l&&(c=!Le(n),n=ua(n)),r=new Array(n.length);for(let h=0,d=n.length;h<d;h++)r[h]=t(c?re(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let l=0;l<n;l++)r[l]=t(l+1,l,void 0,i)}else if(Pt(n))if(n[Symbol.iterator])r=Array.from(n,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(n);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];r[c]=t(n[d],d,c,i)}}else r=[];return r}const jl=n=>n?tm(n)?ma(n):jl(n.parent):null,ei=ae(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>jl(n.parent),$root:n=>jl(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Vp(n),$forceUpdate:n=>n.f||(n.f=()=>{Lc(n.update)}),$nextTick:n=>n.n||(n.n=Ap.bind(n.proxy)),$watch:n=>HE.bind(n)}),al=(n,t)=>n!==It&&!n.__isScriptSetup&&At(n,t),AE={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:r,props:i,accessCache:a,type:l,appContext:c}=n;let h;if(t[0]!=="$"){const T=a[t];if(T!==void 0)switch(T){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return i[t]}else{if(al(s,t))return a[t]=1,s[t];if(r!==It&&At(r,t))return a[t]=2,r[t];if((h=n.propsOptions[0])&&At(h,t))return a[t]=3,i[t];if(e!==It&&At(e,t))return a[t]=4,e[t];Hl&&(a[t]=0)}}const d=ei[t];let m,g;if(d)return t==="$attrs"&&se(n.attrs,"get",""),d(n);if((m=l.__cssModules)&&(m=m[t]))return m;if(e!==It&&At(e,t))return a[t]=4,e[t];if(g=c.config.globalProperties,At(g,t))return g[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:i}=n;return al(r,t)?(r[t]=e,!0):s!==It&&At(s,t)?(s[t]=e,!0):At(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(i[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:i}},a){let l;return!!e[a]||n!==It&&At(n,a)||al(t,a)||(l=i[0])&&At(l,a)||At(s,a)||At(ei,a)||At(r.config.globalProperties,a)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:At(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function kh(n){return at(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Hl=!0;function bE(n){const t=Vp(n),e=n.proxy,s=n.ctx;Hl=!1,t.beforeCreate&&$h(t.beforeCreate,n,"bc");const{data:r,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:m,mounted:g,beforeUpdate:T,updated:D,activated:N,deactivated:O,beforeDestroy:H,beforeUnmount:z,destroyed:G,unmounted:L,render:J,renderTracked:tt,renderTriggered:b,errorCaptured:_,serverPrefetch:E,expose:A,inheritAttrs:w,components:S,directives:y,filters:xt}=t;if(h&&wE(h,s,null),a)for(const ft in a){const dt=a[ft];ht(dt)&&(s[ft]=dt.bind(e))}if(r){const ft=r.call(e,e);Pt(ft)&&(n.data=Oc(ft))}if(Hl=!0,i)for(const ft in i){const dt=i[ft],$t=ht(dt)?dt.bind(e,e):ht(dt.get)?dt.get.bind(e,e):Je,De=!ht(dt)&&ht(dt.set)?dt.set.bind(e):Je,ye=cv({get:$t,set:De});Object.defineProperty(s,ft,{enumerable:!0,configurable:!0,get:()=>ye.value,set:Ct=>ye.value=Ct})}if(l)for(const ft in l)Op(l[ft],s,e,ft);if(c){const ft=ht(c)?c.call(e):c;Reflect.ownKeys(ft).forEach(dt=>{DE(dt,ft[dt])})}d&&$h(d,n,"c");function vt(ft,dt){at(dt)?dt.forEach($t=>ft($t.bind(e))):dt&&ft(dt.bind(e))}if(vt(fE,m),vt(Dp,g),vt(dE,T),vt(pE,D),vt(cE,N),vt(uE,O),vt(EE,_),vt(yE,tt),vt(_E,b),vt(mE,z),vt(Np,L),vt(gE,E),at(A))if(A.length){const ft=n.exposed||(n.exposed={});A.forEach(dt=>{Object.defineProperty(ft,dt,{get:()=>e[dt],set:$t=>e[dt]=$t})})}else n.exposed||(n.exposed={});J&&n.render===Je&&(n.render=J),w!=null&&(n.inheritAttrs=w),S&&(n.components=S),y&&(n.directives=y),E&&Cp(n)}function wE(n,t,e=Je){at(n)&&(n=Kl(n));for(const s in n){const r=n[s];let i;Pt(r)?"default"in r?i=po(r.from||s,r.default,!0):i=po(r.from||s):i=po(r),oe(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[s]=i}}function $h(n,t,e){on(at(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Op(n,t,e,s){let r=s.includes(".")?zp(e,s):()=>e[s];if(kt(n)){const i=t[n];ht(i)&&cl(r,i)}else if(ht(n))cl(r,n.bind(e));else if(Pt(n))if(at(n))n.forEach(i=>Op(i,t,e,s));else{const i=ht(n.handler)?n.handler.bind(e):t[n.handler];ht(i)&&cl(r,i,n)}}function Vp(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=n.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!e&&!s?c=t:(c={},r.length&&r.forEach(h=>xo(c,h,a,!0)),xo(c,t,a)),Pt(t)&&i.set(t,c),c}function xo(n,t,e,s=!1){const{mixins:r,extends:i}=t;i&&xo(n,i,e,!0),r&&r.forEach(a=>xo(n,a,e,!0));for(const a in t)if(!(s&&a==="expose")){const l=IE[a]||e&&e[a];n[a]=l?l(n[a],t[a]):t[a]}return n}const IE={data:Fh,props:Uh,emits:Uh,methods:Wr,computed:Wr,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:Wr,directives:Wr,watch:CE,provide:Fh,inject:SE};function Fh(n,t){return t?n?function(){return ae(ht(n)?n.call(this,this):n,ht(t)?t.call(this,this):t)}:t:n}function SE(n,t){return Wr(Kl(n),Kl(t))}function Kl(n){if(at(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function ce(n,t){return n?[...new Set([].concat(n,t))]:t}function Wr(n,t){return n?ae(Object.create(null),n,t):t}function Uh(n,t){return n?at(n)&&at(t)?[...new Set([...n,...t])]:ae(Object.create(null),kh(n),kh(t??{})):t}function CE(n,t){if(!n)return t;if(!t)return n;const e=ae(Object.create(null),n);for(const s in t)e[s]=ce(n[s],t[s]);return e}function xp(){return{app:null,config:{isNativeTag:my,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RE=0;function PE(n,t){return function(s,r=null){ht(s)||(s=ae({},s)),r!=null&&!Pt(r)&&(r=null);const i=xp(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:RE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:uv,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&ht(d.install)?(a.add(d),d.install(h,...m)):ht(d)&&(a.add(d),d(h,...m))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,m){return m?(i.components[d]=m,h):i.components[d]},directive(d,m){return m?(i.directives[d]=m,h):i.directives[d]},mount(d,m,g){if(!c){const T=h._ceVNode||Ze(s,r);return T.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),n(T,d,g),c=!0,h._container=d,d.__vue_app__=h,ma(T.component)}},onUnmount(d){l.push(d)},unmount(){c&&(on(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(d,m){return i.provides[d]=m,h},runWithContext(d){const m=tr;tr=h;try{return d()}finally{tr=m}}};return h}}let tr=null;function DE(n,t){if(he){let e=he.provides;const s=he.parent&&he.parent.provides;s===e&&(e=he.provides=Object.create(s)),e[n]=t}}function po(n,t,e=!1){const s=he||xe;if(s||tr){const r=tr?tr._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return e&&ht(t)?t.call(s&&s.proxy):t}}const Lp={},Mp=()=>Object.create(Lp),kp=n=>Object.getPrototypeOf(n)===Lp;function NE(n,t,e,s=!1){const r={},i=Mp();n.propsDefaults=Object.create(null),$p(n,t,r,i);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);e?n.props=s?r:Gy(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function OE(n,t,e,s){const{props:r,attrs:i,vnode:{patchFlag:a}}=n,l=Tt(r),[c]=n.propsOptions;let h=!1;if((s||a>0)&&!(a&16)){if(a&8){const d=n.vnode.dynamicProps;for(let m=0;m<d.length;m++){let g=d[m];if(da(n.emitsOptions,g))continue;const T=t[g];if(c)if(At(i,g))T!==i[g]&&(i[g]=T,h=!0);else{const D=Kn(g);r[D]=ql(c,l,D,T,n,!1)}else T!==i[g]&&(i[g]=T,h=!0)}}}else{$p(n,t,r,i)&&(h=!0);let d;for(const m in l)(!t||!At(t,m)&&((d=Rs(m))===m||!At(t,d)))&&(c?e&&(e[m]!==void 0||e[d]!==void 0)&&(r[m]=ql(c,l,m,void 0,n,!0)):delete r[m]);if(i!==l)for(const m in i)(!t||!At(t,m))&&(delete i[m],h=!0)}h&&mn(n.attrs,"set","")}function $p(n,t,e,s){const[r,i]=n.propsOptions;let a=!1,l;if(t)for(let c in t){if(Xr(c))continue;const h=t[c];let d;r&&At(r,d=Kn(c))?!i||!i.includes(d)?e[d]=h:(l||(l={}))[d]=h:da(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,a=!0)}if(i){const c=Tt(e),h=l||It;for(let d=0;d<i.length;d++){const m=i[d];e[m]=ql(r,c,m,h[m],n,!At(h,m))}}return a}function ql(n,t,e,s,r,i){const a=n[e];if(a!=null){const l=At(a,"default");if(l&&s===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ht(c)){const{propsDefaults:h}=r;if(e in h)s=h[e];else{const d=Ii(r);s=h[e]=c.call(null,t),d()}}else s=c;r.ce&&r.ce._setProp(e,s)}a[0]&&(i&&!l?s=!1:a[1]&&(s===""||s===Rs(e))&&(s=!0))}return s}const VE=new WeakMap;function Fp(n,t,e=!1){const s=e?VE:t.propsCache,r=s.get(n);if(r)return r;const i=n.props,a={},l=[];let c=!1;if(!ht(n)){const d=m=>{c=!0;const[g,T]=Fp(m,t,!0);ae(a,g),T&&l.push(...T)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!c)return Pt(n)&&s.set(n,Ys),Ys;if(at(i))for(let d=0;d<i.length;d++){const m=Kn(i[d]);Bh(m)&&(a[m]=It)}else if(i)for(const d in i){const m=Kn(d);if(Bh(m)){const g=i[d],T=a[m]=at(g)||ht(g)?{type:g}:ae({},g),D=T.type;let N=!1,O=!0;if(at(D))for(let H=0;H<D.length;++H){const z=D[H],G=ht(z)&&z.name;if(G==="Boolean"){N=!0;break}else G==="String"&&(O=!1)}else N=ht(D)&&D.name==="Boolean";T[0]=N,T[1]=O,(N||At(T,"default"))&&l.push(m)}}const h=[a,l];return Pt(n)&&s.set(n,h),h}function Bh(n){return n[0]!=="$"&&!Xr(n)}const Up=n=>n[0]==="_"||n==="$stable",$c=n=>at(n)?n.map(Ye):[Ye(n)],xE=(n,t,e)=>{if(t._n)return t;const s=oE((...r)=>$c(t(...r)),e);return s._c=!1,s},Bp=(n,t,e)=>{const s=n._ctx;for(const r in n){if(Up(r))continue;const i=n[r];if(ht(i))t[r]=xE(r,i,s);else if(i!=null){const a=$c(i);t[r]=()=>a}}},jp=(n,t)=>{const e=$c(t);n.slots.default=()=>e},Hp=(n,t,e)=>{for(const s in t)(e||s!=="_")&&(n[s]=t[s])},LE=(n,t,e)=>{const s=n.slots=Mp();if(n.vnode.shapeFlag&32){const r=t._;r?(Hp(s,t,e),e&&ep(s,"_",r,!0)):Bp(t,s)}else t&&jp(n,t)},ME=(n,t,e)=>{const{vnode:s,slots:r}=n;let i=!0,a=It;if(s.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:Hp(r,t,e):(i=!t.$stable,Bp(t,r)),a=t}else t&&(jp(n,t),a={default:1});if(i)for(const l in r)!Up(l)&&a[l]==null&&delete r[l]},Ae=YE;function kE(n){return $E(n)}function $E(n,t){const e=aa();e.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:m,nextSibling:g,setScopeId:T=Je,insertStaticContent:D}=n,N=(v,I,P,U=null,x=null,F=null,q=void 0,j=null,B=!!I.dynamicChildren)=>{if(v===I)return;v&&!Hr(v,I)&&(U=pe(v),Ct(v,x,F,!0),v=null),I.patchFlag===-2&&(B=!1,I.dynamicChildren=null);const{type:k,ref:et,shapeFlag:W}=I;switch(k){case pa:O(v,I,P,U);break;case bs:H(v,I,P,U);break;case ul:v==null&&z(I,P,U,q);break;case je:S(v,I,P,U,x,F,q,j,B);break;default:W&1?J(v,I,P,U,x,F,q,j,B):W&6?y(v,I,P,U,x,F,q,j,B):(W&64||W&128)&&k.process(v,I,P,U,x,F,q,j,B,Ne)}et!=null&&x&&Vo(et,v&&v.ref,F,I||v,!I)},O=(v,I,P,U)=>{if(v==null)s(I.el=l(I.children),P,U);else{const x=I.el=v.el;I.children!==v.children&&h(x,I.children)}},H=(v,I,P,U)=>{v==null?s(I.el=c(I.children||""),P,U):I.el=v.el},z=(v,I,P,U)=>{[v.el,v.anchor]=D(v.children,I,P,U,v.el,v.anchor)},G=({el:v,anchor:I},P,U)=>{let x;for(;v&&v!==I;)x=g(v),s(v,P,U),v=x;s(I,P,U)},L=({el:v,anchor:I})=>{let P;for(;v&&v!==I;)P=g(v),r(v),v=P;r(I)},J=(v,I,P,U,x,F,q,j,B)=>{I.type==="svg"?q="svg":I.type==="math"&&(q="mathml"),v==null?tt(I,P,U,x,F,q,j,B):E(v,I,x,F,q,j,B)},tt=(v,I,P,U,x,F,q,j)=>{let B,k;const{props:et,shapeFlag:W,transition:Y,dirs:it}=v;if(B=v.el=a(v.type,F,et&&et.is,et),W&8?d(B,v.children):W&16&&_(v.children,B,null,U,x,ll(v,F),q,j),it&&fs(v,null,U,"created"),b(B,v,v.scopeId,q,U),et){for(const lt in et)lt!=="value"&&!Xr(lt)&&i(B,lt,null,et[lt],F,U);"value"in et&&i(B,"value",null,et.value,F),(k=et.onVnodeBeforeMount)&&ze(k,U,v)}it&&fs(v,null,U,"beforeMount");const nt=FE(x,Y);nt&&Y.beforeEnter(B),s(B,I,P),((k=et&&et.onVnodeMounted)||nt||it)&&Ae(()=>{k&&ze(k,U,v),nt&&Y.enter(B),it&&fs(v,null,U,"mounted")},x)},b=(v,I,P,U,x)=>{if(P&&T(v,P),U)for(let F=0;F<U.length;F++)T(v,U[F]);if(x){let F=x.subTree;if(I===F||Qp(F.type)&&(F.ssContent===I||F.ssFallback===I)){const q=x.vnode;b(v,q,q.scopeId,q.slotScopeIds,x.parent)}}},_=(v,I,P,U,x,F,q,j,B=0)=>{for(let k=B;k<v.length;k++){const et=v[k]=j?Mn(v[k]):Ye(v[k]);N(null,et,I,P,U,x,F,q,j)}},E=(v,I,P,U,x,F,q)=>{const j=I.el=v.el;let{patchFlag:B,dynamicChildren:k,dirs:et}=I;B|=v.patchFlag&16;const W=v.props||It,Y=I.props||It;let it;if(P&&ds(P,!1),(it=Y.onVnodeBeforeUpdate)&&ze(it,P,I,v),et&&fs(I,v,P,"beforeUpdate"),P&&ds(P,!0),(W.innerHTML&&Y.innerHTML==null||W.textContent&&Y.textContent==null)&&d(j,""),k?A(v.dynamicChildren,k,j,P,U,ll(I,x),F):q||dt(v,I,j,null,P,U,ll(I,x),F,!1),B>0){if(B&16)w(j,W,Y,P,x);else if(B&2&&W.class!==Y.class&&i(j,"class",null,Y.class,x),B&4&&i(j,"style",W.style,Y.style,x),B&8){const nt=I.dynamicProps;for(let lt=0;lt<nt.length;lt++){const pt=nt[lt],Xt=W[pt],Ht=Y[pt];(Ht!==Xt||pt==="value")&&i(j,pt,Xt,Ht,x,P)}}B&1&&v.children!==I.children&&d(j,I.children)}else!q&&k==null&&w(j,W,Y,P,x);((it=Y.onVnodeUpdated)||et)&&Ae(()=>{it&&ze(it,P,I,v),et&&fs(I,v,P,"updated")},U)},A=(v,I,P,U,x,F,q)=>{for(let j=0;j<I.length;j++){const B=v[j],k=I[j],et=B.el&&(B.type===je||!Hr(B,k)||B.shapeFlag&70)?m(B.el):P;N(B,k,et,null,U,x,F,q,!0)}},w=(v,I,P,U,x)=>{if(I!==P){if(I!==It)for(const F in I)!Xr(F)&&!(F in P)&&i(v,F,I[F],null,x,U);for(const F in P){if(Xr(F))continue;const q=P[F],j=I[F];q!==j&&F!=="value"&&i(v,F,j,q,x,U)}"value"in P&&i(v,"value",I.value,P.value,x)}},S=(v,I,P,U,x,F,q,j,B)=>{const k=I.el=v?v.el:l(""),et=I.anchor=v?v.anchor:l("");let{patchFlag:W,dynamicChildren:Y,slotScopeIds:it}=I;it&&(j=j?j.concat(it):it),v==null?(s(k,P,U),s(et,P,U),_(I.children||[],P,et,x,F,q,j,B)):W>0&&W&64&&Y&&v.dynamicChildren?(A(v.dynamicChildren,Y,P,x,F,q,j),(I.key!=null||x&&I===x.subTree)&&Kp(v,I,!0)):dt(v,I,P,et,x,F,q,j,B)},y=(v,I,P,U,x,F,q,j,B)=>{I.slotScopeIds=j,v==null?I.shapeFlag&512?x.ctx.activate(I,P,U,q,B):xt(I,P,U,x,F,q,B):Qt(v,I,B)},xt=(v,I,P,U,x,F,q)=>{const j=v.component=sv(v,U,x);if(Rp(v)&&(j.ctx.renderer=Ne),rv(j,!1,q),j.asyncDep){if(x&&x.registerDep(j,vt,q),!v.el){const B=j.subTree=Ze(bs);H(null,B,I,P)}}else vt(j,v,I,P,x,F,q)},Qt=(v,I,P)=>{const U=I.component=v.component;if(GE(v,I,P))if(U.asyncDep&&!U.asyncResolved){ft(U,I,P);return}else U.next=I,U.update();else I.el=v.el,U.vnode=I},vt=(v,I,P,U,x,F,q)=>{const j=()=>{if(v.isMounted){let{next:W,bu:Y,u:it,parent:nt,vnode:lt}=v;{const Jt=qp(v);if(Jt){W&&(W.el=lt.el,ft(v,W,q)),Jt.asyncDep.then(()=>{v.isUnmounted||j()});return}}let pt=W,Xt;ds(v,!1),W?(W.el=lt.el,ft(v,W,q)):W=lt,Y&&fo(Y),(Xt=W.props&&W.props.onVnodeBeforeUpdate)&&ze(Xt,nt,W,lt),ds(v,!0);const Ht=Hh(v),Oe=v.subTree;v.subTree=Ht,N(Oe,Ht,m(Oe.el),pe(Oe),v,x,F),W.el=Ht.el,pt===null&&QE(v,Ht.el),it&&Ae(it,x),(Xt=W.props&&W.props.onVnodeUpdated)&&Ae(()=>ze(Xt,nt,W,lt),x)}else{let W;const{el:Y,props:it}=I,{bm:nt,m:lt,parent:pt,root:Xt,type:Ht}=v,Oe=ti(I);ds(v,!1),nt&&fo(nt),!Oe&&(W=it&&it.onVnodeBeforeMount)&&ze(W,pt,I),ds(v,!0);{Xt.ce&&Xt.ce._injectChildStyle(Ht);const Jt=v.subTree=Hh(v);N(null,Jt,P,U,v,x,F),I.el=Jt.el}if(lt&&Ae(lt,x),!Oe&&(W=it&&it.onVnodeMounted)){const Jt=I;Ae(()=>ze(W,pt,Jt),x)}(I.shapeFlag&256||pt&&ti(pt.vnode)&&pt.vnode.shapeFlag&256)&&v.a&&Ae(v.a,x),v.isMounted=!0,I=P=U=null}};v.scope.on();const B=v.effect=new ip(j);v.scope.off();const k=v.update=B.run.bind(B),et=v.job=B.runIfDirty.bind(B);et.i=v,et.id=v.uid,B.scheduler=()=>Lc(et),ds(v,!0),k()},ft=(v,I,P)=>{I.component=v;const U=v.vnode.props;v.vnode=I,v.next=null,OE(v,I.props,U,P),ME(v,I.children,P),es(),Mh(v),ns()},dt=(v,I,P,U,x,F,q,j,B=!1)=>{const k=v&&v.children,et=v?v.shapeFlag:0,W=I.children,{patchFlag:Y,shapeFlag:it}=I;if(Y>0){if(Y&128){De(k,W,P,U,x,F,q,j,B);return}else if(Y&256){$t(k,W,P,U,x,F,q,j,B);return}}it&8?(et&16&&Ee(k,x,F),W!==k&&d(P,W)):et&16?it&16?De(k,W,P,U,x,F,q,j,B):Ee(k,x,F,!0):(et&8&&d(P,""),it&16&&_(W,P,U,x,F,q,j,B))},$t=(v,I,P,U,x,F,q,j,B)=>{v=v||Ys,I=I||Ys;const k=v.length,et=I.length,W=Math.min(k,et);let Y;for(Y=0;Y<W;Y++){const it=I[Y]=B?Mn(I[Y]):Ye(I[Y]);N(v[Y],it,P,null,x,F,q,j,B)}k>et?Ee(v,x,F,!0,!1,W):_(I,P,U,x,F,q,j,B,W)},De=(v,I,P,U,x,F,q,j,B)=>{let k=0;const et=I.length;let W=v.length-1,Y=et-1;for(;k<=W&&k<=Y;){const it=v[k],nt=I[k]=B?Mn(I[k]):Ye(I[k]);if(Hr(it,nt))N(it,nt,P,null,x,F,q,j,B);else break;k++}for(;k<=W&&k<=Y;){const it=v[W],nt=I[Y]=B?Mn(I[Y]):Ye(I[Y]);if(Hr(it,nt))N(it,nt,P,null,x,F,q,j,B);else break;W--,Y--}if(k>W){if(k<=Y){const it=Y+1,nt=it<et?I[it].el:U;for(;k<=Y;)N(null,I[k]=B?Mn(I[k]):Ye(I[k]),P,nt,x,F,q,j,B),k++}}else if(k>Y)for(;k<=W;)Ct(v[k],x,F,!0),k++;else{const it=k,nt=k,lt=new Map;for(k=nt;k<=Y;k++){const Kt=I[k]=B?Mn(I[k]):Ye(I[k]);Kt.key!=null&&lt.set(Kt.key,k)}let pt,Xt=0;const Ht=Y-nt+1;let Oe=!1,Jt=0;const Rn=new Array(Ht);for(k=0;k<Ht;k++)Rn[k]=0;for(k=it;k<=W;k++){const Kt=v[k];if(Xt>=Ht){Ct(Kt,x,F,!0);continue}let Ve;if(Kt.key!=null)Ve=lt.get(Kt.key);else for(pt=nt;pt<=Y;pt++)if(Rn[pt-nt]===0&&Hr(Kt,I[pt])){Ve=pt;break}Ve===void 0?Ct(Kt,x,F,!0):(Rn[Ve-nt]=k+1,Ve>=Jt?Jt=Ve:Oe=!0,N(Kt,I[Ve],P,null,x,F,q,j,B),Xt++)}const Pr=Oe?UE(Rn):Ys;for(pt=Pr.length-1,k=Ht-1;k>=0;k--){const Kt=nt+k,Ve=I[Kt],Li=Kt+1<et?I[Kt+1].el:U;Rn[k]===0?N(null,Ve,P,Li,x,F,q,j,B):Oe&&(pt<0||k!==Pr[pt]?ye(Ve,P,Li,2):pt--)}}},ye=(v,I,P,U,x=null)=>{const{el:F,type:q,transition:j,children:B,shapeFlag:k}=v;if(k&6){ye(v.component.subTree,I,P,U);return}if(k&128){v.suspense.move(I,P,U);return}if(k&64){q.move(v,I,P,Ne);return}if(q===je){s(F,I,P);for(let W=0;W<B.length;W++)ye(B[W],I,P,U);s(v.anchor,I,P);return}if(q===ul){G(v,I,P);return}if(U!==2&&k&1&&j)if(U===0)j.beforeEnter(F),s(F,I,P),Ae(()=>j.enter(F),x);else{const{leave:W,delayLeave:Y,afterLeave:it}=j,nt=()=>s(F,I,P),lt=()=>{W(F,()=>{nt(),it&&it()})};Y?Y(F,nt,lt):lt()}else s(F,I,P)},Ct=(v,I,P,U=!1,x=!1)=>{const{type:F,props:q,ref:j,children:B,dynamicChildren:k,shapeFlag:et,patchFlag:W,dirs:Y,cacheIndex:it}=v;if(W===-2&&(x=!1),j!=null&&Vo(j,null,P,v,!0),it!=null&&(I.renderCache[it]=void 0),et&256){I.ctx.deactivate(v);return}const nt=et&1&&Y,lt=!ti(v);let pt;if(lt&&(pt=q&&q.onVnodeBeforeUnmount)&&ze(pt,I,v),et&6)Yt(v.component,P,U);else{if(et&128){v.suspense.unmount(P,U);return}nt&&fs(v,null,I,"beforeUnmount"),et&64?v.type.remove(v,I,P,Ne,U):k&&!k.hasOnce&&(F!==je||W>0&&W&64)?Ee(k,I,P,!1,!0):(F===je&&W&384||!x&&et&16)&&Ee(B,I,P),U&&Dt(v)}(lt&&(pt=q&&q.onVnodeUnmounted)||nt)&&Ae(()=>{pt&&ze(pt,I,v),nt&&fs(v,null,I,"unmounted")},P)},Dt=v=>{const{type:I,el:P,anchor:U,transition:x}=v;if(I===je){We(P,U);return}if(I===ul){L(v);return}const F=()=>{r(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(v.shapeFlag&1&&x&&!x.persisted){const{leave:q,delayLeave:j}=x,B=()=>q(P,F);j?j(v.el,F,B):B()}else F()},We=(v,I)=>{let P;for(;v!==I;)P=g(v),r(v),v=P;r(I)},Yt=(v,I,P)=>{const{bum:U,scope:x,job:F,subTree:q,um:j,m:B,a:k}=v;jh(B),jh(k),U&&fo(U),x.stop(),F&&(F.flags|=8,Ct(q,v,I,P)),j&&Ae(j,I),Ae(()=>{v.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Ee=(v,I,P,U=!1,x=!1,F=0)=>{for(let q=F;q<v.length;q++)Ct(v[q],I,P,U,x)},pe=v=>{if(v.shapeFlag&6)return pe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const I=g(v.anchor||v.el),P=I&&I[aE];return P?g(P):I};let ve=!1;const Cn=(v,I,P)=>{v==null?I._vnode&&Ct(I._vnode,null,null,!0):N(I._vnode||null,v,I,null,null,null,P),I._vnode=v,ve||(ve=!0,Mh(),wp(),ve=!1)},Ne={p:N,um:Ct,m:ye,r:Dt,mt:xt,mc:_,pc:dt,pbc:A,n:pe,o:n};return{render:Cn,hydrate:void 0,createApp:PE(Cn)}}function ll({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ds({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function FE(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Kp(n,t,e=!1){const s=n.children,r=t.children;if(at(s)&&at(r))for(let i=0;i<s.length;i++){const a=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Mn(r[i]),l.el=a.el),!e&&l.patchFlag!==-2&&Kp(a,l)),l.type===pa&&(l.el=a.el)}}function UE(n){const t=n.slice(),e=[0];let s,r,i,a,l;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(r=e[e.length-1],n[r]<h){t[s]=r,e.push(s);continue}for(i=0,a=e.length-1;i<a;)l=i+a>>1,n[e[l]]<h?i=l+1:a=l;h<n[e[i]]&&(i>0&&(t[s]=e[i-1]),e[i]=s)}}for(i=e.length,a=e[i-1];i-- >0;)e[i]=a,a=t[a];return e}function qp(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:qp(t)}function jh(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const BE=Symbol.for("v-scx"),jE=()=>po(BE);function cl(n,t,e){return Wp(n,t,e)}function Wp(n,t,e=It){const{immediate:s,deep:r,flush:i,once:a}=e,l=ae({},e),c=t&&s||!t&&i!=="post";let h;if(di){if(i==="sync"){const T=jE();h=T.__watcherHandles||(T.__watcherHandles=[])}else if(!c){const T=()=>{};return T.stop=Je,T.resume=Je,T.pause=Je,T}}const d=he;l.call=(T,D,N)=>on(T,d,D,N);let m=!1;i==="post"?l.scheduler=T=>{Ae(T,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(T,D)=>{D?T():Lc(T)}),l.augmentJob=T=>{t&&(T.flags|=4),m&&(T.flags|=2,d&&(T.id=d.uid,T.i=d))};const g=nE(n,t,l);return di&&(h?h.push(g):c&&g()),g}function HE(n,t,e){const s=this.proxy,r=kt(n)?n.includes(".")?zp(s,n):()=>s[n]:n.bind(s,s);let i;ht(t)?i=t:(i=t.handler,e=t);const a=Ii(this),l=Wp(r,i.bind(s),e);return a(),l}function zp(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}const KE=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Kn(t)}Modifiers`]||n[`${Rs(t)}Modifiers`];function qE(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||It;let r=e;const i=t.startsWith("update:"),a=i&&KE(s,t.slice(7));a&&(a.trim&&(r=e.map(d=>kt(d)?d.trim():d)),a.number&&(r=e.map(Po)));let l,c=s[l=nl(t)]||s[l=nl(Kn(t))];!c&&i&&(c=s[l=nl(Rs(t))]),c&&on(c,n,6,r);const h=s[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,on(h,n,6,r)}}function Gp(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let a={},l=!1;if(!ht(n)){const c=h=>{const d=Gp(h,t,!0);d&&(l=!0,ae(a,d))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!l?(Pt(n)&&s.set(n,null),null):(at(i)?i.forEach(c=>a[c]=null):ae(a,i),Pt(n)&&s.set(n,a),a)}function da(n,t){return!n||!ra(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(n,t[0].toLowerCase()+t.slice(1))||At(n,Rs(t))||At(n,t))}function Hh(n){const{type:t,vnode:e,proxy:s,withProxy:r,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:m,data:g,setupState:T,ctx:D,inheritAttrs:N}=n,O=Oo(n);let H,z;try{if(e.shapeFlag&4){const L=r||s,J=L;H=Ye(h.call(J,L,d,m,T,g,D)),z=l}else{const L=t;H=Ye(L.length>1?L(m,{attrs:l,slots:a,emit:c}):L(m,null)),z=t.props?l:WE(l)}}catch(L){ni.length=0,ha(L,n,1),H=Ze(bs)}let G=H;if(z&&N!==!1){const L=Object.keys(z),{shapeFlag:J}=G;L.length&&J&7&&(i&&L.some(bc)&&(z=zE(z,i)),G=rr(G,z,!1,!0))}return e.dirs&&(G=rr(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(e.dirs):e.dirs),e.transition&&Mc(G,e.transition),H=G,Oo(O),H}const WE=n=>{let t;for(const e in n)(e==="class"||e==="style"||ra(e))&&((t||(t={}))[e]=n[e]);return t},zE=(n,t)=>{const e={};for(const s in n)(!bc(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function GE(n,t,e){const{props:s,children:r,component:i}=n,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Kh(s,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const g=d[m];if(a[g]!==s[g]&&!da(h,g))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===a?!1:s?a?Kh(s,a,h):!0:!!a;return!1}function Kh(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==n[i]&&!da(e,i))return!0}return!1}function QE({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const Qp=n=>n.__isSuspense;function YE(n,t){t&&t.pendingBranch?at(n)?t.effects.push(...n):t.effects.push(n):iE(n)}const je=Symbol.for("v-fgt"),pa=Symbol.for("v-txt"),bs=Symbol.for("v-cmt"),ul=Symbol.for("v-stc"),ni=[];let we=null;function Xe(n=!1){ni.push(we=n?null:[])}function XE(){ni.pop(),we=ni[ni.length-1]||null}let fi=1;function qh(n,t=!1){fi+=n,n<0&&we&&t&&(we.hasOnce=!0)}function Yp(n){return n.dynamicChildren=fi>0?we||Ys:null,XE(),fi>0&&we&&we.push(n),n}function kn(n,t,e,s,r,i){return Yp(X(n,t,e,s,r,i,!0))}function Xp(n,t,e,s,r){return Yp(Ze(n,t,e,s,r,!0))}function Jp(n){return n?n.__v_isVNode===!0:!1}function Hr(n,t){return n.type===t.type&&n.key===t.key}const Zp=({key:n})=>n??null,mo=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?kt(n)||oe(n)||ht(n)?{i:xe,r:n,k:t,f:!!e}:n:null);function X(n,t=null,e=null,s=0,r=null,i=n===je?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Zp(t),ref:t&&mo(t),scopeId:Sp,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:xe};return l?(Fc(c,e),i&128&&n.normalize(c)):e&&(c.shapeFlag|=kt(e)?8:16),fi>0&&!a&&we&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&we.push(c),c}const Ze=JE;function JE(n,t=null,e=null,s=0,r=null,i=!1){if((!n||n===vE)&&(n=bs),Jp(n)){const l=rr(n,t,!0);return e&&Fc(l,e),fi>0&&!i&&we&&(l.shapeFlag&6?we[we.indexOf(n)]=l:we.push(l)),l.patchFlag=-2,l}if(lv(n)&&(n=n.__vccOpts),t){t=ZE(t);let{class:l,style:c}=t;l&&!kt(l)&&(t.class=la(l)),Pt(c)&&(xc(c)&&!at(c)&&(c=ae({},c)),t.style=Sc(c))}const a=kt(n)?1:Qp(n)?128:lE(n)?64:Pt(n)?4:ht(n)?2:0;return X(n,t,e,s,r,a,i,!0)}function ZE(n){return n?xc(n)||kp(n)?ae({},n):n:null}function rr(n,t,e=!1,s=!1){const{props:r,ref:i,patchFlag:a,children:l,transition:c}=n,h=t?tv(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&Zp(h),ref:t&&t.ref?e&&i?at(i)?i.concat(mo(t)):[i,mo(t)]:mo(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==je?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&rr(n.ssContent),ssFallback:n.ssFallback&&rr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&Mc(d,c.clone(d)),d}function go(n=" ",t=0){return Ze(pa,null,n,t)}function _o(n="",t=!1){return t?(Xe(),Xp(bs,null,n)):Ze(bs,null,n)}function Ye(n){return n==null||typeof n=="boolean"?Ze(bs):at(n)?Ze(je,null,n.slice()):Jp(n)?Mn(n):Ze(pa,null,String(n))}function Mn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:rr(n)}function Fc(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(at(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Fc(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!kp(t)?t._ctx=xe:r===3&&xe&&(xe.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else ht(t)?(t={default:t,_ctx:xe},e=32):(t=String(t),s&64?(e=16,t=[go(t)]):e=8);n.children=t,n.shapeFlag|=e}function tv(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=la([t.class,s.class]));else if(r==="style")t.style=Sc([t.style,s.style]);else if(ra(r)){const i=t[r],a=s[r];a&&i!==a&&!(at(i)&&i.includes(a))&&(t[r]=i?[].concat(i,a):a)}else r!==""&&(t[r]=s[r])}return t}function ze(n,t,e,s=null){on(n,t,7,[e,s])}const ev=xp();let nv=0;function sv(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||ev,i={uid:nv++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ry(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fp(s,r),emitsOptions:Gp(s,r),emit:null,emitted:null,propsDefaults:It,inheritAttrs:s.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=qE.bind(null,i),n.ce&&n.ce(i),i}let he=null,Lo,Wl;{const n=aa(),t=(e,s)=>{let r;return(r=n[e])||(r=n[e]=[]),r.push(s),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};Lo=t("__VUE_INSTANCE_SETTERS__",e=>he=e),Wl=t("__VUE_SSR_SETTERS__",e=>di=e)}const Ii=n=>{const t=he;return Lo(n),n.scope.on(),()=>{n.scope.off(),Lo(t)}},Wh=()=>{he&&he.scope.off(),Lo(null)};function tm(n){return n.vnode.shapeFlag&4}let di=!1;function rv(n,t=!1,e=!1){t&&Wl(t);const{props:s,children:r}=n.vnode,i=tm(n);NE(n,s,i,t),LE(n,r,e);const a=i?iv(n,t):void 0;return t&&Wl(!1),a}function iv(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,AE);const{setup:s}=e;if(s){es();const r=n.setupContext=s.length>1?av(n):null,i=Ii(n),a=wi(s,n,0,[n.props,r]),l=Xd(a);if(ns(),i(),(l||n.sp)&&!ti(n)&&Cp(n),l){if(a.then(Wh,Wh),t)return a.then(c=>{zh(n,c)}).catch(c=>{ha(c,n,0)});n.asyncDep=a}else zh(n,a)}else em(n)}function zh(n,t,e){ht(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Pt(t)&&(n.setupState=vp(t)),em(n)}function em(n,t,e){const s=n.type;n.render||(n.render=s.render||Je);{const r=Ii(n);es();try{bE(n)}finally{ns(),r()}}}const ov={get(n,t){return se(n,"get",""),n[t]}};function av(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,ov),slots:n.slots,emit:n.emit,expose:t}}function ma(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(vp(Qy(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in ei)return ei[e](n)},has(t,e){return e in t||e in ei}})):n.proxy}function lv(n){return ht(n)&&"__vccOpts"in n}const cv=(n,t)=>tE(n,t,di),uv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zl;const Gh=typeof window<"u"&&window.trustedTypes;if(Gh)try{zl=Gh.createPolicy("vue",{createHTML:n=>n})}catch{}const nm=zl?n=>zl.createHTML(n):n=>n,hv="http://www.w3.org/2000/svg",fv="http://www.w3.org/1998/Math/MathML",pn=typeof document<"u"?document:null,Qh=pn&&pn.createElement("template"),dv={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t==="svg"?pn.createElementNS(hv,n):t==="mathml"?pn.createElementNS(fv,n):e?pn.createElement(n,{is:e}):pn.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>pn.createTextNode(n),createComment:n=>pn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>pn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,r,i){const a=e?e.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===i||!(r=r.nextSibling)););else{Qh.innerHTML=nm(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const l=Qh.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[a?a.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},pv=Symbol("_vtc");function mv(n,t,e){const s=n[pv];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Yh=Symbol("_vod"),gv=Symbol("_vsh"),_v=Symbol(""),yv=/(^|;)\s*display\s*:/;function Ev(n,t,e){const s=n.style,r=kt(e);let i=!1;if(e&&!r){if(t)if(kt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();e[l]==null&&yo(s,l,"")}else for(const a in t)e[a]==null&&yo(s,a,"");for(const a in e)a==="display"&&(i=!0),yo(s,a,e[a])}else if(r){if(t!==e){const a=s[_v];a&&(e+=";"+a),s.cssText=e,i=yv.test(e)}}else t&&n.removeAttribute("style");Yh in n&&(n[Yh]=i?s.display:"",n[gv]&&(s.display="none"))}const Xh=/\s*!important$/;function yo(n,t,e){if(at(e))e.forEach(s=>yo(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=vv(n,t);Xh.test(e)?n.setProperty(Rs(s),e.replace(Xh,""),"important"):n[s]=e}}const Jh=["Webkit","Moz","ms"],hl={};function vv(n,t){const e=hl[t];if(e)return e;let s=Kn(t);if(s!=="filter"&&s in n)return hl[t]=s;s=tp(s);for(let r=0;r<Jh.length;r++){const i=Jh[r]+s;if(i in n)return hl[t]=i}return t}const Zh="http://www.w3.org/1999/xlink";function tf(n,t,e,s,r,i=Iy(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Zh,t.slice(6,t.length)):n.setAttributeNS(Zh,t,e):e==null||i&&!np(e)?n.removeAttribute(t):n.setAttribute(t,i?"":rn(e)?String(e):e)}function ef(n,t,e,s,r){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?nm(e):e);return}const i=n.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let a=!1;if(e===""||e==null){const l=typeof n[t];l==="boolean"?e=np(e):e==null&&l==="string"?(e="",a=!0):l==="number"&&(e=0,a=!0)}try{n[t]=e}catch{}a&&n.removeAttribute(r||t)}function gs(n,t,e,s){n.addEventListener(t,e,s)}function Tv(n,t,e,s){n.removeEventListener(t,e,s)}const nf=Symbol("_vei");function Av(n,t,e,s,r=null){const i=n[nf]||(n[nf]={}),a=i[t];if(s&&a)a.value=s;else{const[l,c]=bv(t);if(s){const h=i[t]=Sv(s,r);gs(n,l,h,c)}else a&&(Tv(n,l,a,c),i[t]=void 0)}}const sf=/(?:Once|Passive|Capture)$/;function bv(n){let t;if(sf.test(n)){t={};let s;for(;s=n.match(sf);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Rs(n.slice(2)),t]}let fl=0;const wv=Promise.resolve(),Iv=()=>fl||(wv.then(()=>fl=0),fl=Date.now());function Sv(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;on(Cv(s,e.value),t,5,[s])};return e.value=n,e.attached=Iv(),e}function Cv(n,t){if(at(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const rf=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Rv=(n,t,e,s,r,i)=>{const a=r==="svg";t==="class"?mv(n,s,a):t==="style"?Ev(n,e,s):ra(t)?bc(t)||Av(n,t,e,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Pv(n,t,s,a))?(ef(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tf(n,t,s,a,i,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!kt(s))?ef(n,Kn(t),s,i,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),tf(n,t,s,a))};function Pv(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&rf(t)&&ht(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return rf(t)&&kt(e)?!1:t in n}const Mo=n=>{const t=n.props["onUpdate:modelValue"]||!1;return at(t)?e=>fo(t,e):t};function Dv(n){n.target.composing=!0}function of(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const er=Symbol("_assign"),$s={created(n,{modifiers:{lazy:t,trim:e,number:s}},r){n[er]=Mo(r);const i=s||r.props&&r.props.type==="number";gs(n,t?"change":"input",a=>{if(a.target.composing)return;let l=n.value;e&&(l=l.trim()),i&&(l=Po(l)),n[er](l)}),e&&gs(n,"change",()=>{n.value=n.value.trim()}),t||(gs(n,"compositionstart",Dv),gs(n,"compositionend",of),gs(n,"change",of))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:r,number:i}},a){if(n[er]=Mo(a),n.composing)return;const l=(i||n.type==="number")&&!/^0\d/.test(n.value)?Po(n.value):n.value,c=t??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||r&&n.value.trim()===c)||(n.value=c))}},af={deep:!0,created(n,{value:t,modifiers:{number:e}},s){const r=ia(t);gs(n,"change",()=>{const i=Array.prototype.filter.call(n.options,a=>a.selected).map(a=>e?Po(ko(a)):ko(a));n[er](n.multiple?r?new Set(i):i:i[0]),n._assigning=!0,Ap(()=>{n._assigning=!1})}),n[er]=Mo(s)},mounted(n,{value:t}){lf(n,t)},beforeUpdate(n,t,e){n[er]=Mo(e)},updated(n,{value:t}){n._assigning||lf(n,t)}};function lf(n,t){const e=n.multiple,s=at(t);if(!(e&&!s&&!ia(t))){for(let r=0,i=n.options.length;r<i;r++){const a=n.options[r],l=ko(a);if(e)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=t.some(h=>String(h)===String(l)):a.selected=Cy(t,l)>-1}else a.selected=t.has(l);else if(ca(ko(a),t)){n.selectedIndex!==r&&(n.selectedIndex=r);return}}!e&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function ko(n){return"_value"in n?n._value:n.value}const Nv=["ctrl","shift","alt","meta"],Ov={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>Nv.some(e=>n[`${e}Key`]&&!t.includes(e))},Vv=(n,t)=>{const e=n._withMods||(n._withMods={}),s=t.join(".");return e[s]||(e[s]=(r,...i)=>{for(let a=0;a<t.length;a++){const l=Ov[t[a]];if(l&&l(r,t))return}return n(r,...i)})},xv=ae({patchProp:Rv},dv);let cf;function Lv(){return cf||(cf=kE(xv))}const Mv=(...n)=>{const t=Lv().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=$v(s);if(!r)return;const i=t._component;!ht(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=e(r,!1,kv(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};function kv(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function $v(n){return kt(n)?document.querySelector(n):n}const Fv=()=>{};var uf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Uv=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const r=n[e++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[e++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[e++],a=n[e++],l=n[e++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=n[e++],a=n[e++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return t.join("")},rm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],a=r+1<n.length,l=a?n[r+1]:0,c=r+2<n.length,h=c?n[r+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,T=h&63;c||(T=64,a||(g=64)),s.push(e[d],e[m],e[g],e[T])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(sm(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Uv(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=e[n.charAt(r++)],l=r<n.length?e[n.charAt(r)]:0;++r;const h=r<n.length?e[n.charAt(r)]:64;++r;const m=r<n.length?e[n.charAt(r)]:64;if(++r,i==null||l==null||h==null||m==null)throw new Bv;const g=i<<2|l>>4;if(s.push(g),h!==64){const T=l<<4&240|h>>2;if(s.push(T),m!==64){const D=h<<6&192|m;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Bv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jv=function(n){const t=sm(n);return rm.encodeByteArray(t,!0)},$o=function(n){return jv(n).replace(/\./g,"")},Hv=function(n){try{return rm.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=()=>Kv().__FIREBASE_DEFAULTS__,Wv=()=>{if(typeof process>"u"||typeof uf>"u")return;const n=uf.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},zv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Hv(n[1]);return t&&JSON.parse(t)},Uc=()=>{try{return Fv()||qv()||Wv()||zv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Gv=n=>{var t,e;return(e=(t=Uc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Qv=n=>{const t=Gv(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},im=()=>{var n;return(n=Uc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$o(JSON.stringify(e)),$o(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Zv(){var n;const t=(n=Uc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tT(){return!Zv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eT(){try{return typeof indexedDB=="object"}catch{return!1}}function nT(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var i;t(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="FirebaseError";class Er extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=sT,Object.setPrototypeOf(this,Er.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,om.prototype.create)}}class om{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],a=i?rT(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new Er(r,l,s)}}function rT(n,t){return n.replace(iT,(e,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const iT=/\{\$([^}]+)}/g;function Fo(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const r of e){if(!s.includes(r))return!1;const i=n[r],a=t[r];if(hf(i)&&hf(a)){if(!Fo(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!e.includes(r))return!1;return!0}function hf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(n){return n&&n._delegate?n._delegate:n}class pi{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new Yv;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lT(t))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=ms){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ms){return this.instances.has(t)}getOptions(t=ms){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(t,e){var s;const r=this.normalizeInstanceIdentifier(e),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const r of s)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aT(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ms){return this.component?this.component.multipleInstances?t:ms:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aT(n){return n===ms?void 0:n}function lT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new oT(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(yt||(yt={}));const uT={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},hT=yt.INFO,fT={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},dT=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),r=fT[t];if(r)console[r](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class am{constructor(t){this.name=t,this._logLevel=hT,this._logHandler=dT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...t),this._logHandler(this,yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...t),this._logHandler(this,yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...t),this._logHandler(this,yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...t),this._logHandler(this,yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...t),this._logHandler(this,yt.ERROR,...t)}}const pT=(n,t)=>t.some(e=>n instanceof e);let ff,df;function mT(){return ff||(ff=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gT(){return df||(df=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lm=new WeakMap,Gl=new WeakMap,cm=new WeakMap,dl=new WeakMap,Bc=new WeakMap;function _T(n){const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{e(Un(n.result)),r()},a=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&lm.set(e,n)}).catch(()=>{}),Bc.set(t,n),t}function yT(n){if(Gl.has(n))return;const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{e(),r()},a=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});Gl.set(n,t)}let Ql={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Gl.get(n);if(t==="objectStoreNames")return n.objectStoreNames||cm.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Un(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function ET(n){Ql=n(Ql)}function vT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(pl(this),t,...e);return cm.set(s,t.sort?t.sort():[t]),Un(s)}:gT().includes(n)?function(...t){return n.apply(pl(this),t),Un(lm.get(this))}:function(...t){return Un(n.apply(pl(this),t))}}function TT(n){return typeof n=="function"?vT(n):(n instanceof IDBTransaction&&yT(n),pT(n,mT())?new Proxy(n,Ql):n)}function Un(n){if(n instanceof IDBRequest)return _T(n);if(dl.has(n))return dl.get(n);const t=TT(n);return t!==n&&(dl.set(n,t),Bc.set(t,n)),t}const pl=n=>Bc.get(n);function AT(n,t,{blocked:e,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(n,t),l=Un(a);return s&&a.addEventListener("upgradeneeded",c=>{s(Un(a.result),c.oldVersion,c.newVersion,Un(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const bT=["get","getKey","getAll","getAllKeys","count"],wT=["put","add","delete","clear"],ml=new Map;function pf(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(ml.get(t))return ml.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,r=wT.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(r||bT.includes(e)))return;const i=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[e](...l),r&&c.done]))[0]};return ml.set(t,i),i}ET(n=>({...n,get:(t,e,s)=>pf(t,e)||n.get(t,e,s),has:(t,e)=>!!pf(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ST(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function ST(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yl="@firebase/app",mf="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn=new am("@firebase/app"),CT="@firebase/app-compat",RT="@firebase/analytics-compat",PT="@firebase/analytics",DT="@firebase/app-check-compat",NT="@firebase/app-check",OT="@firebase/auth",VT="@firebase/auth-compat",xT="@firebase/database",LT="@firebase/data-connect",MT="@firebase/database-compat",kT="@firebase/functions",$T="@firebase/functions-compat",FT="@firebase/installations",UT="@firebase/installations-compat",BT="@firebase/messaging",jT="@firebase/messaging-compat",HT="@firebase/performance",KT="@firebase/performance-compat",qT="@firebase/remote-config",WT="@firebase/remote-config-compat",zT="@firebase/storage",GT="@firebase/storage-compat",QT="@firebase/firestore",YT="@firebase/vertexai",XT="@firebase/firestore-compat",JT="firebase",ZT="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl="[DEFAULT]",tA={[Yl]:"fire-core",[CT]:"fire-core-compat",[PT]:"fire-analytics",[RT]:"fire-analytics-compat",[NT]:"fire-app-check",[DT]:"fire-app-check-compat",[OT]:"fire-auth",[VT]:"fire-auth-compat",[xT]:"fire-rtdb",[LT]:"fire-data-connect",[MT]:"fire-rtdb-compat",[kT]:"fire-fn",[$T]:"fire-fn-compat",[FT]:"fire-iid",[UT]:"fire-iid-compat",[BT]:"fire-fcm",[jT]:"fire-fcm-compat",[HT]:"fire-perf",[KT]:"fire-perf-compat",[qT]:"fire-rc",[WT]:"fire-rc-compat",[zT]:"fire-gcs",[GT]:"fire-gcs-compat",[QT]:"fire-fst",[XT]:"fire-fst-compat",[YT]:"fire-vertex","fire-js":"fire-js",[JT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new Map,eA=new Map,Jl=new Map;function gf(n,t){try{n.container.addComponent(t)}catch(e){vn.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Bo(n){const t=n.name;if(Jl.has(t))return vn.debug(`There were multiple attempts to register component ${t}.`),!1;Jl.set(t,n);for(const e of Uo.values())gf(e,n);for(const e of eA.values())gf(e,n);return!0}function nA(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function sA(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bn=new om("app","Firebase",rA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new pi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=ZT;function um(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:Xl,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Bn.create("bad-app-name",{appName:String(r)});if(e||(e=im()),!e)throw Bn.create("no-options");const i=Uo.get(r);if(i){if(Fo(e,i.options)&&Fo(s,i.config))return i;throw Bn.create("duplicate-app",{appName:r})}const a=new cT(r);for(const c of Jl.values())a.addComponent(c);const l=new iA(e,s,a);return Uo.set(r,l),l}function aA(n=Xl){const t=Uo.get(n);if(!t&&n===Xl&&im())return um();if(!t)throw Bn.create("no-app",{appName:n});return t}function nr(n,t,e){var s;let r=(s=tA[n])!==null&&s!==void 0?s:n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${t}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),vn.warn(l.join(" "));return}Bo(new pi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebase-heartbeat-database",cA=1,mi="firebase-heartbeat-store";let gl=null;function hm(){return gl||(gl=AT(lA,cA,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(mi)}catch(e){console.warn(e)}}}}).catch(n=>{throw Bn.create("idb-open",{originalErrorMessage:n.message})})),gl}async function uA(n){try{const e=(await hm()).transaction(mi),s=await e.objectStore(mi).get(fm(n));return await e.done,s}catch(t){if(t instanceof Er)vn.warn(t.message);else{const e=Bn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});vn.warn(e.message)}}}async function _f(n,t){try{const s=(await hm()).transaction(mi,"readwrite");await s.objectStore(mi).put(t,fm(n)),await s.done}catch(e){if(e instanceof Er)vn.warn(e.message);else{const s=Bn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});vn.warn(s.message)}}}function fm(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA=1024,fA=30;class dA{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new mA(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yf();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>fA){const a=gA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){vn.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yf(),{heartbeatsToSend:s,unsentEntries:r}=pA(this._heartbeatsCache.heartbeats),i=$o(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return vn.warn(e),""}}}function yf(){return new Date().toISOString().substring(0,10)}function pA(n,t=hA){const e=[];let s=n.slice();for(const r of n){const i=e.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Ef(e)>t){i.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Ef(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class mA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eT()?nT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await uA(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return _f(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return _f(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Ef(n){return $o(JSON.stringify({version:2,heartbeats:n})).length}function gA(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(n){Bo(new pi("platform-logger",t=>new IT(t),"PRIVATE")),Bo(new pi("heartbeat",t=>new dA(t),"PRIVATE")),nr(Yl,mf,n),nr(Yl,mf,"esm2017"),nr("fire-js","")}_A("");var yA="firebase",EA="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(yA,EA,"app");var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jn,dm;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(b,_){function E(){}E.prototype=_.prototype,b.D=_.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(A,w,S){for(var y=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)y[xt-2]=arguments[xt];return _.prototype[w].apply(A,y)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,_,E){E||(E=0);var A=Array(16);if(typeof _=="string")for(var w=0;16>w;++w)A[w]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(w=0;16>w;++w)A[w]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=b.g[0],E=b.g[1],w=b.g[2];var S=b.g[3],y=_+(S^E&(w^S))+A[0]+3614090360&4294967295;_=E+(y<<7&4294967295|y>>>25),y=S+(w^_&(E^w))+A[1]+3905402710&4294967295,S=_+(y<<12&4294967295|y>>>20),y=w+(E^S&(_^E))+A[2]+606105819&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(_^w&(S^_))+A[3]+3250441966&4294967295,E=w+(y<<22&4294967295|y>>>10),y=_+(S^E&(w^S))+A[4]+4118548399&4294967295,_=E+(y<<7&4294967295|y>>>25),y=S+(w^_&(E^w))+A[5]+1200080426&4294967295,S=_+(y<<12&4294967295|y>>>20),y=w+(E^S&(_^E))+A[6]+2821735955&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(_^w&(S^_))+A[7]+4249261313&4294967295,E=w+(y<<22&4294967295|y>>>10),y=_+(S^E&(w^S))+A[8]+1770035416&4294967295,_=E+(y<<7&4294967295|y>>>25),y=S+(w^_&(E^w))+A[9]+2336552879&4294967295,S=_+(y<<12&4294967295|y>>>20),y=w+(E^S&(_^E))+A[10]+4294925233&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(_^w&(S^_))+A[11]+2304563134&4294967295,E=w+(y<<22&4294967295|y>>>10),y=_+(S^E&(w^S))+A[12]+1804603682&4294967295,_=E+(y<<7&4294967295|y>>>25),y=S+(w^_&(E^w))+A[13]+4254626195&4294967295,S=_+(y<<12&4294967295|y>>>20),y=w+(E^S&(_^E))+A[14]+2792965006&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(_^w&(S^_))+A[15]+1236535329&4294967295,E=w+(y<<22&4294967295|y>>>10),y=_+(w^S&(E^w))+A[1]+4129170786&4294967295,_=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(_^E))+A[6]+3225465664&4294967295,S=_+(y<<9&4294967295|y>>>23),y=w+(_^E&(S^_))+A[11]+643717713&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^_&(w^S))+A[0]+3921069994&4294967295,E=w+(y<<20&4294967295|y>>>12),y=_+(w^S&(E^w))+A[5]+3593408605&4294967295,_=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(_^E))+A[10]+38016083&4294967295,S=_+(y<<9&4294967295|y>>>23),y=w+(_^E&(S^_))+A[15]+3634488961&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^_&(w^S))+A[4]+3889429448&4294967295,E=w+(y<<20&4294967295|y>>>12),y=_+(w^S&(E^w))+A[9]+568446438&4294967295,_=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(_^E))+A[14]+3275163606&4294967295,S=_+(y<<9&4294967295|y>>>23),y=w+(_^E&(S^_))+A[3]+4107603335&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^_&(w^S))+A[8]+1163531501&4294967295,E=w+(y<<20&4294967295|y>>>12),y=_+(w^S&(E^w))+A[13]+2850285829&4294967295,_=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(_^E))+A[2]+4243563512&4294967295,S=_+(y<<9&4294967295|y>>>23),y=w+(_^E&(S^_))+A[7]+1735328473&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^_&(w^S))+A[12]+2368359562&4294967295,E=w+(y<<20&4294967295|y>>>12),y=_+(E^w^S)+A[5]+4294588738&4294967295,_=E+(y<<4&4294967295|y>>>28),y=S+(_^E^w)+A[8]+2272392833&4294967295,S=_+(y<<11&4294967295|y>>>21),y=w+(S^_^E)+A[11]+1839030562&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^_)+A[14]+4259657740&4294967295,E=w+(y<<23&4294967295|y>>>9),y=_+(E^w^S)+A[1]+2763975236&4294967295,_=E+(y<<4&4294967295|y>>>28),y=S+(_^E^w)+A[4]+1272893353&4294967295,S=_+(y<<11&4294967295|y>>>21),y=w+(S^_^E)+A[7]+4139469664&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^_)+A[10]+3200236656&4294967295,E=w+(y<<23&4294967295|y>>>9),y=_+(E^w^S)+A[13]+681279174&4294967295,_=E+(y<<4&4294967295|y>>>28),y=S+(_^E^w)+A[0]+3936430074&4294967295,S=_+(y<<11&4294967295|y>>>21),y=w+(S^_^E)+A[3]+3572445317&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^_)+A[6]+76029189&4294967295,E=w+(y<<23&4294967295|y>>>9),y=_+(E^w^S)+A[9]+3654602809&4294967295,_=E+(y<<4&4294967295|y>>>28),y=S+(_^E^w)+A[12]+3873151461&4294967295,S=_+(y<<11&4294967295|y>>>21),y=w+(S^_^E)+A[15]+530742520&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^_)+A[2]+3299628645&4294967295,E=w+(y<<23&4294967295|y>>>9),y=_+(w^(E|~S))+A[0]+4096336452&4294967295,_=E+(y<<6&4294967295|y>>>26),y=S+(E^(_|~w))+A[7]+1126891415&4294967295,S=_+(y<<10&4294967295|y>>>22),y=w+(_^(S|~E))+A[14]+2878612391&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~_))+A[5]+4237533241&4294967295,E=w+(y<<21&4294967295|y>>>11),y=_+(w^(E|~S))+A[12]+1700485571&4294967295,_=E+(y<<6&4294967295|y>>>26),y=S+(E^(_|~w))+A[3]+2399980690&4294967295,S=_+(y<<10&4294967295|y>>>22),y=w+(_^(S|~E))+A[10]+4293915773&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~_))+A[1]+2240044497&4294967295,E=w+(y<<21&4294967295|y>>>11),y=_+(w^(E|~S))+A[8]+1873313359&4294967295,_=E+(y<<6&4294967295|y>>>26),y=S+(E^(_|~w))+A[15]+4264355552&4294967295,S=_+(y<<10&4294967295|y>>>22),y=w+(_^(S|~E))+A[6]+2734768916&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~_))+A[13]+1309151649&4294967295,E=w+(y<<21&4294967295|y>>>11),y=_+(w^(E|~S))+A[4]+4149444226&4294967295,_=E+(y<<6&4294967295|y>>>26),y=S+(E^(_|~w))+A[11]+3174756917&4294967295,S=_+(y<<10&4294967295|y>>>22),y=w+(_^(S|~E))+A[2]+718787259&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~_))+A[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(w+(y<<21&4294967295|y>>>11))&4294967295,b.g[2]=b.g[2]+w&4294967295,b.g[3]=b.g[3]+S&4294967295}s.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var E=_-this.blockSize,A=this.B,w=this.h,S=0;S<_;){if(w==0)for(;S<=E;)r(this,b,S),S+=this.blockSize;if(typeof b=="string"){for(;S<_;)if(A[w++]=b.charCodeAt(S++),w==this.blockSize){r(this,A),w=0;break}}else for(;S<_;)if(A[w++]=b[S++],w==this.blockSize){r(this,A),w=0;break}}this.h=w,this.o+=_},s.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var E=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=E&255,E/=256;for(this.u(b),b=Array(16),_=E=0;4>_;++_)for(var A=0;32>A;A+=8)b[E++]=this.g[_]>>>A&255;return b};function i(b,_){var E=l;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=_(b)}function a(b,_){this.h=_;for(var E=[],A=!0,w=b.length-1;0<=w;w--){var S=b[w]|0;A&&S==_||(E[w]=S,A=!1)}this.g=E}var l={};function c(b){return-128<=b&&128>b?i(b,function(_){return new a([_|0],0>_?-1:0)}):new a([b|0],0>b?-1:0)}function h(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return O(h(-b));for(var _=[],E=1,A=0;b>=E;A++)_[A]=b/E|0,E*=4294967296;return new a(_,0)}function d(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return O(d(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(_,8)),A=m,w=0;w<b.length;w+=8){var S=Math.min(8,b.length-w),y=parseInt(b.substring(w,w+S),_);8>S?(S=h(Math.pow(_,S)),A=A.j(S).add(h(y))):(A=A.j(E),A=A.add(h(y)))}return A}var m=c(0),g=c(1),T=c(16777216);n=a.prototype,n.m=function(){if(N(this))return-O(this).m();for(var b=0,_=1,E=0;E<this.g.length;E++){var A=this.i(E);b+=(0<=A?A:4294967296+A)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(D(this))return"0";if(N(this))return"-"+O(this).toString(b);for(var _=h(Math.pow(b,6)),E=this,A="";;){var w=L(E,_).g;E=H(E,w.j(_));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=w,D(E))return S+A;for(;6>S.length;)S="0"+S;A=S+A}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function D(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function N(b){return b.h==-1}n.l=function(b){return b=H(this,b),N(b)?-1:D(b)?0:1};function O(b){for(var _=b.g.length,E=[],A=0;A<_;A++)E[A]=~b.g[A];return new a(E,~b.h).add(g)}n.abs=function(){return N(this)?O(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],A=0,w=0;w<=_;w++){var S=A+(this.i(w)&65535)+(b.i(w)&65535),y=(S>>>16)+(this.i(w)>>>16)+(b.i(w)>>>16);A=y>>>16,S&=65535,y&=65535,E[w]=y<<16|S}return new a(E,E[E.length-1]&-2147483648?-1:0)};function H(b,_){return b.add(O(_))}n.j=function(b){if(D(this)||D(b))return m;if(N(this))return N(b)?O(this).j(O(b)):O(O(this).j(b));if(N(b))return O(this.j(O(b)));if(0>this.l(T)&&0>b.l(T))return h(this.m()*b.m());for(var _=this.g.length+b.g.length,E=[],A=0;A<2*_;A++)E[A]=0;for(A=0;A<this.g.length;A++)for(var w=0;w<b.g.length;w++){var S=this.i(A)>>>16,y=this.i(A)&65535,xt=b.i(w)>>>16,Qt=b.i(w)&65535;E[2*A+2*w]+=y*Qt,z(E,2*A+2*w),E[2*A+2*w+1]+=S*Qt,z(E,2*A+2*w+1),E[2*A+2*w+1]+=y*xt,z(E,2*A+2*w+1),E[2*A+2*w+2]+=S*xt,z(E,2*A+2*w+2)}for(A=0;A<_;A++)E[A]=E[2*A+1]<<16|E[2*A];for(A=_;A<2*_;A++)E[A]=0;return new a(E,0)};function z(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function G(b,_){this.g=b,this.h=_}function L(b,_){if(D(_))throw Error("division by zero");if(D(b))return new G(m,m);if(N(b))return _=L(O(b),_),new G(O(_.g),O(_.h));if(N(_))return _=L(b,O(_)),new G(O(_.g),_.h);if(30<b.g.length){if(N(b)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var E=g,A=_;0>=A.l(b);)E=J(E),A=J(A);var w=tt(E,1),S=tt(A,1);for(A=tt(A,2),E=tt(E,2);!D(A);){var y=S.add(A);0>=y.l(b)&&(w=w.add(E),S=y),A=tt(A,1),E=tt(E,1)}return _=H(b,w.j(_)),new G(w,_)}for(w=m;0<=b.l(_);){for(E=Math.max(1,Math.floor(b.m()/_.m())),A=Math.ceil(Math.log(E)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),S=h(E),y=S.j(_);N(y)||0<y.l(b);)E-=A,S=h(E),y=S.j(_);D(S)&&(S=g),w=w.add(S),b=H(b,y)}return new G(w,b)}n.A=function(b){return L(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],A=0;A<_;A++)E[A]=this.i(A)&b.i(A);return new a(E,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],A=0;A<_;A++)E[A]=this.i(A)|b.i(A);return new a(E,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),E=[],A=0;A<_;A++)E[A]=this.i(A)^b.i(A);return new a(E,this.h^b.h)};function J(b){for(var _=b.g.length+1,E=[],A=0;A<_;A++)E[A]=b.i(A)<<1|b.i(A-1)>>>31;return new a(E,b.h)}function tt(b,_){var E=_>>5;_%=32;for(var A=b.g.length-E,w=[],S=0;S<A;S++)w[S]=0<_?b.i(S+E)>>>_|b.i(S+E+1)<<32-_:b.i(S+E);return new a(w,b.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,dm=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,jn=a}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pm,zr,mm,Eo,Zl,gm,_m,ym;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof to=="object"&&to];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=e(this);function r(o,u){if(u)t:{var f=s;o=o.split(".");for(var p=0;p<o.length-1;p++){var C=o[p];if(!(C in f))break t;f=f[C]}o=o[o.length-1],p=f[o],u=u(p),u!=p&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,p=!1,C={next:function(){if(!p&&f<o.length){var R=f++;return{value:u(R,o[R]),done:!1}}return p=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function m(o,u,f){if(!o)throw Error();if(2<arguments.length){var p=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,p),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function g(o,u,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function T(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var p=f.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function D(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(p,C,R){for(var K=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)K[wt-2]=arguments[wt];return u.prototype[C].apply(p,K)}}function N(o){const u=o.length;if(0<u){const f=Array(u);for(let p=0;p<u;p++)f[p]=o[p];return f}return[]}function O(o,u){for(let f=1;f<arguments.length;f++){const p=arguments[f];if(c(p)){const C=o.length||0,R=p.length||0;o.length=C+R;for(let K=0;K<R;K++)o[C+K]=p[K]}else o.push(p)}}class H{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function z(o){return/^[\s\xa0]*$/.test(o)}function G(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var J=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function tt(o,u,f){for(const p in o)u.call(f,o[p],p,o)}function b(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function _(o){const u={};for(const f in o)u[f]=o[f];return u}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,u){let f,p;for(let C=1;C<arguments.length;C++){p=arguments[C];for(f in p)o[f]=p[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(p,f)&&(o[f]=p[f])}}function w(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function S(o){l.setTimeout(()=>{throw o},0)}function y(){var o=$t;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class xt{constructor(){this.h=this.g=null}add(u,f){const p=Qt.get();p.set(u,f),this.h?this.h.next=p:this.g=p,this.h=p}}var Qt=new H(()=>new vt,o=>o.reset());class vt{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,dt=!1,$t=new xt,De=()=>{const o=l.Promise.resolve(void 0);ft=()=>{o.then(ye)}};var ye=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(f){S(f)}var u=Qt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}dt=!1};function Ct(){this.s=this.s,this.C=this.C}Ct.prototype.s=!1,Ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return o}();function Yt(o,u){if(Dt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(J){t:{try{L(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ee[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Yt.aa.h.call(this)}}D(Yt,Dt);var Ee={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Cn(o,u,f,p,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!p,this.ha=C,this.key=++ve,this.da=this.fa=!1}function Ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function un(o){this.src=o,this.g={},this.h=0}un.prototype.add=function(o,u,f,p,C){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var K=I(o,u,p,C);return-1<K?(u=o[K],f||(u.fa=!1)):(u=new Cn(u,this.src,R,!!p,C),u.fa=f,o.push(u)),u};function v(o,u){var f=u.type;if(f in o.g){var p=o.g[f],C=Array.prototype.indexOf.call(p,u,void 0),R;(R=0<=C)&&Array.prototype.splice.call(p,C,1),R&&(Ne(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function I(o,u,f,p){for(var C=0;C<o.length;++C){var R=o[C];if(!R.da&&R.listener==u&&R.capture==!!f&&R.ha==p)return C}return-1}var P="closure_lm_"+(1e6*Math.random()|0),U={};function x(o,u,f,p,C){if(Array.isArray(u)){for(var R=0;R<u.length;R++)x(o,u[R],f,p,C);return null}return f=it(f),o&&o[pe]?o.K(u,f,h(p)?!!p.capture:!1,C):F(o,u,f,!1,p,C)}function F(o,u,f,p,C,R){if(!u)throw Error("Invalid event type");var K=h(C)?!!C.capture:!!C,wt=W(o);if(wt||(o[P]=wt=new un(o)),f=wt.add(u,f,p,K,R),f.proxy)return f;if(p=q(),f.proxy=p,p.src=o,p.listener=f,o.addEventListener)We||(C=K),C===void 0&&(C=!1),o.addEventListener(u.toString(),p,C);else if(o.attachEvent)o.attachEvent(k(u.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return f}function q(){function o(f){return u.call(o.src,o.listener,f)}const u=et;return o}function j(o,u,f,p,C){if(Array.isArray(u))for(var R=0;R<u.length;R++)j(o,u[R],f,p,C);else p=h(p)?!!p.capture:!!p,f=it(f),o&&o[pe]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],f=I(R,f,p,C),-1<f&&(Ne(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=W(o))&&(u=o.g[u.toString()],o=-1,u&&(o=I(u,f,p,C)),(f=-1<o?u[o]:null)&&B(f))}function B(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[pe])v(u.i,o);else{var f=o.type,p=o.proxy;u.removeEventListener?u.removeEventListener(f,p,o.capture):u.detachEvent?u.detachEvent(k(f),p):u.addListener&&u.removeListener&&u.removeListener(p),(f=W(u))?(v(f,o),f.h==0&&(f.src=null,u[P]=null)):Ne(o)}}}function k(o){return o in U?U[o]:U[o]="on"+o}function et(o,u){if(o.da)o=!0;else{u=new Yt(u,this);var f=o.listener,p=o.ha||o.src;o.fa&&B(o),o=f.call(p,u)}return o}function W(o){return o=o[P],o instanceof un?o:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(o){return typeof o=="function"?o:(o[Y]||(o[Y]=function(u){return o.handleEvent(u)}),o[Y])}function nt(){Ct.call(this),this.i=new un(this),this.M=this,this.F=null}D(nt,Ct),nt.prototype[pe]=!0,nt.prototype.removeEventListener=function(o,u,f,p){j(this,o,u,f,p)};function lt(o,u){var f,p=o.F;if(p)for(f=[];p;p=p.F)f.push(p);if(o=o.M,p=u.type||u,typeof u=="string")u=new Dt(u,o);else if(u instanceof Dt)u.target=u.target||o;else{var C=u;u=new Dt(p,o),A(u,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var K=u.g=f[R];C=pt(K,p,!0,u)&&C}if(K=u.g=o,C=pt(K,p,!0,u)&&C,C=pt(K,p,!1,u)&&C,f)for(R=0;R<f.length;R++)K=u.g=f[R],C=pt(K,p,!1,u)&&C}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],p=0;p<f.length;p++)Ne(f[p]);delete o.g[u],o.h--}}this.F=null},nt.prototype.K=function(o,u,f,p){return this.i.add(String(o),u,!1,f,p)},nt.prototype.L=function(o,u,f,p){return this.i.add(String(o),u,!0,f,p)};function pt(o,u,f,p){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,R=0;R<u.length;++R){var K=u[R];if(K&&!K.da&&K.capture==f){var wt=K.listener,qt=K.ha||K.src;K.fa&&v(o.i,K),C=wt.call(qt,p)!==!1&&C}}return C&&!p.defaultPrevented}function Xt(o,u,f){if(typeof o=="function")f&&(o=g(o,f));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ht(o){o.g=Xt(()=>{o.g=null,o.i&&(o.i=!1,Ht(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Oe extends Ct{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(o){Ct.call(this),this.h=o,this.g={}}D(Jt,Ct);var Rn=[];function Pr(o){tt(o.g,function(u,f){this.g.hasOwnProperty(f)&&B(u)},o),o.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Pr(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,Ve=l.JSON.parse,Li=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Ba(){}Ba.prototype.h=null;function Uu(o){return o.h||(o.h=o.i())}function Bu(){}var Dr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ja(){Dt.call(this,"d")}D(ja,Dt);function Ha(){Dt.call(this,"c")}D(Ha,Dt);var ls={},ju=null;function Mi(){return ju=ju||new nt}ls.La="serverreachability";function Hu(o){Dt.call(this,ls.La,o)}D(Hu,Dt);function Nr(o){const u=Mi();lt(u,new Hu(u))}ls.STAT_EVENT="statevent";function Ku(o,u){Dt.call(this,ls.STAT_EVENT,o),this.stat=u}D(Ku,Dt);function le(o){const u=Mi();lt(u,new Ku(u,o))}ls.Ma="timingevent";function qu(o,u){Dt.call(this,ls.Ma,o),this.size=u}D(qu,Dt);function Or(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function K_(o,u,f,p,C,R){o.info(function(){if(o.g)if(R)for(var K="",wt=R.split("&"),qt=0;qt<wt.length;qt++){var Et=wt[qt].split("=");if(1<Et.length){var Zt=Et[0];Et=Et[1];var te=Zt.split("_");K=2<=te.length&&te[1]=="type"?K+(Zt+"="+Et+"&"):K+(Zt+"=redacted&")}}else K=null;else K=R;return"XMLHTTP REQ ("+p+") [attempt "+C+"]: "+u+`
`+f+`
`+K})}function q_(o,u,f,p,C,R,K){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+C+"]: "+u+`
`+f+`
`+R+" "+K})}function Vs(o,u,f,p){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+z_(o,f)+(p?" "+p:"")})}function W_(o,u){o.info(function(){return"TIMEOUT: "+u})}Vr.prototype.info=function(){};function z_(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var p=f[o];if(!(2>p.length)){var C=p[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var K=1;K<C.length;K++)C[K]=""}}}}return Kt(f)}catch{return u}}var ki={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ka;function $i(){}D($i,Ba),$i.prototype.g=function(){return new XMLHttpRequest},$i.prototype.i=function(){return{}},Ka=new $i;function Pn(o,u,f,p){this.j=o,this.i=u,this.l=f,this.R=p||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zu}function zu(){this.i=null,this.g="",this.h=!1}var Gu={},qa={};function Wa(o,u,f){o.L=1,o.v=ji(hn(u)),o.m=f,o.P=!0,Qu(o,null)}function Qu(o,u){o.F=Date.now(),Fi(o),o.A=hn(o.v);var f=o.A,p=o.R;Array.isArray(p)||(p=[String(p)]),ch(f.i,"t",p),o.C=0,f=o.j.J,o.h=new zu,o.g=Ch(o.j,f?u:null,!o.m),0<o.O&&(o.M=new Oe(g(o.Y,o,o.g),o.O)),u=o.U,f=o.g,p=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Rn[0]=C.toString()),C=Rn);for(var R=0;R<C.length;R++){var K=x(f,C[R],p||u.handleEvent,!1,u.h||u);if(!K)break;u.g[K.key]=K}u=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Nr(),K_(o.i,o.u,o.A,o.l,o.R,o.m)}Pn.prototype.ca=function(o){o=o.target;const u=this.M;u&&fn(o)==3?u.j():this.Y(o)},Pn.prototype.Y=function(o){try{if(o==this.g)t:{const te=fn(this.g);var u=this.g.Ba();const Ms=this.g.Z();if(!(3>te)&&(te!=3||this.g&&(this.h.h||this.g.oa()||gh(this.g)))){this.J||te!=4||u==7||(u==8||0>=Ms?Nr(3):Nr(2)),za(this);var f=this.g.Z();this.X=f;e:if(Yu(this)){var p=gh(this.g);o="";var C=p.length,R=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),xr(this);var K="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(p[u],{stream:!(R&&u==C-1)});p.length=0,this.h.g+=o,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=f==200,q_(this.i,this.u,this.A,this.l,this.R,te,f),this.o){if(this.T&&!this.K){e:{if(this.g){var wt,qt=this.g;if((wt=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(wt)){var Et=wt;break e}}Et=null}if(f=Et)Vs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ga(this,f);else{this.o=!1,this.s=3,le(12),cs(this),xr(this);break t}}if(this.P){f=!0;let Ue;for(;!this.J&&this.C<K.length;)if(Ue=G_(this,K),Ue==qa){te==4&&(this.s=4,le(14),f=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Gu){this.s=4,le(15),Vs(this.i,this.l,K,"[Invalid Chunk]"),f=!1;break}else Vs(this.i,this.l,Ue,null),Ga(this,Ue);if(Yu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||K.length!=0||this.h.h||(this.s=1,le(16),f=!1),this.o=this.o&&f,!f)Vs(this.i,this.l,K,"[Invalid Chunked Response]"),cs(this),xr(this);else if(0<K.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),tl(Zt),Zt.M=!0,le(11))}}else Vs(this.i,this.l,K,null),Ga(this,K);te==4&&cs(this),this.o&&!this.J&&(te==4?bh(this.j,this):(this.o=!1,Fi(this)))}else hy(this.g),f==400&&0<K.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),cs(this),xr(this)}}}catch{}finally{}};function Yu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function G_(o,u){var f=o.C,p=u.indexOf(`
`,f);return p==-1?qa:(f=Number(u.substring(f,p)),isNaN(f)?Gu:(p+=1,p+f>u.length?qa:(u=u.slice(p,p+f),o.C=p+f,u)))}Pn.prototype.cancel=function(){this.J=!0,cs(this)};function Fi(o){o.S=Date.now()+o.I,Xu(o,o.I)}function Xu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Or(g(o.ba,o),u)}function za(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Pn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(W_(this.i,this.A),this.L!=2&&(Nr(),le(17)),cs(this),this.s=2,xr(this)):Xu(this,this.S-o)};function xr(o){o.j.G==0||o.J||bh(o.j,o)}function cs(o){za(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Pr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ga(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||Qa(f.h,o))){if(!o.K&&Qa(f.h,o)&&f.G==3){try{var p=f.Da.g.parse(u)}catch{p=null}if(Array.isArray(p)&&p.length==3){var C=p;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)Gi(f),Wi(f);else break t;Za(f),le(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Or(g(f.Za,f),6e3));if(1>=th(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hs(f,11)}else if((o.K||f.g==o)&&Gi(f),!z(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let Et=C[u];if(f.T=Et[0],Et=Et[1],f.G==2)if(Et[0]=="c"){f.K=Et[1],f.ia=Et[2];const Zt=Et[3];Zt!=null&&(f.la=Zt,f.j.info("VER="+f.la));const te=Et[4];te!=null&&(f.Aa=te,f.j.info("SVER="+f.Aa));const Ms=Et[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(p=1.5*Ms,f.L=p,f.j.info("backChannelRequestTimeoutMs_="+p)),p=f;const Ue=o.g;if(Ue){const Yi=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var R=p.h;R.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ya(R,R.h),R.h=null))}if(p.D){const el=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;el&&(p.ya=el,Rt(p.I,p.D,el))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),p=f;var K=o;if(p.qa=Sh(p,p.J?p.ia:null,p.W),K.K){eh(p.h,K);var wt=K,qt=p.L;qt&&(wt.I=qt),wt.B&&(za(wt),Fi(wt)),p.g=K}else Th(p);0<f.i.length&&zi(f)}else Et[0]!="stop"&&Et[0]!="close"||hs(f,7);else f.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?hs(f,7):Ja(f):Et[0]!="noop"&&f.l&&f.l.ta(Et),f.v=0)}}Nr(4)}catch{}}var Q_=class{constructor(o,u){this.g=o,this.map=u}};function Ju(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function th(o){return o.h?1:o.g?o.g.size:0}function Qa(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ya(o,u){o.g?o.g.add(u):o.h=u}function eh(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Ju.prototype.cancel=function(){if(this.i=nh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function nh(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return N(o.i)}function Y_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],f=o.length,p=0;p<f;p++)u.push(o[p]);return u}u=[],f=0;for(p in o)u[f++]=o[p];return u}function X_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const p in o)u[f++]=p;return u}}}function sh(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=X_(o),p=Y_(o),C=p.length,R=0;R<C;R++)u.call(void 0,p[R],f&&f[R],o)}var rh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function J_(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var p=o[f].indexOf("="),C=null;if(0<=p){var R=o[f].substring(0,p);C=o[f].substring(p+1)}else R=o[f];u(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function us(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof us){this.h=o.h,Ui(this,o.j),this.o=o.o,this.g=o.g,Bi(this,o.s),this.l=o.l;var u=o.i,f=new kr;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),ih(this,f),this.m=o.m}else o&&(u=String(o).match(rh))?(this.h=!1,Ui(this,u[1]||"",!0),this.o=Lr(u[2]||""),this.g=Lr(u[3]||"",!0),Bi(this,u[4]),this.l=Lr(u[5]||"",!0),ih(this,u[6]||"",!0),this.m=Lr(u[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}us.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Mr(u,oh,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Mr(u,oh,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Mr(f,f.charAt(0)=="/"?ey:ty,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Mr(f,sy)),o.join("")};function hn(o){return new us(o)}function Ui(o,u,f){o.j=f?Lr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Bi(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function ih(o,u,f){u instanceof kr?(o.i=u,ry(o.i,o.h)):(f||(u=Mr(u,ny)),o.i=new kr(u,o.h))}function Rt(o,u,f){o.i.set(u,f)}function ji(o){return Rt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Lr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Mr(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,Z_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Z_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var oh=/[#\/\?@]/g,ty=/[#\?:]/g,ey=/[#\?]/g,ny=/[#\?@]/g,sy=/#/g;function kr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Dn(o){o.g||(o.g=new Map,o.h=0,o.i&&J_(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}n=kr.prototype,n.add=function(o,u){Dn(this),this.i=null,o=xs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function ah(o,u){Dn(o),u=xs(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function lh(o,u){return Dn(o),u=xs(o,u),o.g.has(u)}n.forEach=function(o,u){Dn(this),this.g.forEach(function(f,p){f.forEach(function(C){o.call(u,C,p,this)},this)},this)},n.na=function(){Dn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let p=0;p<u.length;p++){const C=o[p];for(let R=0;R<C.length;R++)f.push(u[p])}return f},n.V=function(o){Dn(this);let u=[];if(typeof o=="string")lh(this,o)&&(u=u.concat(this.g.get(xs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},n.set=function(o,u){return Dn(this),this.i=null,o=xs(this,o),lh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function ch(o,u,f){ah(o,u),0<f.length&&(o.i=null,o.g.set(xs(o,u),N(f)),o.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var p=u[f];const R=encodeURIComponent(String(p)),K=this.V(p);for(p=0;p<K.length;p++){var C=R;K[p]!==""&&(C+="="+encodeURIComponent(String(K[p]))),o.push(C)}}return this.i=o.join("&")};function xs(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function ry(o,u){u&&!o.j&&(Dn(o),o.i=null,o.g.forEach(function(f,p){var C=p.toLowerCase();p!=C&&(ah(this,p),ch(this,C,f))},o)),o.j=u}function iy(o,u){const f=new Vr;if(l.Image){const p=new Image;p.onload=T(Nn,f,"TestLoadImage: loaded",!0,u,p),p.onerror=T(Nn,f,"TestLoadImage: error",!1,u,p),p.onabort=T(Nn,f,"TestLoadImage: abort",!1,u,p),p.ontimeout=T(Nn,f,"TestLoadImage: timeout",!1,u,p),l.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else u(!1)}function oy(o,u){const f=new Vr,p=new AbortController,C=setTimeout(()=>{p.abort(),Nn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:p.signal}).then(R=>{clearTimeout(C),R.ok?Nn(f,"TestPingServer: ok",!0,u):Nn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Nn(f,"TestPingServer: error",!1,u)})}function Nn(o,u,f,p,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),p(f)}catch{}}function ay(){this.g=new Li}function ly(o,u,f){const p=f||"";try{sh(o,function(C,R){let K=C;h(C)&&(K=Kt(C)),u.push(p+R+"="+encodeURIComponent(K))})}catch(C){throw u.push(p+"type="+encodeURIComponent("_badmap")),C}}function Hi(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Hi,Ba),Hi.prototype.g=function(){return new Ki(this.l,this.j)},Hi.prototype.i=function(o){return function(){return o}}({});function Ki(o,u){nt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ki,nt),n=Ki.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,Fr(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$r(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uh(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function uh(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?$r(this):Fr(this),this.readyState==3&&uh(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,$r(this))},n.Qa=function(o){this.g&&(this.response=o,$r(this))},n.ga=function(){this.g&&$r(this)};function $r(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Fr(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function Fr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function hh(o){let u="";return tt(o,function(f,p){u+=p,u+=":",u+=f,u+=`\r
`}),u}function Xa(o,u,f){t:{for(p in f){var p=!1;break t}p=!0}p||(f=hh(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Rt(o,u,f))}function Vt(o){nt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Vt,nt);var cy=/^https?$/i,uy=["POST","PUT"];n=Vt.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,f,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ka.g(),this.v=this.o?Uu(this.o):Uu(Ka),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){fh(this,R);return}if(o=f||"",f=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var C in p)f.set(C,p[C]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const R of p.keys())f.set(R,p.get(R));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(uy,u,void 0))||p||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,K]of f)this.g.setRequestHeader(R,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mh(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){fh(this,R)}};function fh(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,dh(o),qi(o)}function dh(o){o.A||(o.A=!0,lt(o,"complete"),lt(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,lt(this,"complete"),lt(this,"abort"),qi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qi(this,!0)),Vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ph(this):this.bb())},n.bb=function(){ph(this)};function ph(o){if(o.h&&typeof a<"u"&&(!o.v[1]||fn(o)!=4||o.Z()!=2)){if(o.u&&fn(o)==4)Xt(o.Ea,0,o);else if(lt(o,"readystatechange"),fn(o)==4){o.h=!1;try{const K=o.Z();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var p;if(p=K===0){var C=String(o.D).match(rh)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),p=!cy.test(C?C.toLowerCase():"")}f=p}if(f)lt(o,"complete"),lt(o,"success");else{o.m=6;try{var R=2<fn(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",dh(o)}}finally{qi(o)}}}}function qi(o,u){if(o.g){mh(o);const f=o.g,p=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||lt(o,"ready");try{f.onreadystatechange=p}catch{}}}function mh(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function fn(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ve(u)}};function gh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function hy(o){const u={};o=(o.g&&2<=fn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(z(o[p]))continue;var f=w(o[p]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const R=u[C]||[];u[C]=R,R.push(f)}b(u,function(p){return p.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function _h(o){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ur("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ur("baseRetryDelayMs",5e3,o),this.cb=Ur("retryDelaySeedMs",1e4,o),this.Wa=Ur("forwardChannelMaxRetries",2,o),this.wa=Ur("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Ju(o&&o.concurrentRequestLimit),this.Da=new ay,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=_h.prototype,n.la=8,n.G=1,n.connect=function(o,u,f,p){le(0),this.W=o,this.H=u||{},f&&p!==void 0&&(this.H.OSID=f,this.H.OAID=p),this.F=this.X,this.I=Sh(this,null,this.W),zi(this)};function Ja(o){if(yh(o),o.G==3){var u=o.U++,f=hn(o.I);if(Rt(f,"SID",o.K),Rt(f,"RID",u),Rt(f,"TYPE","terminate"),Br(o,f),u=new Pn(o,o.j,u),u.L=2,u.v=ji(hn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=Ch(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Fi(u)}Ih(o)}function Wi(o){o.g&&(tl(o),o.g.cancel(),o.g=null)}function yh(o){Wi(o),o.u&&(l.clearTimeout(o.u),o.u=null),Gi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function zi(o){if(!Zu(o.h)&&!o.s){o.s=!0;var u=o.Ga;ft||De(),dt||(ft(),dt=!0),$t.add(u,o),o.B=0}}function fy(o,u){return th(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Or(g(o.Ga,o,u),wh(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Pn(this,this.j,o);let R=this.o;if(this.S&&(R?(R=_(R),A(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var p=this.i[f];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(u+=p,4096<u){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=vh(this,C,u),f=hn(this.I),Rt(f,"RID",o),Rt(f,"CVER",22),this.D&&Rt(f,"X-HTTP-Session-Id",this.D),Br(this,f),R&&(this.O?u="headers="+encodeURIComponent(String(hh(R)))+"&"+u:this.m&&Xa(f,this.m,R)),Ya(this.h,C),this.Ua&&Rt(f,"TYPE","init"),this.P?(Rt(f,"$req",u),Rt(f,"SID","null"),C.T=!0,Wa(C,f,null)):Wa(C,f,u),this.G=2}}else this.G==3&&(o?Eh(this,o):this.i.length==0||Zu(this.h)||Eh(this))};function Eh(o,u){var f;u?f=u.l:f=o.U++;const p=hn(o.I);Rt(p,"SID",o.K),Rt(p,"RID",f),Rt(p,"AID",o.T),Br(o,p),o.m&&o.o&&Xa(p,o.m,o.o),f=new Pn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=vh(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ya(o.h,f),Wa(f,p,u)}function Br(o,u){o.H&&tt(o.H,function(f,p){Rt(u,p,f)}),o.l&&sh({},function(f,p){Rt(u,p,f)})}function vh(o,u,f){f=Math.min(o.i.length,f);var p=o.l?g(o.l.Na,o.l,o):null;t:{var C=o.i;let R=-1;for(;;){const K=["count="+f];R==-1?0<f?(R=C[0].g,K.push("ofs="+R)):R=0:K.push("ofs="+R);let wt=!0;for(let qt=0;qt<f;qt++){let Et=C[qt].g;const Zt=C[qt].map;if(Et-=R,0>Et)R=Math.max(0,C[qt].g-100),wt=!1;else try{ly(Zt,K,"req"+Et+"_")}catch{p&&p(Zt)}}if(wt){p=K.join("&");break t}}}return o=o.i.splice(0,f),u.D=o,p}function Th(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ft||De(),dt||(ft(),dt=!0),$t.add(u,o),o.v=0}}function Za(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Or(g(o.Fa,o),wh(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Ah(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Or(g(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Wi(this),Ah(this))};function tl(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Ah(o){o.g=new Pn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=hn(o.qa);Rt(u,"RID","rpc"),Rt(u,"SID",o.K),Rt(u,"AID",o.T),Rt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Rt(u,"TO",o.ja),Rt(u,"TYPE","xmlhttp"),Br(o,u),o.m&&o.o&&Xa(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=ji(hn(u)),f.m=null,f.P=!0,Qu(f,o)}n.Za=function(){this.C!=null&&(this.C=null,Wi(this),Za(this),le(19))};function Gi(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function bh(o,u){var f=null;if(o.g==u){Gi(o),tl(o),o.g=null;var p=2}else if(Qa(o.h,u))f=u.D,eh(o.h,u),p=1;else return;if(o.G!=0){if(u.o)if(p==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;p=Mi(),lt(p,new qu(p,f)),zi(o)}else Th(o);else if(C=u.s,C==3||C==0&&0<u.X||!(p==1&&fy(o,u)||p==2&&Za(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),C){case 1:hs(o,5);break;case 4:hs(o,10);break;case 3:hs(o,6);break;default:hs(o,2)}}}function wh(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function hs(o,u){if(o.j.info("Error code "+u),u==2){var f=g(o.fb,o),p=o.Xa;const C=!p;p=new us(p||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ui(p,"https"),ji(p),C?iy(p.toString(),f):oy(p.toString(),f)}else le(2);o.G=0,o.l&&o.l.sa(u),Ih(o),yh(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Ih(o){if(o.G=0,o.ka=[],o.l){const u=nh(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Sh(o,u,f){var p=f instanceof us?hn(f):new us(f);if(p.g!="")u&&(p.g=u+"."+p.g),Bi(p,p.s);else{var C=l.location;p=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var R=new us(null);p&&Ui(R,p),u&&(R.g=u),C&&Bi(R,C),f&&(R.l=f),p=R}return f=o.D,u=o.ya,f&&u&&Rt(p,f,u),Rt(p,"VER",o.la),Br(o,p),p}function Ch(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Vt(new Hi({eb:f})):new Vt(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rh(){}n=Rh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qi(){}Qi.prototype.g=function(o,u){return new Te(o,u)};function Te(o,u){nt.call(this),this.g=new _h(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!z(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!z(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Ls(this)}D(Te,nt),Te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Te.prototype.close=function(){Ja(this.g)},Te.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Kt(o),o=f);u.i.push(new Q_(u.Ya++,o)),u.G==3&&zi(u)},Te.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,Te.aa.N.call(this)};function Ph(o){ja.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(Ph,ja);function Dh(){Ha.call(this),this.status=1}D(Dh,Ha);function Ls(o){this.g=o}D(Ls,Rh),Ls.prototype.ua=function(){lt(this.g,"a")},Ls.prototype.ta=function(o){lt(this.g,new Ph(o))},Ls.prototype.sa=function(o){lt(this.g,new Dh)},Ls.prototype.ra=function(){lt(this.g,"b")},Qi.prototype.createWebChannel=Qi.prototype.g,Te.prototype.send=Te.prototype.o,Te.prototype.open=Te.prototype.m,Te.prototype.close=Te.prototype.close,ym=function(){return new Qi},_m=function(){return Mi()},gm=ls,Zl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ki.NO_ERROR=0,ki.TIMEOUT=8,ki.HTTP_ERROR=6,Eo=ki,Wu.COMPLETE="complete",mm=Wu,Bu.EventType=Dr,Dr.OPEN="a",Dr.CLOSE="b",Dr.ERROR="c",Dr.MESSAGE="d",nt.prototype.listen=nt.prototype.K,zr=Bu,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,pm=Vt}).apply(typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{});const Tf="@firebase/firestore",Af="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ne.UNAUTHENTICATED=new ne(null),ne.GOOGLE_CREDENTIALS=new ne("google-credentials-uid"),ne.FIRST_PARTY=new ne("first-party-uid"),ne.MOCK_USER=new ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vr="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new am("@firebase/firestore");function js(){return ws.logLevel}function Q(n,...t){if(ws.logLevel<=yt.DEBUG){const e=t.map(jc);ws.debug(`Firestore (${vr}): ${n}`,...e)}}function Tn(n,...t){if(ws.logLevel<=yt.ERROR){const e=t.map(jc);ws.error(`Firestore (${vr}): ${n}`,...e)}}function ir(n,...t){if(ws.logLevel<=yt.WARN){const e=t.map(jc);ws.warn(`Firestore (${vr}): ${n}`,...e)}}function jc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n="Unexpected state"){const t=`FIRESTORE (${vr}) INTERNAL ASSERTION FAILED: `+n;throw Tn(t),new Error(t)}function bt(n,t){n||ot()}function ut(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends Er{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ne.UNAUTHENTICATED))}shutdown(){}}class TA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class AA{constructor(t){this.t=t,this.currentUser=ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){bt(this.o===void 0);let s=this.i;const r=c=>this.i!==s?(s=this.i,e(c)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt(typeof s.accessToken=="string"),new Em(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return bt(t===null||typeof t=="string"),new ne(t)}}class bA{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=ne.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class wA{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new bA(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bf{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IA{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,sA(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){bt(this.o===void 0);const s=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new bf(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(bt(typeof e.token=="string"),this.R=e.token,new bf(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=SA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<e&&(s+=t.charAt(r[i]%62))}return s}}function gt(n,t){return n<t?-1:n>t?1:0}function or(n,t,e){return n.length===t.length&&n.every((s,r)=>e(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-62135596800,If=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(t){return Ut.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*If);return new Ut(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<wf)throw new Z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/If}_compareTo(t){return this.seconds===t.seconds?gt(this.nanoseconds,t.nanoseconds):gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-wf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{static fromTimestamp(t){return new ct(t)}static min(){return new ct(new Ut(0,0))}static max(){return new ct(new Ut(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf="__name__";class Qe{constructor(t,e,s){e===void 0?e=0:e>t.length&&ot(),s===void 0?s=t.length-e:s>t.length-e&&ot(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Qe.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Qe?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const i=Qe.compareSegments(t.get(r),e.get(r));if(i!==0)return i}return Math.sign(t.length-e.length)}static compareSegments(t,e){const s=Qe.isNumericId(t),r=Qe.isNumericId(e);return s&&!r?-1:!s&&r?1:s&&r?Qe.extractNumericId(t).compare(Qe.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return jn.fromString(t.substring(4,t.length-2))}}class Nt extends Qe{construct(t,e,s){return new Nt(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new Z(M.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(r=>r.length>0))}return new Nt(e)}static emptyPath(){return new Nt([])}}const CA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Qe{construct(t,e,s){return new zt(t,e,s)}static isValidIdentifier(t){return CA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sf}static keyField(){return new zt([Sf])}static fromServerFormat(t){const e=[];let s="",r=0;const i=()=>{if(s.length===0)throw new Z(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new Z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new Z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zt(e)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Nt.fromString(t))}static fromName(t){return new rt(Nt.fromString(t).popFirst(5))}static empty(){return new rt(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Nt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function RA(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=ct.fromTimestamp(s===1e9?new Ut(e+1,0):new Ut(e,s));return new Wn(r,rt.empty(),t)}function PA(n){return new Wn(n.readTime,n.key,gi)}class Wn{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new Wn(ct.min(),rt.empty(),gi)}static max(){return new Wn(ct.max(),rt.empty(),gi)}}function DA(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(n.documentKey,t.documentKey),e!==0?e:gt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tr(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==NA)throw n;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new V((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(e,i).next(s,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof V?e:V.resolve(e)}catch(e){return V.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):V.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):V.reject(e)}static resolve(t){return new V((e,s)=>{e(t)})}static reject(t){return new V((e,s)=>{s(t)})}static waitFor(t){return new V((e,s)=>{let r=0,i=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++i,a&&i===r&&e()},c=>s(c))}),a=!0,i===r&&e()})}static or(t){let e=V.resolve(!1);for(const s of t)e=e.next(r=>r?V.resolve(r):s());return e}static forEach(t,e){const s=[];return t.forEach((r,i)=>{s.push(e.call(this,r,i))}),this.waitFor(s)}static mapArray(t,e){return new V((s,r)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;e(t[h]).next(d=>{a[h]=d,++l,l===i&&s(a)},d=>r(d))}})}static doWhile(t,e){return new V((s,r)=>{const i=()=>{t()===!0?e().next(()=>{i()},r):s()};i()})}}function VA(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ar(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.oe(s),this._e=s=>e.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}ga.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=-1;function _a(n){return n==null}function jo(n){return n===0&&1/n==-1/0}function xA(n){return typeof n=="number"&&Number.isInteger(n)&&!jo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="";function LA(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Cf(t)),t=MA(n.get(e),t);return Cf(t)}function MA(n,t){let e=t;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":e+="";break;case Tm:e+="";break;default:e+=i}}return e}function Cf(n){return n+Tm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ss(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Am(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e){this.comparator=t,this.root=e||Wt.EMPTY}insert(t,e){return new Ot(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return e+s.left.size;r<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new eo(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new eo(this.root,t,this.comparator,!1)}getReverseIterator(){return new eo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new eo(this.root,t,this.comparator,!0)}}class eo{constructor(t,e,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?s(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,e,s,r,i){this.key=t,this.value=e,this.color=s??Wt.RED,this.left=r??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,r,i){return new Wt(t??this.key,e??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,s),null):i===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const t=this.left.check();if(t!==this.right.check())throw ot();return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(t,e,s,r,i){return this}insert(t,e,s){return new Wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Pf(this.data.getIterator())}getIteratorFrom(t){return new Pf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof Bt)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Bt(this.comparator);return e.data=t,e}}class Pf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.fields=t,t.sort(zt.comparator)}static empty(){return new Ie([])}unionWith(t){let e=new Bt(zt.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Ie(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return or(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new bm("Invalid base64 string: "+i):i}}(t);return new Gt(e)}static fromUint8Array(t){const e=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(t);return new Gt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zn(n){if(bt(!!n),typeof n=="string"){let t=0;const e=kA.exec(n);if(bt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gn(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="server_timestamp",Im="__type__",Sm="__previous_value__",Cm="__local_write_time__";function Kc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Im])===null||e===void 0?void 0:e.stringValue)===wm}function ya(n){const t=n.mapValue.fields[Sm];return Kc(t)?ya(t):t}function _i(n){const t=zn(n.mapValue.fields[Cm].timestampValue);return new Ut(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(t,e,s,r,i,a,l,c,h){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}const Ho="(default)";class yi{constructor(t,e){this.projectId=t,this.database=e||Ho}static empty(){return new yi("","")}get isDefaultDatabase(){return this.database===Ho}isEqual(t){return t instanceof yi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="__type__",FA="__max__",no={mapValue:{}},Pm="__vector__",Ko="value";function Qn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Kc(n)?4:BA(n)?9007199254740991:UA(n)?10:11:ot()}function an(n,t){if(n===t)return!0;const e=Qn(n);if(e!==Qn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return _i(n).isEqual(_i(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=zn(r.timestampValue),l=zn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,i){return Gn(r.bytesValue).isEqual(Gn(i.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Lt(r.geoPointValue.latitude)===Lt(i.geoPointValue.latitude)&&Lt(r.geoPointValue.longitude)===Lt(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lt(r.integerValue)===Lt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Lt(r.doubleValue),l=Lt(i.doubleValue);return a===l?jo(a)===jo(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return or(n.arrayValue.values||[],t.arrayValue.values||[],an);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Rf(a)!==Rf(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!an(a[c],l[c])))return!1;return!0}(n,t);default:return ot()}}function Ei(n,t){return(n.values||[]).find(e=>an(e,t))!==void 0}function ar(n,t){if(n===t)return 0;const e=Qn(n),s=Qn(t);if(e!==s)return gt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return gt(n.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Lt(i.integerValue||i.doubleValue),c=Lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return Df(n.timestampValue,t.timestampValue);case 4:return Df(_i(n),_i(t));case 5:return gt(n.stringValue,t.stringValue);case 6:return function(i,a){const l=Gn(i),c=Gn(a);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=gt(l[h],c[h]);if(d!==0)return d}return gt(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,a){const l=gt(Lt(i.latitude),Lt(a.latitude));return l!==0?l:gt(Lt(i.longitude),Lt(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return Nf(n.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,h,d;const m=i.fields||{},g=a.fields||{},T=(l=m[Ko])===null||l===void 0?void 0:l.arrayValue,D=(c=g[Ko])===null||c===void 0?void 0:c.arrayValue,N=gt(((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0,((d=D==null?void 0:D.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:Nf(T,D)}(n.mapValue,t.mapValue);case 11:return function(i,a){if(i===no.mapValue&&a===no.mapValue)return 0;if(i===no.mapValue)return 1;if(a===no.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const g=gt(c[m],d[m]);if(g!==0)return g;const T=ar(l[c[m]],h[d[m]]);if(T!==0)return T}return gt(c.length,d.length)}(n.mapValue,t.mapValue);default:throw ot()}}function Df(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return gt(n,t);const e=zn(n),s=zn(t),r=gt(e.seconds,s.seconds);return r!==0?r:gt(e.nanos,s.nanos)}function Nf(n,t){const e=n.values||[],s=t.values||[];for(let r=0;r<e.length&&r<s.length;++r){const i=ar(e[r],s[r]);if(i)return i}return gt(e.length,s.length)}function lr(n){return tc(n)}function tc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=zn(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return Gn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return rt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",r=!0;for(const i of e.values||[])r?r=!1:s+=",",s+=tc(i);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${tc(e.fields[a])}`;return r+"}"}(n.mapValue):ot()}function vo(n){switch(Qn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ya(n);return t?16+vo(t):16;case 5:return 2*n.stringValue.length;case 6:return Gn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+vo(i),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return ss(s.fields,(i,a)=>{r+=i.length+vo(a)}),r}(n.mapValue);default:throw ot()}}function ec(n){return!!n&&"integerValue"in n}function qc(n){return!!n&&"arrayValue"in n}function Of(n){return!!n&&"nullValue"in n}function Vf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function To(n){return!!n&&"mapValue"in n}function UA(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Rm])===null||e===void 0?void 0:e.stringValue)===Pm}function si(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ss(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=si(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=si(n.arrayValue.values[e]);return t}return Object.assign({},n)}function BA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===FA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.value=t}static empty(){return new ge({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!To(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=si(e)}setAll(t){let e=zt.emptyPath(),s={},r=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,s,r),s={},r=[],e=l.popLast()}a?s[l.lastSegment()]=si(a):r.push(l.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,s,r)}delete(t){const e=this.field(t.popLast());To(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return an(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=e.mapValue.fields[t.get(s)];To(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,s){ss(e,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new ge(si(this.value))}}function Dm(n){const t=[];return ss(n.fields,(e,s)=>{const r=new zt([e]);if(To(s)){const i=Dm(s.mapValue).fields;if(i.length===0)t.push(r);else for(const a of i)t.push(r.child(a))}else t.push(r)}),new Ie(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,s,r,i,a,l){this.key=t,this.documentType=e,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,ct.min(),ct.min(),ct.min(),ge.empty(),0)}static newFoundDocument(t,e,s,r){return new ie(t,1,e,ct.min(),s,r,0)}static newNoDocument(t,e){return new ie(t,2,e,ct.min(),ct.min(),ge.empty(),0)}static newUnknownDocument(t,e){return new ie(t,3,e,ct.min(),ct.min(),ge.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ge.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(t,e){this.position=t,this.inclusive=e}}function xf(n,t,e){let s=0;for(let r=0;r<n.position.length;r++){const i=t[r],a=n.position[r];if(i.field.isKeyField()?s=rt.comparator(rt.fromName(a.referenceValue),e.key):s=ar(a,e.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Lf(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!an(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(t,e="asc"){this.field=t,this.dir=e}}function jA(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{}class Ft extends Nm{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new KA(t,e,s):e==="array-contains"?new zA(t,s):e==="in"?new GA(t,s):e==="not-in"?new QA(t,s):e==="array-contains-any"?new YA(t,s):new Ft(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new qA(t,s):new WA(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(ar(e,this.value)):e!==null&&Qn(this.value)===Qn(e)&&this.matchesComparison(ar(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends Nm{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new ln(t,e)}matches(t){return Om(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Om(n){return n.op==="and"}function Vm(n){return HA(n)&&Om(n)}function HA(n){for(const t of n.filters)if(t instanceof ln)return!1;return!0}function nc(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+lr(n.value);if(Vm(n))return n.filters.map(t=>nc(t)).join(",");{const t=n.filters.map(e=>nc(e)).join(",");return`${n.op}(${t})`}}function xm(n,t){return n instanceof Ft?function(s,r){return r instanceof Ft&&s.op===r.op&&s.field.isEqual(r.field)&&an(s.value,r.value)}(n,t):n instanceof ln?function(s,r){return r instanceof ln&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,l)=>i&&xm(a,r.filters[l]),!0):!1}(n,t):void ot()}function Lm(n){return n instanceof Ft?function(e){return`${e.field.canonicalString()} ${e.op} ${lr(e.value)}`}(n):n instanceof ln?function(e){return e.op.toString()+" {"+e.getFilters().map(Lm).join(" ,")+"}"}(n):"Filter"}class KA extends Ft{constructor(t,e,s){super(t,e,s),this.key=rt.fromName(s.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class qA extends Ft{constructor(t,e){super(t,"in",e),this.keys=Mm("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class WA extends Ft{constructor(t,e){super(t,"not-in",e),this.keys=Mm("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Mm(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>rt.fromName(s.referenceValue))}class zA extends Ft{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return qc(e)&&Ei(e.arrayValue,this.value)}}class GA extends Ft{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ei(this.value.arrayValue,e)}}class QA extends Ft{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ei(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Ei(this.value.arrayValue,e)}}class YA extends Ft{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!qc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>Ei(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(t,e=null,s=[],r=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=l,this.le=null}}function Mf(n,t=null,e=[],s=[],r=null,i=null,a=null){return new XA(n,t,e,s,r,i,a)}function Wc(n){const t=ut(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>nc(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),_a(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>lr(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>lr(s)).join(",")),t.le=e}return t.le}function zc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!jA(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!xm(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Lf(n.startAt,t.startAt)&&Lf(n.endAt,t.endAt)}function sc(n){return rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,e=null,s=[],r=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function JA(n,t,e,s,r,i,a,l){return new Ea(n,t,e,s,r,i,a,l)}function Gc(n){return new Ea(n)}function kf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ZA(n){return n.collectionGroup!==null}function ri(n){const t=ut(n);if(t.he===null){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Bt(zt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.he.push(new Wo(i,s))}),e.has(zt.keyField().canonicalString())||t.he.push(new Wo(zt.keyField(),s))}return t.he}function tn(n){const t=ut(n);return t.Pe||(t.Pe=tb(t,ri(n))),t.Pe}function tb(n,t){if(n.limitType==="F")return Mf(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Wo(r.field,i)});const e=n.endAt?new qo(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new qo(n.startAt.position,n.startAt.inclusive):null;return Mf(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function rc(n,t,e){return new Ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function va(n,t){return zc(tn(n),tn(t))&&n.limitType===t.limitType}function km(n){return`${Wc(tn(n))}|lt:${n.limitType}`}function Hs(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(r=>Lm(r)).join(", ")}]`),_a(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>lr(r)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>lr(r)).join(",")),`Target(${s})`}(tn(n))}; limitType=${n.limitType})`}function Ta(n,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):rt.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,t)&&function(s,r){for(const i of ri(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(a,l,c){const h=xf(a,l,c);return a.inclusive?h<=0:h<0}(s.startAt,ri(s),r)||s.endAt&&!function(a,l,c){const h=xf(a,l,c);return a.inclusive?h>=0:h>0}(s.endAt,ri(s),r))}(n,t)}function eb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $m(n){return(t,e)=>{let s=!1;for(const r of ri(n)){const i=nb(r,t,e);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function nb(n,t,e){const s=n.field.isKeyField()?rt.comparator(t.key,e.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?ar(c,h):ot()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[e]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ss(this.inner,(e,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return Am(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Ot(rt.comparator);function An(){return sb}const Fm=new Ot(rt.comparator);function Gr(...n){let t=Fm;for(const e of n)t=t.insert(e.key,e);return t}function Um(n){let t=Fm;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function _s(){return ii()}function Bm(){return ii()}function ii(){return new Ps(n=>n.toString(),(n,t)=>n.isEqual(t))}const rb=new Ot(rt.comparator),ib=new Bt(rt.comparator);function mt(...n){let t=ib;for(const e of n)t=t.add(e);return t}const ob=new Bt(gt);function ab(){return ob}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jo(t)?"-0":t}}function jm(n){return{integerValue:""+n}}function lb(n,t){return xA(t)?jm(t):Qc(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this._=void 0}}function cb(n,t,e){return n instanceof zo?function(r,i){const a={fields:{[Im]:{stringValue:wm},[Cm]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Kc(i)&&(i=ya(i)),i&&(a.fields[Sm]=i),{mapValue:a}}(e,t):n instanceof vi?Km(n,t):n instanceof Ti?qm(n,t):function(r,i){const a=Hm(r,i),l=$f(a)+$f(r.Ie);return ec(a)&&ec(r.Ie)?jm(l):Qc(r.serializer,l)}(n,t)}function ub(n,t,e){return n instanceof vi?Km(n,t):n instanceof Ti?qm(n,t):e}function Hm(n,t){return n instanceof Go?function(s){return ec(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class zo extends Aa{}class vi extends Aa{constructor(t){super(),this.elements=t}}function Km(n,t){const e=Wm(t);for(const s of n.elements)e.some(r=>an(r,s))||e.push(s);return{arrayValue:{values:e}}}class Ti extends Aa{constructor(t){super(),this.elements=t}}function qm(n,t){let e=Wm(t);for(const s of n.elements)e=e.filter(r=>!an(r,s));return{arrayValue:{values:e}}}class Go extends Aa{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function $f(n){return Lt(n.integerValue||n.doubleValue)}function Wm(n){return qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function hb(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof vi&&r instanceof vi||s instanceof Ti&&r instanceof Ti?or(s.elements,r.elements,an):s instanceof Go&&r instanceof Go?an(s.Ie,r.Ie):s instanceof zo&&r instanceof zo}(n.transform,t.transform)}class fb{constructor(t,e){this.version=t,this.transformResults=e}}class Ke{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ke}static exists(t){return new Ke(void 0,t)}static updateTime(t){return new Ke(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ao(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ba{}function zm(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Yc(n.key,Ke.none()):new Si(n.key,n.data,Ke.none());{const e=n.data,s=ge.empty();let r=new Bt(zt.comparator);for(let i of t.fields)if(!r.has(i)){let a=e.field(i);a===null&&i.length>1&&(i=i.popLast(),a=e.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new rs(n.key,s,new Ie(r.toArray()),Ke.none())}}function db(n,t,e){n instanceof Si?function(r,i,a){const l=r.value.clone(),c=Uf(r.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof rs?function(r,i,a){if(!Ao(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Uf(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Gm(r)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function oi(n,t,e,s){return n instanceof Si?function(i,a,l,c){if(!Ao(i.precondition,a))return l;const h=i.value.clone(),d=Bf(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,s):n instanceof rs?function(i,a,l,c){if(!Ao(i.precondition,a))return l;const h=Bf(i.fieldTransforms,c,a),d=a.data;return d.setAll(Gm(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(n,t,e,s):function(i,a,l){return Ao(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function pb(n,t){let e=null;for(const s of n.fieldTransforms){const r=t.data.field(s.field),i=Hm(s.transform,r||null);i!=null&&(e===null&&(e=ge.empty()),e.set(s.field,i))}return e||null}function Ff(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&or(s,r,(i,a)=>hb(i,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class Si extends ba{constructor(t,e,s,r=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rs extends ba{constructor(t,e,s,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gm(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function Uf(n,t,e){const s=new Map;bt(n.length===e.length);for(let r=0;r<e.length;r++){const i=n[r],a=i.transform,l=t.data.field(i.field);s.set(i.field,ub(a,l,e[r]))}return s}function Bf(n,t,e){const s=new Map;for(const r of n){const i=r.transform,a=e.data.field(r.field);s.set(r.field,cb(i,a,t))}return s}class Yc extends ba{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mb extends ba{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(t,e,s,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&db(i,t,s[r])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=oi(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=oi(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Bm();return this.mutations.forEach(r=>{const i=t.get(r.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=e.has(r.key)?null:l;const c=zm(a,l);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(ct.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),mt())}isEqual(t){return this.batchId===t.batchId&&or(this.mutations,t.mutations,(e,s)=>Ff(e,s))&&or(this.baseMutations,t.baseMutations,(e,s)=>Ff(e,s))}}class Xc{constructor(t,e,s,r){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=r}static from(t,e,s){bt(t.mutations.length===s.length);let r=function(){return rb}();const i=t.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new Xc(t,e,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,_t;function Eb(n){switch(n){case M.OK:return ot();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ot()}}function Qm(n){if(n===void 0)return Tn("GRPC error has no .code"),M.UNKNOWN;switch(n){case Mt.OK:return M.OK;case Mt.CANCELLED:return M.CANCELLED;case Mt.UNKNOWN:return M.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return M.INTERNAL;case Mt.UNAVAILABLE:return M.UNAVAILABLE;case Mt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Mt.NOT_FOUND:return M.NOT_FOUND;case Mt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Mt.ABORTED:return M.ABORTED;case Mt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Mt.DATA_LOSS:return M.DATA_LOSS;default:return ot()}}(_t=Mt||(Mt={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=new jn([4294967295,4294967295],0);function jf(n){const t=vb().encode(n),e=new dm;return e.update(t),new Uint8Array(e.digest())}function Hf(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new jn([e,s],0),new jn([r,i],0)]}class Jc{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new Qr(`Invalid padding: ${e}`);if(s<0)throw new Qr(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Qr(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new Qr(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=jn.fromNumber(this.Ee)}Ae(t,e,s){let r=t.add(e.multiply(jn.fromNumber(s)));return r.compare(Tb)===1&&(r=new jn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=jf(t),[s,r]=Hf(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);if(!this.Re(a))return!1}return!0}static create(t,e,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Jc(i,r,e);return s.forEach(l=>a.insert(l)),a}insert(t){if(this.Ee===0)return;const e=jf(t),[s,r]=Hf(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);this.Ve(a)}}Ve(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class Qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(t,e,s,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const r=new Map;return r.set(t,Ci.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new wa(ct.min(),r,new Ot(gt),An(),mt())}}class Ci{constructor(t,e,s,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Ci(s,e,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(t,e,s,r){this.me=t,this.removedTargetIds=e,this.key=s,this.fe=r}}class Ym{constructor(t,e){this.targetId=t,this.ge=e}}class Xm{constructor(t,e,s=Gt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=r}}class Kf{constructor(){this.pe=0,this.ye=qf(),this.we=Gt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=mt(),e=mt(),s=mt();return this.ye.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:s=s.add(r);break;default:ot()}}),new Ci(this.we,this.be,t,e,s)}Me(){this.Se=!1,this.ye=qf()}xe(t,e){this.Se=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,bt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Ab{constructor(t){this.ke=t,this.qe=new Map,this.Qe=An(),this.$e=so(),this.Ke=so(),this.Ue=new Ot(gt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const s=this.He(e);switch(t.state){case 0:this.Je(e)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(e);break;case 3:this.Je(e)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),s.Ce(t.resumeToken));break;default:ot()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((s,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,s=t.ge.count,r=this.Xe(e);if(r){const i=r.target;if(sc(i))if(s===0){const a=new rt(i.path);this.ze(e,a,ie.newNoDocument(a,ct.min()))}else bt(s===1);else{const a=this.et(e);if(a!==s){const l=this.tt(t),c=l?this.nt(l,t,a):1;if(c!==0){this.Ye(e);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,h)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=e;let a,l;try{a=Gn(s).toUint8Array()}catch(c){if(c instanceof bm)return ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Jc(a,r,i)}catch(c){return ir(c instanceof Qr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(t,e,s){return e.ge.count===s-this.st(t,e.targetId)?0:2}st(t,e){const s=this.ke.getRemoteKeysForTarget(e);let r=0;return s.forEach(i=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.ze(e,i,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((i,a)=>{const l=this.Xe(a);if(l){if(i.current&&sc(l.target)){const c=new rt(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,ie.newNoDocument(c,t))}i.ve&&(e.set(a,i.Fe()),i.Me())}});let s=mt();this.Ke.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.Qe.forEach((i,a)=>a.setReadTime(t));const r=new wa(t,e,this.Ue,this.Qe,s);return this.Qe=An(),this.$e=so(),this.Ke=so(),this.Ue=new Ot(gt),r}Ge(t,e){if(!this.Je(t))return;const s=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,s),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),s&&(this.Qe=this.Qe.insert(e,s))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new Kf,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new Bt(gt),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Bt(gt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||Q("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new Kf),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function so(){return new Ot(rt.comparator)}function qf(){return new Ot(rt.comparator)}const bb={asc:"ASCENDING",desc:"DESCENDING"},wb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ib={and:"AND",or:"OR"};class Sb{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ic(n,t){return n.useProto3Json||_a(t)?t:{value:t}}function Qo(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jm(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function Cb(n,t){return Qo(n,t.toTimestamp())}function en(n){return bt(!!n),ct.fromTimestamp(function(e){const s=zn(e);return new Ut(s.seconds,s.nanos)}(n))}function Zc(n,t){return oc(n,t).canonicalString()}function oc(n,t){const e=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function Zm(n){const t=Nt.fromString(n);return bt(rg(t)),t}function ac(n,t){return Zc(n.databaseId,t.path)}function _l(n,t){const e=Zm(t);if(e.get(1)!==n.databaseId.projectId)throw new Z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new rt(eg(e))}function tg(n,t){return Zc(n.databaseId,t)}function Rb(n){const t=Zm(n);return t.length===4?Nt.emptyPath():eg(t)}function lc(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eg(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Wf(n,t,e){return{name:ac(n,t),fields:e.value.mapValue.fields}}function Pb(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ot()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(bt(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(bt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?M.UNKNOWN:Qm(h.code);return new Z(d,h.message||"")}(a);e=new Xm(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=_l(n,s.document.name),i=en(s.document.updateTime),a=s.document.createTime?en(s.document.createTime):ct.min(),l=new ge({mapValue:{fields:s.document.fields}}),c=ie.newFoundDocument(r,i,a,l),h=s.targetIds||[],d=s.removedTargetIds||[];e=new bo(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=_l(n,s.document),i=s.readTime?en(s.readTime):ct.min(),a=ie.newNoDocument(r,i),l=s.removedTargetIds||[];e=new bo([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=_l(n,s.document),i=s.removedTargetIds||[];e=new bo([],i,r,null)}else{if(!("filter"in t))return ot();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new yb(r,i),l=s.targetId;e=new Ym(l,a)}}return e}function Db(n,t){let e;if(t instanceof Si)e={update:Wf(n,t.key,t.value)};else if(t instanceof Yc)e={delete:ac(n,t.key)};else if(t instanceof rs)e={update:Wf(n,t.key,t.data),updateMask:Fb(t.fieldMask)};else{if(!(t instanceof mb))return ot();e={verify:ac(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof zo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ti)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Go)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw ot()}(0,s))),t.precondition.isNone||(e.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:Cb(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ot()}(n,t.precondition)),e}function Nb(n,t){return n&&n.length>0?(bt(t!==void 0),n.map(e=>function(r,i){let a=r.updateTime?en(r.updateTime):en(i);return a.isEqual(ct.min())&&(a=en(i)),new fb(a,r.transformResults||[])}(e,t))):[]}function Ob(n,t){return{documents:[tg(n,t.path)]}}function Vb(n,t){const e={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=tg(n,r);const i=function(h){if(h.length!==0)return sg(ln.create(h,"and"))}(t.filters);i&&(e.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Ks(g.field),direction:Mb(g.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const l=ic(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:e,parent:r}}function xb(n){let t=Rb(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let r=null;if(s>0){bt(s===1);const d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let i=[];e.where&&(i=function(m){const g=ng(m);return g instanceof ln&&Vm(g)?g.getFilters():[g]}(e.where));let a=[];e.orderBy&&(a=function(m){return m.map(g=>function(D){return new Wo(qs(D.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(g))}(e.orderBy));let l=null;e.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,_a(g)?null:g}(e.limit));let c=null;e.startAt&&(c=function(m){const g=!!m.before,T=m.values||[];return new qo(T,g)}(e.startAt));let h=null;return e.endAt&&(h=function(m){const g=!m.before,T=m.values||[];return new qo(T,g)}(e.endAt)),JA(t,r,a,i,l,"F",c,h)}function Lb(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function ng(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=qs(e.unaryFilter.field);return Ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=qs(e.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qs(e.unaryFilter.field);return Ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qs(e.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):n.fieldFilter!==void 0?function(e){return Ft.create(qs(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ln.create(e.compositeFilter.filters.map(s=>ng(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(n):ot()}function Mb(n){return bb[n]}function kb(n){return wb[n]}function $b(n){return Ib[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function qs(n){return zt.fromServerFormat(n.fieldPath)}function sg(n){return n instanceof Ft?function(e){if(e.op==="=="){if(Vf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NAN"}};if(Of(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Vf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NOT_NAN"}};if(Of(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(e.field),op:kb(e.op),value:e.value}}}(n):n instanceof ln?function(e){const s=e.getFilters().map(r=>sg(r));return s.length===1?s[0]:{compositeFilter:{op:$b(e.op),filters:s}}}(n):ot()}function Fb(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function rg(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,e,s,r,i=ct.min(),a=ct.min(),l=Gt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new $n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new $n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(t){this.Tt=t}}function Bb(n){const t=xb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.Tn=new Hb}addToCollectionParentIndex(t,e){return this.Tn.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(Wn.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(Wn.min())}updateCollectionGroup(t,e,s){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}}class Hb{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e]||new Bt(Nt.comparator),i=!r.has(s);return this.index[e]=r.add(s),i}has(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Bt(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ig=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(ig,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new cr(0)}static Un(){return new cr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="LruGarbageCollector",Kb=1048576;function Qf([n,t],[e,s]){const r=gt(n,e);return r===0?gt(t,s):r}class qb{constructor(t){this.Hn=t,this.buffer=new Bt(Qf),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Qf(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Wb{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Q(Gf,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ar(e)?Q(Gf,"Ignoring IndexedDB error during garbage collection: ",e):await Tr(e)}await this.er(3e5)})}}class zb{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return V.resolve(ga.ae);const s=new qb(e);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.tr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(zf)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zf):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let s,r,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),r=this.params.maximumSequenceNumbersToCollect):r=m,a=Date.now(),this.nthSequenceNumber(t,r))).next(m=>(s=m,l=Date.now(),this.removeTargets(t,s,e))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(m=>(h=Date.now(),js()<=yt.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:m})))}}function Gb(n,t){return new zb(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(){this.changes=new Ps(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?V.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,e,s,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(s!==null&&oi(s.mutation,r,Ie.empty(),Ut.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,mt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=mt()){const r=_s();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,s).next(i=>{let a=Gr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const s=_s();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,mt()))}populateOverlays(t,e,s){const r=[];return s.forEach(i=>{e.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,s,r){let i=An();const a=ii(),l=function(){return ii()}();return e.forEach((c,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof rs)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),oi(d.mutation,h,d.mutation.getFieldMask(),Ut.now())):a.set(h.key,Ie.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>{var m;return l.set(h,new Yb(d,(m=a.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(t,e){const s=ii();let r=new Ot((a,l)=>a-l),i=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=e.get(c);if(h===null)return;let d=s.get(c)||Ie.empty();d=l.applyToLocalView(h,d),s.set(c,d);const m=(r.get(l.batchId)||mt()).add(c);r=r.insert(l.batchId,m)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,m=Bm();d.forEach(g=>{if(!i.has(g)){const T=zm(e.get(g),s.get(g));T!==null&&m.set(g,T),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,m))}return V.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,r){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ZA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,r):this.getDocumentsMatchingCollectionQuery(t,e,s,r)}getNextDocuments(t,e,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,r-i.size):V.resolve(_s());let l=gi,c=i;return a.next(h=>V.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,c,h,mt())).next(d=>({batchId:l,changes:Um(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(s=>{let r=Gr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,s,r){const i=e.collectionGroup;let a=Gr();return this.indexManager.getCollectionParents(t,i).next(l=>V.forEach(l,c=>{const h=function(m,g){return new Ea(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(e,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,s,r).next(d=>{d.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,i,r))).next(a=>{i.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))});let l=Gr();return a.forEach((c,h)=>{const d=i.get(c);d!==void 0&&oi(d.mutation,h,Ie.empty(),Ut.now()),Ta(e,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return V.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:en(r.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:Bb(r.bundledQuery),readTime:en(r.readTime)}}(e)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this.overlays=new Ot(rt.comparator),this.Rr=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){const s=_s();return V.forEach(e,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((r,i)=>{this.Et(t,e,i)}),V.resolve()}removeOverlaysForBatchId(t,e,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(s)),V.resolve()}getOverlaysForCollection(t,e,s){const r=_s(),i=e.length+1,a=new rt(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return V.resolve(r)}getOverlaysForCollectionGroup(t,e,s,r){let i=new Ot((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=_s(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=_s(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return V.resolve(l)}Et(t,e,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new _b(e,s));let i=this.Rr.get(e);i===void 0&&(i=mt(),this.Rr.set(e,i)),this.Rr.set(e,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.Vr=new Bt(jt.mr),this.gr=new Bt(jt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const s=new jt(t,e);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.wr(new jt(t,e))}br(t,e){t.forEach(s=>this.removeReference(s,e))}Sr(t){const e=new rt(new Nt([])),s=new jt(e,t),r=new jt(e,t+1),i=[];return this.gr.forEachInRange([s,r],a=>{this.wr(a),i.push(a.key)}),i}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new rt(new Nt([])),s=new jt(e,t),r=new jt(e,t+1);let i=mt();return this.gr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(t){const e=new jt(t,0),s=this.Vr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class jt{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return rt.comparator(t.key,e.key)||gt(t.Cr,e.Cr)}static pr(t,e){return gt(t.Cr,e.Cr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Bt(jt.mr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new gb(i,e,s,r);this.mutationQueue.push(a);for(const l of r)this.Mr=this.Mr.add(new jt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,e){return V.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,r=this.Nr(s),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Hc:this.Fr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new jt(e,0),r=new jt(e,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([s,r],a=>{const l=this.Or(a.Cr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Bt(gt);return e.forEach(r=>{const i=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],l=>{s=s.add(l.Cr)})}),V.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,r=s.length+1;let i=s;rt.isDocumentKey(i)||(i=i.child(""));const a=new jt(new rt(i),0);let l=new Bt(gt);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Cr)),!0)},a),V.resolve(this.Br(l))}Br(t){const e=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){bt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return V.forEach(e.mutations,r=>{const i=new jt(r.key,e.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,e){const s=new jt(e,0),r=this.Mr.firstAfterOrEqual(s);return V.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(t){this.kr=t,this.docs=function(){return new Ot(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,r=this.docs.get(s),i=r?r.size:0,a=this.kr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return V.resolve(s?s.document.mutableCopy():ie.newInvalidDocument(e))}getEntries(t,e){let s=An();return e.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():ie.newInvalidDocument(r))}),V.resolve(s)}getDocumentsMatchingQuery(t,e,s,r){let i=An();const a=e.path,l=new rt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||DA(PA(d),s)<=0||(r.has(d.key)||Ta(e,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,e,s,r){ot()}qr(t,e){return V.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new sw(this)}getSize(t){return V.resolve(this.size)}}class sw extends Qb{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),V.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(t){this.persistence=t,this.Qr=new Ps(e=>Wc(e),zc),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.$r=0,this.Kr=new tu,this.targetCount=0,this.Ur=cr.Kn()}forEachTarget(t,e){return this.Qr.forEach((s,r)=>e(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.$r&&(this.$r=e),V.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new cr(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.zn(e),V.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.Sr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,s){let r=0;const i=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=e&&s.get(l.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),V.waitFor(i).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){const s=this.Qr.get(e)||null;return V.resolve(s)}addMatchingKeys(t,e,s){return this.Kr.yr(e,s),V.resolve()}removeMatchingKeys(t,e,s){this.Kr.br(e,s);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(a=>{i.push(r.markPotentiallyOrphaned(t,a))}),V.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Kr.Sr(e),V.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Kr.vr(e);return V.resolve(s)}containsKey(t,e){return V.resolve(this.Kr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new ga(0),this.zr=!1,this.zr=!0,this.jr=new tw,this.referenceDelegate=t(this),this.Hr=new rw(this),this.indexManager=new jb,this.remoteDocumentCache=function(r){return new nw(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new Ub(e),this.Yr=new Jb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Zb,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.Wr[t.toKey()];return s||(s=new ew(e,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,s){Q("MemoryPersistence","Starting transaction:",t);const r=new iw(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(i=>this.referenceDelegate.Xr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}ei(t,e){return V.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,e)))}}class iw extends OA{constructor(t){super(),this.currentSequenceNumber=t}}class eu{constructor(t){this.persistence=t,this.ti=new tu,this.ni=null}static ri(t){return new eu(t)}get ii(){if(this.ni)return this.ni;throw ot()}addReference(t,e,s){return this.ti.addReference(s,e),this.ii.delete(s.toString()),V.resolve()}removeReference(t,e,s){return this.ti.removeReference(s,e),this.ii.add(s.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),V.resolve()}removeTarget(t,e){this.ti.Sr(e.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(i=>this.ii.add(i.toString()))}).next(()=>s.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,s=>{const r=rt.fromPath(s);return this.si(t,r).next(i=>{i||e.removeEntry(r,ct.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(s=>{s?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return V.or([()=>V.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Yo{constructor(t,e){this.persistence=t,this.oi=new Ps(s=>LA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Gb(this,e)}static ri(t,e){return new Yo(t,e)}Zr(){}Xr(t){return V.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(r=>s+r))}sr(t){let e=0;return this.rr(t,s=>{e++}).next(()=>e)}rr(t,e){return V.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(i=>i?V.resolve():e(r)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(t,a=>this.ar(t,a,e).next(l=>{l||(s++,i.removeEntry(a,ct.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}removeReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=vo(t.data.value)),e}ar(t,e,s){return V.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return V.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,e,s,r){this.targetId=t,this.fromCache=e,this.Hi=s,this.Ji=r}static Yi(t,e){let s=mt(),r=mt();for(const i of e.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new nu(t,e.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return tT()?8:VA(Jv())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,s,r){const i={result:null};return this.rs(t,e).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ss(t,e,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new ow;return this._s(t,e,a).next(l=>{if(i.result=l,this.Xi)return this.us(t,e,a,l.size)})}).next(()=>i.result)}us(t,e,s,r){return s.documentReadCount<this.es?(js()<=yt.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Hs(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(js()<=yt.DEBUG&&Q("QueryEngine","Query:",Hs(e),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(js()<=yt.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Hs(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,tn(e))):V.resolve())}rs(t,e){if(kf(e))return V.resolve(null);let s=tn(e);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=rc(e,null,"F"),s=tn(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const a=mt(...i);return this.ns.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const h=this.cs(e,l);return this.ls(e,h,a,c.readTime)?this.rs(t,rc(e,null,"F")):this.hs(t,h,e,c)}))})))}ss(t,e,s,r){return kf(e)||r.isEqual(ct.min())?V.resolve(null):this.ns.getDocuments(t,s).next(i=>{const a=this.cs(e,i);return this.ls(e,a,s,r)?V.resolve(null):(js()<=yt.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hs(e)),this.hs(t,a,e,RA(r,gi)).next(l=>l))})}cs(t,e){let s=new Bt($m(t));return e.forEach((r,i)=>{Ta(t,i)&&(s=s.add(i))}),s}ls(t,e,s,r){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const i=t.limitType==="F"?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(t,e,s){return js()<=yt.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Hs(e)),this.ns.getDocumentsMatchingQuery(t,e,Wn.min(),s)}hs(t,e,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(i=>(e.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="LocalStore",lw=3e8;class cw{constructor(t,e,s,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new Ot(gt),this.Is=new Ps(i=>Wc(i),zc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Xb(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function uw(n,t,e,s){return new cw(n,t,e,s)}async function ag(n,t){const e=ut(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let r;return e.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,e.As(t),e.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let c=mt();for(const h of r){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(s,c).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function hw(n,t){const e=ut(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=e.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const m=h.batch,g=m.keys();let T=V.resolve();return g.forEach(D=>{T=T.next(()=>d.getEntry(c,D)).next(N=>{const O=h.docVersions.get(D);bt(O!==null),N.version.compareTo(O)<0&&(m.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),d.addEntry(N)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(e,s,t,i).next(()=>i.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=mt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>e.localDocuments.getDocuments(s,r))})}function lg(n){const t=ut(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function fw(n,t){const e=ut(n),s=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const l=[];t.targetChanges.forEach((d,m)=>{const g=r.get(m);if(!g)return;l.push(e.Hr.removeMatchingKeys(i,d.removedDocuments,m).next(()=>e.Hr.addMatchingKeys(i,d.addedDocuments,m)));let T=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):d.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(d.resumeToken,s)),r=r.insert(m,T),function(N,O,H){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=lw?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(g,T,d)&&l.push(e.Hr.updateTargetData(i,T))});let c=An(),h=mt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(dw(i,a,t.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!s.isEqual(ct.min())){const d=e.Hr.getLastRemoteSnapshotVersion(i).next(m=>e.Hr.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return V.waitFor(l).next(()=>a.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(e.Ts=r,i))}function dw(n,t,e){let s=mt(),r=mt();return e.forEach(i=>s=s.add(i)),t.getEntries(n,s).next(i=>{let a=An();return e.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ct.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Q(su,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Vs:a,fs:r}})}function pw(n,t){const e=ut(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Hc),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function mw(n,t){const e=ut(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return e.Hr.getTargetData(s,t).next(i=>i?(r=i,V.resolve(r)):e.Hr.allocateTargetId(s).next(a=>(r=new $n(t,a,"TargetPurposeListen",s.currentSequenceNumber),e.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=e.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(s.targetId,s),e.Is.set(t,s.targetId)),s})}async function cc(n,t,e){const s=ut(n),r=s.Ts.get(t),i=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ar(a))throw a;Q(su,`Failed to update sequence numbers for target ${t}: ${a}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function Yf(n,t,e){const s=ut(n);let r=ct.min(),i=mt();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const m=ut(c),g=m.Is.get(d);return g!==void 0?V.resolve(m.Ts.get(g)):m.Hr.getTargetData(h,d)}(s,a,tn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>s.Ps.getDocumentsMatchingQuery(a,t,e?r:ct.min(),e?i:mt())).next(l=>(gw(s,eb(t),l),{documents:l,gs:i})))}function gw(n,t,e){let s=n.Es.get(t)||ct.min();e.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),n.Es.set(t,s)}class Xf{constructor(){this.activeTargetIds=ab()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class _w{constructor(){this.ho=new Xf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,s){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Xf,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="ConnectivityMonitor";class Zf{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Q(Jf,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Q(Jf,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ro=null;function uc(){return ro===null?ro=function(){return 268435456+Math.round(2147483648*Math.random())}():ro++,"0x"+ro.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="RestConnection",Ew={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vw{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===Ho?`project_id=${s}`:`project_id=${s}&database_id=${r}`}bo(t,e,s,r,i){const a=uc(),l=this.So(t,e.toUriEncodedString());Q(yl,`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,r,i),this.vo(t,l,c,s).then(h=>(Q(yl,`Received RPC '${t}' ${a}: `,h),h),h=>{throw ir(yl,`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Co(t,e,s,r,i,a){return this.bo(t,e,s,r,i)}Do(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}So(t,e){const s=Ew[t];return`${this.po}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class Aw extends vw{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,s,r){const i=uc();return new Promise((a,l)=>{const c=new pm;c.setWithCredentials(!0),c.listenOnce(mm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Eo.NO_ERROR:const d=c.getResponseJson();Q(ee,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(d)),a(d);break;case Eo.TIMEOUT:Q(ee,`RPC '${t}' ${i} timed out`),l(new Z(M.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:const m=c.getStatus();if(Q(ee,`RPC '${t}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const D=function(O){const H=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(T.status);l(new Z(D,T.message))}else l(new Z(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new Z(M.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Q(ee,`RPC '${t}' ${i} completed.`)}});const h=JSON.stringify(r);Q(ee,`RPC '${t}' ${i} sending request:`,r),c.send(e,"POST",h,s,15)})}Wo(t,e,s){const r=uc(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=ym(),l=_m(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,e,s),c.encodeInitMessageHeaders=!0;const d=i.join("");Q(ee,`Creating RPC '${t}' stream ${r}: ${d}`,c);const m=a.createWebChannel(d,c);let g=!1,T=!1;const D=new Tw({Fo:O=>{T?Q(ee,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(g||(Q(ee,`Opening RPC '${t}' stream ${r} transport.`),m.open(),g=!0),Q(ee,`RPC '${t}' stream ${r} sending:`,O),m.send(O))},Mo:()=>m.close()}),N=(O,H,z)=>{O.listen(H,G=>{try{z(G)}catch(L){setTimeout(()=>{throw L},0)}})};return N(m,zr.EventType.OPEN,()=>{T||(Q(ee,`RPC '${t}' stream ${r} transport opened.`),D.Qo())}),N(m,zr.EventType.CLOSE,()=>{T||(T=!0,Q(ee,`RPC '${t}' stream ${r} transport closed`),D.Ko())}),N(m,zr.EventType.ERROR,O=>{T||(T=!0,ir(ee,`RPC '${t}' stream ${r} transport errored:`,O),D.Ko(new Z(M.UNAVAILABLE,"The operation could not be completed")))}),N(m,zr.EventType.MESSAGE,O=>{var H;if(!T){const z=O.data[0];bt(!!z);const G=z,L=(G==null?void 0:G.error)||((H=G[0])===null||H===void 0?void 0:H.error);if(L){Q(ee,`RPC '${t}' stream ${r} received error:`,L);const J=L.status;let tt=function(E){const A=Mt[E];if(A!==void 0)return Qm(A)}(J),b=L.message;tt===void 0&&(tt=M.INTERNAL,b="Unknown error status: "+J+" with message "+L.message),T=!0,D.Ko(new Z(tt,b)),m.close()}else Q(ee,`RPC '${t}' stream ${r} received:`,z),D.Uo(z)}}),N(l,gm.STAT_EVENT,O=>{O.stat===Zl.PROXY?Q(ee,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===Zl.NOPROXY&&Q(ee,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.$o()},0),D}}function El(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ia(n){return new Sb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(t,e,s=1e3,r=1.5,i=6e4){this.Ti=t,this.timerId=e,this.Go=s,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-s);r>0&&Q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="PersistentStream";class ug{constructor(t,e,s,r,i,a,l,c){this.Ti=t,this.n_=s,this.r_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new cg(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(Tn(e.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===e&&this.V_(s,r)},s=>{t(()=>{const r=new Z(M.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,e){const s=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Q(td,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(Q(td,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bw extends ug{constructor(t,e,s,r,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,r,a),this.serializer=i}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=Pb(this.serializer,t),s=function(i){if(!("targetChange"in i))return ct.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ct.min():a.readTime?en(a.readTime):ct.min()}(t);return this.listener.p_(e,s)}y_(t){const e={};e.database=lc(this.serializer),e.addTarget=function(i,a){let l;const c=a.target;if(l=sc(c)?{documents:Ob(i,c)}:{query:Vb(i,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Jm(i,a.resumeToken);const h=ic(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(ct.min())>0){l.readTime=Qo(i,a.snapshotVersion.toTimestamp());const h=ic(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const s=Lb(this.serializer,t);s&&(e.labels=s),this.I_(e)}w_(t){const e={};e.database=lc(this.serializer),e.removeTarget=t,this.I_(e)}}class ww extends ug{constructor(t,e,s,r,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,r,a),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return bt(!!t.streamToken),this.lastStreamToken=t.streamToken,bt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){bt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=Nb(t.writeResults,t.commitTime),s=en(t.commitTime);return this.listener.v_(s,e)}C_(){const t={};t.database=lc(this.serializer),this.I_(t)}S_(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>Db(this.serializer,s))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{}class Sw extends Iw{constructor(t,e,s,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new Z(M.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.bo(t,oc(e,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(M.UNKNOWN,i.toString())})}Co(t,e,s,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(t,oc(e,s),r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(M.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Cw{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Tn(e),this.N_=!1):Q("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="RemoteStore";class Rw{constructor(t,e,s,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(a=>{s.enqueueAndForget(async()=>{Ds(this)&&(Q(Is,"Restarting streams for network reachability change."),await async function(c){const h=ut(c);h.W_.add(4),await Ri(h),h.j_.set("Unknown"),h.W_.delete(4),await Sa(h)}(this))})}),this.j_=new Cw(s,r)}}async function Sa(n){if(Ds(n))for(const t of n.G_)await t(!0)}async function Ri(n){for(const t of n.G_)await t(!1)}function hg(n,t){const e=ut(n);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),au(e)?ou(e):br(e).c_()&&iu(e,t))}function ru(n,t){const e=ut(n),s=br(e);e.U_.delete(t),s.c_()&&fg(e,t),e.U_.size===0&&(s.c_()?s.P_():Ds(e)&&e.j_.set("Unknown"))}function iu(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ct.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}br(n).y_(t)}function fg(n,t){n.H_.Ne(t),br(n).w_(t)}function ou(n){n.H_=new Ab({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.U_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),br(n).start(),n.j_.B_()}function au(n){return Ds(n)&&!br(n).u_()&&n.U_.size>0}function Ds(n){return ut(n).W_.size===0}function dg(n){n.H_=void 0}async function Pw(n){n.j_.set("Online")}async function Dw(n){n.U_.forEach((t,e)=>{iu(n,t)})}async function Nw(n,t){dg(n),au(n)?(n.j_.q_(t),ou(n)):n.j_.set("Unknown")}async function Ow(n,t,e){if(n.j_.set("Online"),t instanceof Xm&&t.state===2&&t.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.U_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.U_.delete(l),r.H_.removeTarget(l))}(n,t)}catch(s){Q(Is,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Xo(n,s)}else if(t instanceof bo?n.H_.We(t):t instanceof Ym?n.H_.Ze(t):n.H_.je(t),!e.isEqual(ct.min()))try{const s=await lg(n.localStore);e.compareTo(s)>=0&&await function(i,a){const l=i.H_.ot(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.U_.get(h);d&&i.U_.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=i.U_.get(c);if(!d)return;i.U_.set(c,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),fg(i,c);const m=new $n(d.target,c,h,d.sequenceNumber);iu(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(s){Q(Is,"Failed to raise snapshot:",s),await Xo(n,s)}}async function Xo(n,t,e){if(!Ar(t))throw t;n.W_.add(1),await Ri(n),n.j_.set("Offline"),e||(e=()=>lg(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Q(Is,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Sa(n)})}function pg(n,t){return t().catch(e=>Xo(n,e,t))}async function Ca(n){const t=ut(n),e=Yn(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:Hc;for(;Vw(t);)try{const r=await pw(t.localStore,s);if(r===null){t.K_.length===0&&e.P_();break}s=r.batchId,xw(t,r)}catch(r){await Xo(t,r)}mg(t)&&gg(t)}function Vw(n){return Ds(n)&&n.K_.length<10}function xw(n,t){n.K_.push(t);const e=Yn(n);e.c_()&&e.b_&&e.S_(t.mutations)}function mg(n){return Ds(n)&&!Yn(n).u_()&&n.K_.length>0}function gg(n){Yn(n).start()}async function Lw(n){Yn(n).C_()}async function Mw(n){const t=Yn(n);for(const e of n.K_)t.S_(e.mutations)}async function kw(n,t,e){const s=n.K_.shift(),r=Xc.from(s,t,e);await pg(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await Ca(n)}async function $w(n,t){t&&Yn(n).b_&&await async function(s,r){if(function(a){return Eb(a)&&a!==M.ABORTED}(r.code)){const i=s.K_.shift();Yn(s).h_(),await pg(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ca(s)}}(n,t),mg(n)&&gg(n)}async function ed(n,t){const e=ut(n);e.asyncQueue.verifyOperationInProgress(),Q(Is,"RemoteStore received new credentials");const s=Ds(e);e.W_.add(3),await Ri(e),s&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Sa(e)}async function Fw(n,t){const e=ut(n);t?(e.W_.delete(2),await Sa(e)):t||(e.W_.add(2),await Ri(e),e.j_.set("Unknown"))}function br(n){return n.J_||(n.J_=function(e,s,r){const i=ut(e);return i.M_(),new bw(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{xo:Pw.bind(null,n),No:Dw.bind(null,n),Lo:Nw.bind(null,n),p_:Ow.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),au(n)?ou(n):n.j_.set("Unknown")):(await n.J_.stop(),dg(n))})),n.J_}function Yn(n){return n.Y_||(n.Y_=function(e,s,r){const i=ut(e);return i.M_(),new ww(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Lw.bind(null,n),Lo:$w.bind(null,n),D_:Mw.bind(null,n),v_:kw.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await Ca(n)):(await n.Y_.stop(),n.K_.length>0&&(Q(Is,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,e,s,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,r,i){const a=Date.now()+s,l=new lu(t,e,a,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cu(n,t){if(Tn("AsyncQueue",`${t}: ${n}`),Ar(n))return new Z(M.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{static emptySet(t){return new sr(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||rt.comparator(e.key,s.key):(e,s)=>rt.comparator(e.key,s.key),this.keyedMap=Gr(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof sr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new sr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this.Z_=new Ot(rt.comparator)}track(t){const e=t.doc.key,s=this.Z_.get(e);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(e):t.type===1&&s.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ot():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,s)=>{t.push(s)}),t}}class ur{constructor(t,e,s,r,i,a,l,c,h){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,s,r,i){const a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new ur(t,e,sr.emptySet(e),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&va(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==s[r].type||!e[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class Bw{constructor(){this.queries=sd(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,s){const r=ut(e),i=r.queries;r.queries=sd(),i.forEach((a,l)=>{for(const c of l.ta)c.onError(s)})})(this,new Z(M.ABORTED,"Firestore shutting down"))}}function sd(){return new Ps(n=>km(n),va)}async function _g(n,t){const e=ut(n);let s=3;const r=t.query;let i=e.queries.get(r);i?!i.na()&&t.ra()&&(s=2):(i=new Uw,s=t.ra()?0:1);try{switch(s){case 0:i.ea=await e.onListen(r,!0);break;case 1:i.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(a){const l=cu(a,`Initialization of query '${Hs(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,i),i.ta.push(t),t.sa(e.onlineState),i.ea&&t.oa(i.ea)&&uu(e)}async function yg(n,t){const e=ut(n),s=t.query;let r=3;const i=e.queries.get(s);if(i){const a=i.ta.indexOf(t);a>=0&&(i.ta.splice(a,1),i.ta.length===0?r=t.ra()?0:1:!i.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function jw(n,t){const e=ut(n);let s=!1;for(const r of t){const i=r.query,a=e.queries.get(i);if(a){for(const l of a.ta)l.oa(r)&&(s=!0);a.ea=r}}s&&uu(e)}function Hw(n,t,e){const s=ut(n),r=s.queries.get(t);if(r)for(const i of r.ta)i.onError(e);s.queries.delete(t)}function uu(n){n.ia.forEach(t=>{t.next()})}var hc,rd;(rd=hc||(hc={}))._a="default",rd.Cache="cache";class Eg{constructor(t,e,s){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new ur(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const s=e!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==hc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(t){this.key=t}}class Tg{constructor(t){this.key=t}}class Kw{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=mt(),this.mutatedKeys=mt(),this.ya=$m(t),this.wa=new sr(this.ya)}get ba(){return this.fa}Sa(t,e){const s=e?e.Da:new nd,r=e?e.wa:this.wa;let i=e?e.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,m)=>{const g=r.get(d),T=Ta(this.query,m)?m:null,D=!!g&&this.mutatedKeys.has(g.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;g&&T?g.data.isEqual(T.data)?D!==N&&(s.track({type:3,doc:T}),O=!0):this.va(g,T)||(s.track({type:2,doc:T}),O=!0,(c&&this.ya(T,c)>0||h&&this.ya(T,h)<0)&&(l=!0)):!g&&T?(s.track({type:0,doc:T}),O=!0):g&&!T&&(s.track({type:1,doc:g}),O=!0,(c||h)&&(l=!0)),O&&(T?(a=a.add(T),i=N?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{wa:a,Da:s,ls:l,mutatedKeys:i}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,r){const i=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((d,m)=>function(T,D){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return N(T)-N(D)}(d.type,m.type)||this.ya(d.doc,m.doc)),this.Ca(s),r=r!=null&&r;const l=e&&!r?this.Fa():[],c=this.pa.size===0&&this.current&&!r?1:0,h=c!==this.ga;return this.ga=c,a.length!==0||h?{snapshot:new ur(this.query,t.wa,i,a,t.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new nd,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=mt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const e=[];return t.forEach(s=>{this.pa.has(s)||e.push(new Tg(s))}),this.pa.forEach(s=>{t.has(s)||e.push(new vg(s))}),e}Oa(t){this.fa=t.gs,this.pa=mt();const e=this.Sa(t.documents);return this.applyChanges(e,!0)}Na(){return ur.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const hu="SyncEngine";class qw{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class Ww{constructor(t){this.key=t,this.Ba=!1}}class zw{constructor(t,e,s,r,i,a){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Ps(l=>km(l),va),this.qa=new Map,this.Qa=new Set,this.$a=new Ot(rt.comparator),this.Ka=new Map,this.Ua=new tu,this.Wa={},this.Ga=new Map,this.za=cr.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Gw(n,t,e=!0){const s=Cg(n);let r;const i=s.ka.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Na()):r=await Ag(s,t,e,!0),r}async function Qw(n,t){const e=Cg(n);await Ag(e,t,!0,!1)}async function Ag(n,t,e,s){const r=await mw(n.localStore,tn(t)),i=r.targetId,a=n.sharedClientState.addLocalQueryTarget(i,e);let l;return s&&(l=await Yw(n,t,i,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&hg(n.remoteStore,r),l}async function Yw(n,t,e,s,r){n.Ha=(m,g,T)=>async function(N,O,H,z){let G=O.view.Sa(H);G.ls&&(G=await Yf(N.localStore,O.query,!1).then(({documents:b})=>O.view.Sa(b,G)));const L=z&&z.targetChanges.get(O.targetId),J=z&&z.targetMismatches.get(O.targetId)!=null,tt=O.view.applyChanges(G,N.isPrimaryClient,L,J);return od(N,O.targetId,tt.Ma),tt.snapshot}(n,m,g,T);const i=await Yf(n.localStore,t,!0),a=new Kw(t,i.gs),l=a.Sa(i.documents),c=Ci.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",r),h=a.applyChanges(l,n.isPrimaryClient,c);od(n,e,h.Ma);const d=new qw(t,e,a);return n.ka.set(t,d),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),h.snapshot}async function Xw(n,t,e){const s=ut(n),r=s.ka.get(t),i=s.qa.get(r.targetId);if(i.length>1)return s.qa.set(r.targetId,i.filter(a=>!va(a,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await cc(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),e&&ru(s.remoteStore,r.targetId),fc(s,r.targetId)}).catch(Tr)):(fc(s,r.targetId),await cc(s.localStore,r.targetId,!0))}async function Jw(n,t){const e=ut(n),s=e.ka.get(t),r=e.qa.get(s.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),ru(e.remoteStore,s.targetId))}async function Zw(n,t,e){const s=oI(n);try{const r=await function(a,l){const c=ut(a),h=Ut.now(),d=l.reduce((T,D)=>T.add(D.key),mt());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let D=An(),N=mt();return c.ds.getEntries(T,d).next(O=>{D=O,D.forEach((H,z)=>{z.isValidDocument()||(N=N.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,D)).next(O=>{m=O;const H=[];for(const z of l){const G=pb(z,m.get(z.key).overlayedDocument);G!=null&&H.push(new rs(z.key,G,Dm(G.value.mapValue),Ke.exists(!0)))}return c.mutationQueue.addMutationBatch(T,h,H,l)}).next(O=>{g=O;const H=O.applyToLocalDocumentSet(m,N);return c.documentOverlayCache.saveOverlays(T,O.batchId,H)})}).then(()=>({batchId:g.batchId,changes:Um(m)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let h=a.Wa[a.currentUser.toKey()];h||(h=new Ot(gt)),h=h.insert(l,c),a.Wa[a.currentUser.toKey()]=h}(s,r.batchId,e),await Pi(s,r.changes),await Ca(s.remoteStore)}catch(r){const i=cu(r,"Failed to persist write");e.reject(i)}}async function bg(n,t){const e=ut(n);try{const s=await fw(e.localStore,t);t.targetChanges.forEach((r,i)=>{const a=e.Ka.get(i);a&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?bt(a.Ba):r.removedDocuments.size>0&&(bt(a.Ba),a.Ba=!1))}),await Pi(e,s,t)}catch(s){await Tr(s)}}function id(n,t,e){const s=ut(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const r=[];s.ka.forEach((i,a)=>{const l=a.view.sa(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=ut(a);c.onlineState=l;let h=!1;c.queries.forEach((d,m)=>{for(const g of m.ta)g.sa(l)&&(h=!0)}),h&&uu(c)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function tI(n,t,e){const s=ut(n);s.sharedClientState.updateQueryState(t,"rejected",e);const r=s.Ka.get(t),i=r&&r.key;if(i){let a=new Ot(rt.comparator);a=a.insert(i,ie.newNoDocument(i,ct.min()));const l=mt().add(i),c=new wa(ct.min(),new Map,new Ot(gt),a,l);await bg(s,c),s.$a=s.$a.remove(i),s.Ka.delete(t),fu(s)}else await cc(s.localStore,t,!1).then(()=>fc(s,t,e)).catch(Tr)}async function eI(n,t){const e=ut(n),s=t.batch.batchId;try{const r=await hw(e.localStore,t);Ig(e,s,null),wg(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Pi(e,r)}catch(r){await Tr(r)}}async function nI(n,t,e){const s=ut(n);try{const r=await function(a,l){const c=ut(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(m=>(bt(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(h,m))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(s.localStore,t);Ig(s,t,e),wg(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Pi(s,r)}catch(r){await Tr(r)}}function wg(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function Ig(n,t,e){const s=ut(n);let r=s.Wa[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(e?i.reject(e):i.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function fc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.qa.get(t))n.ka.delete(s),e&&n.La.Ja(s,e);n.qa.delete(t),n.isPrimaryClient&&n.Ua.Sr(t).forEach(s=>{n.Ua.containsKey(s)||Sg(n,s)})}function Sg(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(ru(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ka.delete(e),fu(n))}function od(n,t,e){for(const s of e)s instanceof vg?(n.Ua.addReference(s.key,t),sI(n,s)):s instanceof Tg?(Q(hu,"Document no longer in limbo: "+s.key),n.Ua.removeReference(s.key,t),n.Ua.containsKey(s.key)||Sg(n,s.key)):ot()}function sI(n,t){const e=t.key,s=e.path.canonicalString();n.$a.get(e)||n.Qa.has(s)||(Q(hu,"New document in limbo: "+e),n.Qa.add(s),fu(n))}function fu(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new rt(Nt.fromString(t)),s=n.za.next();n.Ka.set(s,new Ww(e)),n.$a=n.$a.insert(e,s),hg(n.remoteStore,new $n(tn(Gc(e.path)),s,"TargetPurposeLimboResolution",ga.ae))}}async function Pi(n,t,e){const s=ut(n),r=[],i=[],a=[];s.ka.isEmpty()||(s.ka.forEach((l,c)=>{a.push(s.Ha(c,t,e).then(h=>{var d;if((h||e)&&s.isPrimaryClient){const m=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(h){r.push(h);const m=nu.Yi(c.targetId,h);i.push(m)}}))}),await Promise.all(a),s.La.p_(r),await async function(c,h){const d=ut(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(h,g=>V.forEach(g.Hi,T=>d.persistence.referenceDelegate.addReference(m,g.targetId,T)).next(()=>V.forEach(g.Ji,T=>d.persistence.referenceDelegate.removeReference(m,g.targetId,T)))))}catch(m){if(!Ar(m))throw m;Q(su,"Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const T=d.Ts.get(g),D=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(D);d.Ts=d.Ts.insert(g,N)}}}(s.localStore,i))}async function rI(n,t){const e=ut(n);if(!e.currentUser.isEqual(t)){Q(hu,"User change. New user:",t.toKey());const s=await ag(e.localStore,t);e.currentUser=t,function(i,a){i.Ga.forEach(l=>{l.forEach(c=>{c.reject(new Z(M.CANCELLED,a))})}),i.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Pi(e,s.Rs)}}function iI(n,t){const e=ut(n),s=e.Ka.get(t);if(s&&s.Ba)return mt().add(s.key);{let r=mt();const i=e.qa.get(t);if(!i)return r;for(const a of i){const l=e.ka.get(a);r=r.unionWith(l.view.ba)}return r}}function Cg(n){const t=ut(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=bg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tI.bind(null,t),t.La.p_=jw.bind(null,t.eventManager),t.La.Ja=Hw.bind(null,t.eventManager),t}function oI(n){const t=ut(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nI.bind(null,t),t}class Jo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ia(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return uw(this.persistence,new aw,t.initialUser,this.serializer)}Xa(t){return new og(eu.ri,this.serializer)}Za(t){return new _w}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jo.provider={build:()=>new Jo};class aI extends Jo{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){bt(this.persistence.referenceDelegate instanceof Yo);const s=this.persistence.referenceDelegate.garbageCollector;return new Wb(s,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new og(s=>Yo.ri(s,e),this.serializer)}}class dc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>id(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rI.bind(null,this.syncEngine),await Fw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Bw}()}createDatastore(t){const e=Ia(t.databaseInfo.databaseId),s=function(i){return new Aw(i)}(t.databaseInfo);return function(i,a,l,c){return new Sw(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,r,i,a,l){return new Rw(s,r,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,e=>id(this.syncEngine,e,0),function(){return Zf.D()?new Zf:new yw}())}createSyncEngine(t,e){return function(r,i,a,l,c,h,d){const m=new zw(r,i,a,l,c,h);return d&&(m.ja=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const i=ut(r);Q(Is,"RemoteStore shutting down."),i.W_.add(5),await Ri(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}dc.provider={build:()=>new dc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):Tn("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="FirestoreClient";class lI{constructor(t,e,s,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=r,this.user=ne.UNAUTHENTICATED,this.clientId=vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{Q(Xn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(Q(Xn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=cu(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function vl(n,t){n.asyncQueue.verifyOperationInProgress(),Q(Xn,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await ag(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function ad(n,t){n.asyncQueue.verifyOperationInProgress();const e=await cI(n);Q(Xn,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>ed(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>ed(t.remoteStore,r)),n._onlineComponents=t}async function cI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(Xn,"Using user provided OfflineComponentProvider");try{await vl(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===M.FAILED_PRECONDITION||r.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;ir("Error using user provided cache. Falling back to memory cache: "+e),await vl(n,new Jo)}}else Q(Xn,"Using default OfflineComponentProvider"),await vl(n,new aI(void 0));return n._offlineComponents}async function Pg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(Xn,"Using user provided OnlineComponentProvider"),await ad(n,n._uninitializedComponentsProvider._online)):(Q(Xn,"Using default OnlineComponentProvider"),await ad(n,new dc))),n._onlineComponents}function uI(n){return Pg(n).then(t=>t.syncEngine)}async function Dg(n){const t=await Pg(n),e=t.eventManager;return e.onListen=Gw.bind(null,t.syncEngine),e.onUnlisten=Xw.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Qw.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Jw.bind(null,t.syncEngine),e}function hI(n,t,e={}){const s=new _n;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new Rg({next:g=>{d.su(),a.enqueueAndForget(()=>yg(i,m));const T=g.docs.has(l);!T&&g.fromCache?h.reject(new Z(M.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?h.reject(new Z(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Eg(Gc(l.path),d,{includeMetadataChanges:!0,Ta:!0});return _g(i,m)}(await Dg(n),n.asyncQueue,t,e,s)),s.promise}function fI(n,t,e={}){const s=new _n;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new Rg({next:g=>{d.su(),a.enqueueAndForget(()=>yg(i,m)),g.fromCache&&c.source==="server"?h.reject(new Z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new Eg(l,d,{includeMetadataChanges:!0,Ta:!0});return _g(i,m)}(await Dg(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(n,t,e){if(!e)throw new Z(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function dI(n,t,e,s){if(t===!0&&s===!0)throw new Z(M.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function cd(n){if(!rt.isDocumentKey(n))throw new Z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ud(n){if(rt.isDocumentKey(n))throw new Z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function du(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ot()}function bn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=du(n);throw new Z(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="firestore.googleapis.com",hd=!0;class fd{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vg,this.ssl=hd}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:hd;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ig;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Kb)throw new Z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}dI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ng((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ra{constructor(t,e,s,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fd(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new vA;switch(s.type){case"firstParty":return new wA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=ld.get(e);s&&(Q("ComponentProvider","Removing Datastore"),ld.delete(e),s.terminate())}(this),Promise.resolve()}}function pI(n,t,e,s={}){var r;const i=(n=bn(n,Ra))._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:n._getEmulatorOptions()}),l=`${t}:${e}`;i.host!==Vg&&i.host!==l&&ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:l,ssl:!1,emulatorOptions:s});if(!Fo(c,a)&&(n._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=ne.MOCK_USER;else{h=Xv(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new Z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ne(m)}n._authCredentials=new TA(new Em(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Pa(this.firestore,t,this._query)}}class Se{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Se(this.firestore,t,this._key)}}class Hn extends Pa{constructor(t,e,s){super(t,e,Gc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Se(this.firestore,null,new rt(t))}withConverter(t){return new Hn(this.firestore,t,this._path)}}function mI(n,t,...e){if(n=qn(n),Og("collection","path",t),n instanceof Ra){const s=Nt.fromString(t,...e);return ud(s),new Hn(n,null,s)}{if(!(n instanceof Se||n instanceof Hn))throw new Z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nt.fromString(t,...e));return ud(s),new Hn(n.firestore,null,s)}}function wo(n,t,...e){if(n=qn(n),arguments.length===1&&(t=vm.newId()),Og("doc","path",t),n instanceof Ra){const s=Nt.fromString(t,...e);return cd(s),new Se(n,null,new rt(s))}{if(!(n instanceof Se||n instanceof Hn))throw new Z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Nt.fromString(t,...e));return cd(s),new Se(n.firestore,n instanceof Hn?n.converter:null,new rt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="AsyncQueue";class pd{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new cg(this,"async_queue_retry"),this.bu=()=>{const s=El();s&&Q(dd,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=t;const e=El();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=El();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new _n;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Ar(t))throw t;Q(dd,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.Su.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(s);throw Tn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.Su=e,e}enqueueAfterDelay(t,e,s){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=lu.createAndSchedule(this,t,e,s,i=>this.Fu(i));return this.fu.push(r),r}Du(){this.gu&&ot()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class wr extends Ra{constructor(t,e,s,r){super(t,e,s,r),this.type="firestore",this._queue=new pd,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new pd(t),this._firestoreClient=void 0,await t}}}function gI(n,t){const e=typeof n=="object"?n:aA(),s=typeof n=="string"?n:Ho,r=nA(e,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Qv("firestore");i&&pI(r,...i)}return r}function pu(n){if(n._terminated)throw new Z(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_I(n),n._firestoreClient}function _I(n){var t,e,s;const r=n._freezeSettings(),i=function(l,c,h,d){return new $A(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ng(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new lI(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hr(Gt.fromBase64String(t))}catch(e){throw new Z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new hr(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gt(this._lat,t._lat)||gt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/^__.*__$/;class EI{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new rs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Si(t,this.data,e,this.fieldTransforms)}}class xg{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new rs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Lg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class yu{constructor(t,e,s,r,i,a){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new yu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Ku(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return Zo(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Lg(this.Lu)&&yI.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class vI{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||Ia(t)}ju(t,e,s,r=!1){return new yu({Lu:t,methodName:e,zu:s,path:zt.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mg(n){const t=n._freezeSettings(),e=Ia(n._databaseId);return new vI(n._databaseId,!!t.ignoreUndefinedProperties,e)}function TI(n,t,e,s,r,i={}){const a=n.ju(i.merge||i.mergeFields?2:0,t,e,r);Eu("Data must be an object, but it was:",a,s);const l=kg(s,a);let c,h;if(i.merge)c=new Ie(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=pc(t,m,e);if(!a.contains(g))throw new Z(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Fg(d,g)||d.push(g)}c=new Ie(d),h=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,h=a.fieldTransforms;return new EI(new ge(l),c,h)}class Na extends mu{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Na}}function AI(n,t,e,s){const r=n.ju(1,t,e);Eu("Data must be an object, but it was:",r,s);const i=[],a=ge.empty();ss(s,(c,h)=>{const d=vu(t,c,e);h=qn(h);const m=r.Ku(d);if(h instanceof Na)i.push(d);else{const g=Oa(h,m);g!=null&&(i.push(d),a.set(d,g))}});const l=new Ie(i);return new xg(a,l,r.fieldTransforms)}function bI(n,t,e,s,r,i){const a=n.ju(1,t,e),l=[pc(t,s,e)],c=[r];if(i.length%2!=0)throw new Z(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(pc(t,i[g])),c.push(i[g+1]);const h=[],d=ge.empty();for(let g=l.length-1;g>=0;--g)if(!Fg(h,l[g])){const T=l[g];let D=c[g];D=qn(D);const N=a.Ku(T);if(D instanceof Na)h.push(T);else{const O=Oa(D,N);O!=null&&(h.push(T),d.set(T,O))}}const m=new Ie(h);return new xg(d,m,a.fieldTransforms)}function Oa(n,t){if($g(n=qn(n)))return Eu("Unsupported field value:",t,n),kg(n,t);if(n instanceof mu)return function(s,r){if(!Lg(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const l of s){let c=Oa(l,r.Uu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(n,t)}return function(s,r){if((s=qn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return lb(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ut.fromDate(s);return{timestampValue:Qo(r.serializer,i)}}if(s instanceof Ut){const i=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qo(r.serializer,i)}}if(s instanceof gu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof hr)return{bytesValue:Jm(r.serializer,s._byteString)};if(s instanceof Se){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Zc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof _u)return function(a,l){return{mapValue:{fields:{[Rm]:{stringValue:Pm},[Ko]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Qc(l.serializer,h)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${du(s)}`)}(n,t)}function kg(n,t){const e={};return Am(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ss(n,(s,r)=>{const i=Oa(r,t.qu(s));i!=null&&(e[s]=i)}),{mapValue:{fields:e}}}function $g(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof gu||n instanceof hr||n instanceof Se||n instanceof mu||n instanceof _u)}function Eu(n,t,e){if(!$g(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const s=du(e);throw s==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+s)}}function pc(n,t,e){if((t=qn(t))instanceof Da)return t._internalPath;if(typeof t=="string")return vu(n,t);throw Zo("Field path arguments must be of type string or ",n,!1,void 0,e)}const wI=new RegExp("[~\\*/\\[\\]]");function vu(n,t,e){if(t.search(wI)>=0)throw Zo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Da(...t.split("."))._internalPath}catch{throw Zo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function Zo(n,t,e,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new Z(M.INVALID_ARGUMENT,l+n+c)}function Fg(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,e,s,r,i){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new II(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Bg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class II extends Ug{data(){return super.data()}}function Bg(n,t){return typeof t=="string"?vu(n,t):t instanceof Da?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CI{convertValue(t,e="none"){switch(Qn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ot()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return ss(t,(r,i)=>{s[r]=this.convertValue(i,e)}),s}convertVectorValue(t){var e,s,r;const i=(r=(s=(e=t.fields)===null||e===void 0?void 0:e[Ko].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>Lt(a.doubleValue));return new _u(i)}convertGeoPoint(t){return new gu(Lt(t.latitude),Lt(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=ya(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(_i(t));default:return null}}convertTimestamp(t){const e=zn(t);return new Ut(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Nt.fromString(t);bt(rg(s));const r=new yi(s.get(1),s.get(3)),i=new rt(s.popFirst(5));return r.isEqual(e)||Tn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(n,t,e){let s;return s=n?n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jg extends Ug{constructor(t,e,s,r,i,a){super(t,e,s,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Bg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Io extends jg{data(t={}){return super.data(t)}}class PI{constructor(t,e,s,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Yr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Io(this._firestore,this._userDataWriter,s.key,s,new Yr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new Io(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Io(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Yr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:DI(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function DI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(n){n=bn(n,Se);const t=bn(n.firestore,wr);return hI(pu(t),n._key).then(e=>MI(t,n,e))}class Hg extends CI{constructor(t){super(),this.firestore=t}convertBytes(t){return new hr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Se(this.firestore,null,e)}}function OI(n){n=bn(n,Pa);const t=bn(n.firestore,wr),e=pu(t),s=new Hg(t);return SI(n._query),fI(e,n._query).then(r=>new PI(t,s,n,r))}function VI(n,t,e,...s){n=bn(n,Se);const r=bn(n.firestore,wr),i=Mg(r);let a;return a=typeof(t=qn(t))=="string"||t instanceof Da?bI(i,"updateDoc",n._key,t,e,s):AI(i,"updateDoc",n._key,t),Tu(r,[a.toMutation(n._key,Ke.exists(!0))])}function xI(n){return Tu(bn(n.firestore,wr),[new Yc(n._key,Ke.none())])}function LI(n,t){const e=bn(n.firestore,wr),s=wo(n),r=RI(n.converter,t);return Tu(e,[TI(Mg(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,Ke.exists(!1))]).then(()=>s)}function Tu(n,t){return function(s,r){const i=new _n;return s.asyncQueue.enqueueAndForget(async()=>Zw(await uI(s),r,i)),i.promise}(pu(n),t)}function MI(n,t,e){const s=e.docs.get(t._key),r=new Hg(n);return new jg(n,r,t._key,s,new Yr(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){vr=r})(oA),Bo(new pi("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new wr(new AA(s.getProvider("auth-internal")),new IA(a,s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(h.options.projectId,d)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),nr(Tf,Af,t),nr(Tf,Af,"esm2017")})();const kI={apiKey:"AIzaSyDveetVj4JbKJDam72kgwwfddoC-mYvapY",authDomain:"her-pretty-booklist.firebaseapp.com",projectId:"her-pretty-booklist",storageBucket:"her-pretty-booklist.firebasestorage.app",messagingSenderId:"503348876388",appId:"1:503348876388:web:fa53422d48686753437b71"},$I=um(kI),FI=gI($I);class UI{constructor(){Nh(this,"booksCollection");this.booksCollection=mI(FI,"books")}async addBook(t){try{const e=await LI(this.booksCollection,t);return console.log("Documento escrito con ID: ",e.id),e.id}catch(e){console.error("Error aadiendo registro: ",e)}}async readAll(){try{const e=(await OI(this.booksCollection)).docs.map(s=>({id:s.id,...s.data()}));return console.log("Documentos:",e),e}catch(t){console.error("Error obteniendo documentos: ",t)}}async update(t,e){try{const s=wo(this.booksCollection,t);await VI(s,e),console.log("Documento actualizado con ID: ",t)}catch(s){console.error("Error actualizando documento: ",s)}}async delete(t){try{const e=wo(this.booksCollection,t);await xI(e),console.log("Se borr esa vaina")}catch{console.error("No se borr ninguna mond")}}async getFile(t){try{const e=wo(this.booksCollection,t);return(await NI(e)).data()}catch(e){console.error("No se obtuvo la informacin: "+e)}}}const BI="/her-pretty-booklist/check-bought.webp",jI=["src","alt"],HI={class:"col"},KI={key:0},qI={key:1},WI={key:0,class:"col d-flex justify-content-center align-items-center"},zI=kc({__name:"BookItem",props:["book","db"],setup(n){const t=n,e=Be(t.book.bought);function s(){e.value=!e.value;const r=t.book;r.bought=e.value,t.db.update(r.id,r)}return(r,i)=>(Xe(),kn("li",{class:la("row my-5 p-3 rounded border "+(e.value?"bg-success-subtle":"bg-light"))},[X("img",{src:n.book.cover_url,alt:n.book.title+" cover",class:"col-2 img-fluid rounded"},null,8,jI),X("div",HI,[X("h1",null,xn(n.book.title),1),X("h2",null,"Por "+xn(n.book.author),1),X("p",null,[i[0]||(i[0]=X("b",null,"Editorial:",-1)),go(" "+xn(n.book.editorial),1)]),X("p",null,[i[1]||(i[1]=X("b",null,"Idioma:",-1)),go(" "+xn(n.book.language),1)]),X("p",null,[X("b",null,xn(n.book.cover_type),1)]),n.book.saga?(Xe(),kn("p",KI,[i[2]||(i[2]=X("b",null,"Saga:",-1)),go(" "+xn(n.book.saga),1)])):_o("",!0),n.book.notes?(Xe(),kn("h5",qI,xn(n.book.notes),1)):_o("",!0)]),e.value?(Xe(),kn("div",WI,i[3]||(i[3]=[X("img",{src:BI,alt:"Bought check",class:"img-fluid w-50"},null,-1)]))):_o("",!0),X("div",{class:"col-2"},[X("div",{class:"d-flex flex-column justify-content-center align-items-center h-100"},[X("button",{class:"btn btn-success w-100",onClick:s},"Marcar")])])],2))}}),GI=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},QI=GI(zI,[["__scopeId","data-v-d615cfd7"]]),YI={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},XI={class:"modal-dialog"},JI={class:"modal-content"},ZI={class:"modal-body"},tS={class:"row"},eS={class:"form-floating mb-3"},nS={class:"row"},sS={class:"form-floating mb-3 col"},rS={class:"form-floating mb-3 col"},iS={class:"form-floating mb-3 col"},oS={class:"row"},aS={class:"form-floating mb-3"},lS={class:"form-floating mb-3"},cS=kc({__name:"AddBook",props:["db"],setup(n){const t=Be(""),e=Be(""),s=Be(""),r=Be(""),i=Be(""),a=Be(""),l=Be(""),c=Be("");function h(){const m={title:t.value,author:e.value,saga:s.value,editorial:r.value,language:i.value,notes:a.value,cover_type:l.value,cover_url:c.value,bought:!1};n.db.addBook(m),alert("Libro aadido!")}function d(){t.value=e.value=s.value=r.value=i.value=a.value=l.value=c.value=""}return(m,g)=>(Xe(),kn(je,null,[g[19]||(g[19]=X("button",{type:"button",class:"btn btn-primary w-100","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Aadir libro ",-1)),X("div",YI,[X("div",XI,[X("div",JI,[g[18]||(g[18]=X("div",{class:"modal-header"},[X("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Aadiendo un libro"),X("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),X("form",{onSubmit:Vv(h,["prevent"]),class:"form"},[X("div",ZI,[X("div",tS,[X("div",eS,[On(X("input",{type:"text",id:"title","onUpdate:modelValue":g[0]||(g[0]=T=>t.value=T),class:"form-control"},null,512),[[$s,t.value]]),g[8]||(g[8]=X("label",{for:"title"},"Title",-1))])]),X("div",nS,[X("div",sS,[On(X("input",{type:"text",id:"author","onUpdate:modelValue":g[1]||(g[1]=T=>e.value=T),class:"form-control"},null,512),[[$s,e.value]]),g[9]||(g[9]=X("label",{for:"author"},"Author",-1))]),X("div",rS,[On(X("input",{type:"text",id:"editorial","onUpdate:modelValue":g[2]||(g[2]=T=>r.value=T),class:"form-control"},null,512),[[$s,r.value]]),g[10]||(g[10]=X("label",{for:"editorial"},"Editorial",-1))])]),X("div",iS,[On(X("input",{type:"text",id:"saga","onUpdate:modelValue":g[3]||(g[3]=T=>s.value=T),class:"form-control"},null,512),[[$s,s.value]]),g[11]||(g[11]=X("label",{for:"saga"},"Saga",-1))]),X("div",oS,[On(X("select",{name:"language",id:"language","onUpdate:modelValue":g[4]||(g[4]=T=>i.value=T),class:"form-select col mb-3 mx-2"},g[12]||(g[12]=[X("option",{value:"Ingls",selected:""},"Ingls",-1),X("option",{value:"Espaol"},"Espaol",-1)]),512),[[af,i.value]]),On(X("select",{name:"cover_type",id:"Cover type","onUpdate:modelValue":g[5]||(g[5]=T=>l.value=T),class:"form-select col mb-3 mx-2"},g[13]||(g[13]=[X("option",{value:"Tapa blanda",selected:""},"Tapa blanda",-1),X("option",{value:"Tapa dura"},"Tapa dura",-1)]),512),[[af,l.value]])]),X("div",aS,[On(X("input",{type:"text",id:"cover_url","onUpdate:modelValue":g[6]||(g[6]=T=>c.value=T),class:"form-control"},null,512),[[$s,c.value]]),g[14]||(g[14]=X("label",{for:"cover_url"},"Cover url",-1))]),X("div",lS,[On(X("textarea",{id:"notes","onUpdate:modelValue":g[7]||(g[7]=T=>a.value=T),class:"form-control"},null,512),[[$s,a.value]]),g[15]||(g[15]=X("label",{for:"notes"},"Extra notes",-1))])]),X("div",{class:"modal-footer"},[g[16]||(g[16]=X("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cerrar",-1)),X("button",{type:"button",class:"btn btn-primary",onClick:d},"Limpiar campos"),g[17]||(g[17]=X("input",{type:"submit",value:"Aadir libro",class:"btn btn-success"},null,-1))])],32)])])])],64))}}),uS={class:"container pb-3"},hS={key:0},fS=kc({__name:"App",setup(n){const t=new UI,e=Be([]),s=Be("cards");return Dp(async()=>{const r=await t.readAll();r&&(r.forEach(async i=>{e.value.push(i)}),e.value.sort((i,a)=>i.author.localeCompare(a.author)))}),(r,i)=>(Xe(),kn("div",uS,[i[0]||(i[0]=X("h1",{class:"text-center"},"My Pretty Booklist (for my queen)",-1)),s.value=="cards"?(Xe(),kn("div",hS,[X("ul",null,[(Xe(!0),kn(je,null,TE(e.value,a=>(Xe(),Xp(QI,{book:a,db:Bl(t)},null,8,["book","db"]))),256))])])):_o("",!0),i[1]||(i[1]=X("div",null,null,-1)),Ze(cS,{db:Bl(t)},null,8,["db"])]))}});var fe="top",Ce="bottom",Re="right",de="left",Va="auto",Ir=[fe,Ce,Re,de],Ss="start",fr="end",Kg="clippingParents",Au="viewport",Ws="popper",qg="reference",mc=Ir.reduce(function(n,t){return n.concat([t+"-"+Ss,t+"-"+fr])},[]),bu=[].concat(Ir,[Va]).reduce(function(n,t){return n.concat([t,t+"-"+Ss,t+"-"+fr])},[]),Wg="beforeRead",zg="read",Gg="afterRead",Qg="beforeMain",Yg="main",Xg="afterMain",Jg="beforeWrite",Zg="write",t_="afterWrite",e_=[Wg,zg,Gg,Qg,Yg,Xg,Jg,Zg,t_];function cn(n){return n?(n.nodeName||"").toLowerCase():null}function Pe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Cs(n){var t=Pe(n).Element;return n instanceof t||n instanceof Element}function Me(n){var t=Pe(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function wu(n){if(typeof ShadowRoot>"u")return!1;var t=Pe(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function dS(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];!Me(i)||!cn(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(a){var l=r[a];l===!1?i.removeAttribute(a):i.setAttribute(a,l===!0?"":l)}))})}function pS(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),l=a.reduce(function(c,h){return c[h]="",c},{});!Me(r)||!cn(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Iu={name:"applyStyles",enabled:!0,phase:"write",fn:dS,effect:pS,requires:["computeStyles"]};function nn(n){return n.split("-")[0]}var Ts=Math.max,ta=Math.min,dr=Math.round;function gc(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function n_(){return!/^((?!chrome|android).)*safari/i.test(gc())}function pr(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=n.getBoundingClientRect(),r=1,i=1;t&&Me(n)&&(r=n.offsetWidth>0&&dr(s.width)/n.offsetWidth||1,i=n.offsetHeight>0&&dr(s.height)/n.offsetHeight||1);var a=Cs(n)?Pe(n):window,l=a.visualViewport,c=!n_()&&e,h=(s.left+(c&&l?l.offsetLeft:0))/r,d=(s.top+(c&&l?l.offsetTop:0))/i,m=s.width/r,g=s.height/i;return{width:m,height:g,top:d,right:h+m,bottom:d+g,left:h,x:h,y:d}}function Su(n){var t=pr(n),e=n.offsetWidth,s=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:s}}function s_(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&wu(e)){var s=t;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function wn(n){return Pe(n).getComputedStyle(n)}function mS(n){return["table","td","th"].indexOf(cn(n))>=0}function is(n){return((Cs(n)?n.ownerDocument:n.document)||window.document).documentElement}function xa(n){return cn(n)==="html"?n:n.assignedSlot||n.parentNode||(wu(n)?n.host:null)||is(n)}function md(n){return!Me(n)||wn(n).position==="fixed"?null:n.offsetParent}function gS(n){var t=/firefox/i.test(gc()),e=/Trident/i.test(gc());if(e&&Me(n)){var s=wn(n);if(s.position==="fixed")return null}var r=xa(n);for(wu(r)&&(r=r.host);Me(r)&&["html","body"].indexOf(cn(r))<0;){var i=wn(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Di(n){for(var t=Pe(n),e=md(n);e&&mS(e)&&wn(e).position==="static";)e=md(e);return e&&(cn(e)==="html"||cn(e)==="body"&&wn(e).position==="static")?t:e||gS(n)||t}function Cu(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function ai(n,t,e){return Ts(n,ta(t,e))}function _S(n,t,e){var s=ai(n,t,e);return s>e?e:s}function r_(){return{top:0,right:0,bottom:0,left:0}}function i_(n){return Object.assign({},r_(),n)}function o_(n,t){return t.reduce(function(e,s){return e[s]=n,e},{})}var yS=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,i_(typeof t!="number"?t:o_(t,Ir))};function ES(n){var t,e=n.state,s=n.name,r=n.options,i=e.elements.arrow,a=e.modifiersData.popperOffsets,l=nn(e.placement),c=Cu(l),h=[de,Re].indexOf(l)>=0,d=h?"height":"width";if(!(!i||!a)){var m=yS(r.padding,e),g=Su(i),T=c==="y"?fe:de,D=c==="y"?Ce:Re,N=e.rects.reference[d]+e.rects.reference[c]-a[c]-e.rects.popper[d],O=a[c]-e.rects.reference[c],H=Di(i),z=H?c==="y"?H.clientHeight||0:H.clientWidth||0:0,G=N/2-O/2,L=m[T],J=z-g[d]-m[D],tt=z/2-g[d]/2+G,b=ai(L,tt,J),_=c;e.modifiersData[s]=(t={},t[_]=b,t.centerOffset=b-tt,t)}}function vS(n){var t=n.state,e=n.options,s=e.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||s_(t.elements.popper,r)&&(t.elements.arrow=r))}const a_={name:"arrow",enabled:!0,phase:"main",fn:ES,effect:vS,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function mr(n){return n.split("-")[1]}var TS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function AS(n,t){var e=n.x,s=n.y,r=t.devicePixelRatio||1;return{x:dr(e*r)/r||0,y:dr(s*r)/r||0}}function gd(n){var t,e=n.popper,s=n.popperRect,r=n.placement,i=n.variation,a=n.offsets,l=n.position,c=n.gpuAcceleration,h=n.adaptive,d=n.roundOffsets,m=n.isFixed,g=a.x,T=g===void 0?0:g,D=a.y,N=D===void 0?0:D,O=typeof d=="function"?d({x:T,y:N}):{x:T,y:N};T=O.x,N=O.y;var H=a.hasOwnProperty("x"),z=a.hasOwnProperty("y"),G=de,L=fe,J=window;if(h){var tt=Di(e),b="clientHeight",_="clientWidth";if(tt===Pe(e)&&(tt=is(e),wn(tt).position!=="static"&&l==="absolute"&&(b="scrollHeight",_="scrollWidth")),tt=tt,r===fe||(r===de||r===Re)&&i===fr){L=Ce;var E=m&&tt===J&&J.visualViewport?J.visualViewport.height:tt[b];N-=E-s.height,N*=c?1:-1}if(r===de||(r===fe||r===Ce)&&i===fr){G=Re;var A=m&&tt===J&&J.visualViewport?J.visualViewport.width:tt[_];T-=A-s.width,T*=c?1:-1}}var w=Object.assign({position:l},h&&TS),S=d===!0?AS({x:T,y:N},Pe(e)):{x:T,y:N};if(T=S.x,N=S.y,c){var y;return Object.assign({},w,(y={},y[L]=z?"0":"",y[G]=H?"0":"",y.transform=(J.devicePixelRatio||1)<=1?"translate("+T+"px, "+N+"px)":"translate3d("+T+"px, "+N+"px, 0)",y))}return Object.assign({},w,(t={},t[L]=z?N+"px":"",t[G]=H?T+"px":"",t.transform="",t))}function bS(n){var t=n.state,e=n.options,s=e.gpuAcceleration,r=s===void 0?!0:s,i=e.adaptive,a=i===void 0?!0:i,l=e.roundOffsets,c=l===void 0?!0:l,h={placement:nn(t.placement),variation:mr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,gd(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,gd(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ru={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bS,data:{}};var io={passive:!0};function wS(n){var t=n.state,e=n.instance,s=n.options,r=s.scroll,i=r===void 0?!0:r,a=s.resize,l=a===void 0?!0:a,c=Pe(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&h.forEach(function(d){d.addEventListener("scroll",e.update,io)}),l&&c.addEventListener("resize",e.update,io),function(){i&&h.forEach(function(d){d.removeEventListener("scroll",e.update,io)}),l&&c.removeEventListener("resize",e.update,io)}}const Pu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wS,data:{}};var IS={left:"right",right:"left",bottom:"top",top:"bottom"};function So(n){return n.replace(/left|right|bottom|top/g,function(t){return IS[t]})}var SS={start:"end",end:"start"};function _d(n){return n.replace(/start|end/g,function(t){return SS[t]})}function Du(n){var t=Pe(n),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function Nu(n){return pr(is(n)).left+Du(n).scrollLeft}function CS(n,t){var e=Pe(n),s=is(n),r=e.visualViewport,i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;var h=n_();(h||!h&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l+Nu(n),y:c}}function RS(n){var t,e=is(n),s=Du(n),r=(t=n.ownerDocument)==null?void 0:t.body,i=Ts(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Ts(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+Nu(n),c=-s.scrollTop;return wn(r||e).direction==="rtl"&&(l+=Ts(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}function Ou(n){var t=wn(n),e=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+s)}function l_(n){return["html","body","#document"].indexOf(cn(n))>=0?n.ownerDocument.body:Me(n)&&Ou(n)?n:l_(xa(n))}function li(n,t){var e;t===void 0&&(t=[]);var s=l_(n),r=s===((e=n.ownerDocument)==null?void 0:e.body),i=Pe(s),a=r?[i].concat(i.visualViewport||[],Ou(s)?s:[]):s,l=t.concat(a);return r?l:l.concat(li(xa(a)))}function _c(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function PS(n,t){var e=pr(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function yd(n,t,e){return t===Au?_c(CS(n,e)):Cs(t)?PS(t,e):_c(RS(is(n)))}function DS(n){var t=li(xa(n)),e=["absolute","fixed"].indexOf(wn(n).position)>=0,s=e&&Me(n)?Di(n):n;return Cs(s)?t.filter(function(r){return Cs(r)&&s_(r,s)&&cn(r)!=="body"}):[]}function NS(n,t,e,s){var r=t==="clippingParents"?DS(n):[].concat(t),i=[].concat(r,[e]),a=i[0],l=i.reduce(function(c,h){var d=yd(n,h,s);return c.top=Ts(d.top,c.top),c.right=ta(d.right,c.right),c.bottom=ta(d.bottom,c.bottom),c.left=Ts(d.left,c.left),c},yd(n,a,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function c_(n){var t=n.reference,e=n.element,s=n.placement,r=s?nn(s):null,i=s?mr(s):null,a=t.x+t.width/2-e.width/2,l=t.y+t.height/2-e.height/2,c;switch(r){case fe:c={x:a,y:t.y-e.height};break;case Ce:c={x:a,y:t.y+t.height};break;case Re:c={x:t.x+t.width,y:l};break;case de:c={x:t.x-e.width,y:l};break;default:c={x:t.x,y:t.y}}var h=r?Cu(r):null;if(h!=null){var d=h==="y"?"height":"width";switch(i){case Ss:c[h]=c[h]-(t[d]/2-e[d]/2);break;case fr:c[h]=c[h]+(t[d]/2-e[d]/2);break}}return c}function gr(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=s===void 0?n.placement:s,i=e.strategy,a=i===void 0?n.strategy:i,l=e.boundary,c=l===void 0?Kg:l,h=e.rootBoundary,d=h===void 0?Au:h,m=e.elementContext,g=m===void 0?Ws:m,T=e.altBoundary,D=T===void 0?!1:T,N=e.padding,O=N===void 0?0:N,H=i_(typeof O!="number"?O:o_(O,Ir)),z=g===Ws?qg:Ws,G=n.rects.popper,L=n.elements[D?z:g],J=NS(Cs(L)?L:L.contextElement||is(n.elements.popper),c,d,a),tt=pr(n.elements.reference),b=c_({reference:tt,element:G,placement:r}),_=_c(Object.assign({},G,b)),E=g===Ws?_:tt,A={top:J.top-E.top+H.top,bottom:E.bottom-J.bottom+H.bottom,left:J.left-E.left+H.left,right:E.right-J.right+H.right},w=n.modifiersData.offset;if(g===Ws&&w){var S=w[r];Object.keys(A).forEach(function(y){var xt=[Re,Ce].indexOf(y)>=0?1:-1,Qt=[fe,Ce].indexOf(y)>=0?"y":"x";A[y]+=S[Qt]*xt})}return A}function OS(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=e.boundary,i=e.rootBoundary,a=e.padding,l=e.flipVariations,c=e.allowedAutoPlacements,h=c===void 0?bu:c,d=mr(s),m=d?l?mc:mc.filter(function(D){return mr(D)===d}):Ir,g=m.filter(function(D){return h.indexOf(D)>=0});g.length===0&&(g=m);var T=g.reduce(function(D,N){return D[N]=gr(n,{placement:N,boundary:r,rootBoundary:i,padding:a})[nn(N)],D},{});return Object.keys(T).sort(function(D,N){return T[D]-T[N]})}function VS(n){if(nn(n)===Va)return[];var t=So(n);return[_d(n),t,_d(t)]}function xS(n){var t=n.state,e=n.options,s=n.name;if(!t.modifiersData[s]._skip){for(var r=e.mainAxis,i=r===void 0?!0:r,a=e.altAxis,l=a===void 0?!0:a,c=e.fallbackPlacements,h=e.padding,d=e.boundary,m=e.rootBoundary,g=e.altBoundary,T=e.flipVariations,D=T===void 0?!0:T,N=e.allowedAutoPlacements,O=t.options.placement,H=nn(O),z=H===O,G=c||(z||!D?[So(O)]:VS(O)),L=[O].concat(G).reduce(function(We,Yt){return We.concat(nn(Yt)===Va?OS(t,{placement:Yt,boundary:d,rootBoundary:m,padding:h,flipVariations:D,allowedAutoPlacements:N}):Yt)},[]),J=t.rects.reference,tt=t.rects.popper,b=new Map,_=!0,E=L[0],A=0;A<L.length;A++){var w=L[A],S=nn(w),y=mr(w)===Ss,xt=[fe,Ce].indexOf(S)>=0,Qt=xt?"width":"height",vt=gr(t,{placement:w,boundary:d,rootBoundary:m,altBoundary:g,padding:h}),ft=xt?y?Re:de:y?Ce:fe;J[Qt]>tt[Qt]&&(ft=So(ft));var dt=So(ft),$t=[];if(i&&$t.push(vt[S]<=0),l&&$t.push(vt[ft]<=0,vt[dt]<=0),$t.every(function(We){return We})){E=w,_=!1;break}b.set(w,$t)}if(_)for(var De=D?3:1,ye=function(Yt){var Ee=L.find(function(pe){var ve=b.get(pe);if(ve)return ve.slice(0,Yt).every(function(Cn){return Cn})});if(Ee)return E=Ee,"break"},Ct=De;Ct>0;Ct--){var Dt=ye(Ct);if(Dt==="break")break}t.placement!==E&&(t.modifiersData[s]._skip=!0,t.placement=E,t.reset=!0)}}const u_={name:"flip",enabled:!0,phase:"main",fn:xS,requiresIfExists:["offset"],data:{_skip:!1}};function Ed(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function vd(n){return[fe,Re,Ce,de].some(function(t){return n[t]>=0})}function LS(n){var t=n.state,e=n.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=gr(t,{elementContext:"reference"}),l=gr(t,{altBoundary:!0}),c=Ed(a,s),h=Ed(l,r,i),d=vd(c),m=vd(h);t.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":m})}const h_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:LS};function MS(n,t,e){var s=nn(n),r=[de,fe].indexOf(s)>=0?-1:1,i=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,a=i[0],l=i[1];return a=a||0,l=(l||0)*r,[de,Re].indexOf(s)>=0?{x:l,y:a}:{x:a,y:l}}function kS(n){var t=n.state,e=n.options,s=n.name,r=e.offset,i=r===void 0?[0,0]:r,a=bu.reduce(function(d,m){return d[m]=MS(m,t.rects,i),d},{}),l=a[t.placement],c=l.x,h=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=a}const f_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:kS};function $S(n){var t=n.state,e=n.name;t.modifiersData[e]=c_({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Vu={name:"popperOffsets",enabled:!0,phase:"read",fn:$S,data:{}};function FS(n){return n==="x"?"y":"x"}function US(n){var t=n.state,e=n.options,s=n.name,r=e.mainAxis,i=r===void 0?!0:r,a=e.altAxis,l=a===void 0?!1:a,c=e.boundary,h=e.rootBoundary,d=e.altBoundary,m=e.padding,g=e.tether,T=g===void 0?!0:g,D=e.tetherOffset,N=D===void 0?0:D,O=gr(t,{boundary:c,rootBoundary:h,padding:m,altBoundary:d}),H=nn(t.placement),z=mr(t.placement),G=!z,L=Cu(H),J=FS(L),tt=t.modifiersData.popperOffsets,b=t.rects.reference,_=t.rects.popper,E=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,A=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),w=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(tt){if(i){var y,xt=L==="y"?fe:de,Qt=L==="y"?Ce:Re,vt=L==="y"?"height":"width",ft=tt[L],dt=ft+O[xt],$t=ft-O[Qt],De=T?-_[vt]/2:0,ye=z===Ss?b[vt]:_[vt],Ct=z===Ss?-_[vt]:-b[vt],Dt=t.elements.arrow,We=T&&Dt?Su(Dt):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:r_(),Ee=Yt[xt],pe=Yt[Qt],ve=ai(0,b[vt],We[vt]),Cn=G?b[vt]/2-De-ve-Ee-A.mainAxis:ye-ve-Ee-A.mainAxis,Ne=G?-b[vt]/2+De+ve+pe+A.mainAxis:Ct+ve+pe+A.mainAxis,un=t.elements.arrow&&Di(t.elements.arrow),v=un?L==="y"?un.clientTop||0:un.clientLeft||0:0,I=(y=w==null?void 0:w[L])!=null?y:0,P=ft+Cn-I-v,U=ft+Ne-I,x=ai(T?ta(dt,P):dt,ft,T?Ts($t,U):$t);tt[L]=x,S[L]=x-ft}if(l){var F,q=L==="x"?fe:de,j=L==="x"?Ce:Re,B=tt[J],k=J==="y"?"height":"width",et=B+O[q],W=B-O[j],Y=[fe,de].indexOf(H)!==-1,it=(F=w==null?void 0:w[J])!=null?F:0,nt=Y?et:B-b[k]-_[k]-it+A.altAxis,lt=Y?B+b[k]+_[k]-it-A.altAxis:W,pt=T&&Y?_S(nt,B,lt):ai(T?nt:et,B,T?lt:W);tt[J]=pt,S[J]=pt-B}t.modifiersData[s]=S}}const d_={name:"preventOverflow",enabled:!0,phase:"main",fn:US,requiresIfExists:["offset"]};function BS(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function jS(n){return n===Pe(n)||!Me(n)?Du(n):BS(n)}function HS(n){var t=n.getBoundingClientRect(),e=dr(t.width)/n.offsetWidth||1,s=dr(t.height)/n.offsetHeight||1;return e!==1||s!==1}function KS(n,t,e){e===void 0&&(e=!1);var s=Me(t),r=Me(t)&&HS(t),i=is(t),a=pr(n,r,e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!e)&&((cn(t)!=="body"||Ou(i))&&(l=jS(t)),Me(t)?(c=pr(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Nu(i))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function qS(n){var t=new Map,e=new Set,s=[];n.forEach(function(i){t.set(i.name,i)});function r(i){e.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(l){if(!e.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return n.forEach(function(i){e.has(i.name)||r(i)}),s}function WS(n){var t=qS(n);return e_.reduce(function(e,s){return e.concat(t.filter(function(r){return r.phase===s}))},[])}function zS(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function GS(n){var t=n.reduce(function(e,s){var r=e[s.name];return e[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var Td={placement:"bottom",modifiers:[],strategy:"absolute"};function Ad(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function La(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,s=e===void 0?[]:e,r=t.defaultOptions,i=r===void 0?Td:r;return function(l,c,h){h===void 0&&(h=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Td,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],g=!1,T={state:d,setOptions:function(H){var z=typeof H=="function"?H(d.options):H;N(),d.options=Object.assign({},i,d.options,z),d.scrollParents={reference:Cs(l)?li(l):l.contextElement?li(l.contextElement):[],popper:li(c)};var G=WS(GS([].concat(s,d.options.modifiers)));return d.orderedModifiers=G.filter(function(L){return L.enabled}),D(),T.update()},forceUpdate:function(){if(!g){var H=d.elements,z=H.reference,G=H.popper;if(Ad(z,G)){d.rects={reference:KS(z,Di(G),d.options.strategy==="fixed"),popper:Su(G)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(A){return d.modifiersData[A.name]=Object.assign({},A.data)});for(var L=0;L<d.orderedModifiers.length;L++){if(d.reset===!0){d.reset=!1,L=-1;continue}var J=d.orderedModifiers[L],tt=J.fn,b=J.options,_=b===void 0?{}:b,E=J.name;typeof tt=="function"&&(d=tt({state:d,options:_,name:E,instance:T})||d)}}}},update:zS(function(){return new Promise(function(O){T.forceUpdate(),O(d)})}),destroy:function(){N(),g=!0}};if(!Ad(l,c))return T;T.setOptions(h).then(function(O){!g&&h.onFirstUpdate&&h.onFirstUpdate(O)});function D(){d.orderedModifiers.forEach(function(O){var H=O.name,z=O.options,G=z===void 0?{}:z,L=O.effect;if(typeof L=="function"){var J=L({state:d,name:H,instance:T,options:G}),tt=function(){};m.push(J||tt)}})}function N(){m.forEach(function(O){return O()}),m=[]}return T}}var QS=La(),YS=[Pu,Vu,Ru,Iu],XS=La({defaultModifiers:YS}),JS=[Pu,Vu,Ru,Iu,f_,u_,d_,a_,h_],xu=La({defaultModifiers:JS});const p_=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Xg,afterRead:Gg,afterWrite:t_,applyStyles:Iu,arrow:a_,auto:Va,basePlacements:Ir,beforeMain:Qg,beforeRead:Wg,beforeWrite:Jg,bottom:Ce,clippingParents:Kg,computeStyles:Ru,createPopper:xu,createPopperBase:QS,createPopperLite:XS,detectOverflow:gr,end:fr,eventListeners:Pu,flip:u_,hide:h_,left:de,main:Yg,modifierPhases:e_,offset:f_,placements:bu,popper:Ws,popperGenerator:La,popperOffsets:Vu,preventOverflow:d_,read:zg,reference:qg,right:Re,start:Ss,top:fe,variationPlacements:mc,viewport:Au,write:Zg},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Vn=new Map,Tl={set(n,t,e){Vn.has(n)||Vn.set(n,new Map);const s=Vn.get(n);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(n,t){return Vn.has(n)&&Vn.get(n).get(t)||null},remove(n,t){if(!Vn.has(n))return;const e=Vn.get(n);e.delete(t),e.size===0&&Vn.delete(n)}},ZS=1e6,tC=1e3,yc="transitionend",m_=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),eC=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),nC=n=>{do n+=Math.floor(Math.random()*ZS);while(document.getElementById(n));return n},sC=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const s=Number.parseFloat(t),r=Number.parseFloat(e);return!s&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*tC)},g_=n=>{n.dispatchEvent(new Event(yc))},yn=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Jn=n=>yn(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(m_(n)):null,Sr=n=>{if(!yn(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const s=n.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},Zn=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",__=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?__(n.parentNode):null},ea=()=>{},Ni=n=>{n.offsetHeight},y_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Al=[],rC=n=>{document.readyState==="loading"?(Al.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of Al)t()}),Al.push(n)):n()},ke=()=>document.documentElement.dir==="rtl",Fe=n=>{rC(()=>{const t=y_();if(t){const e=n.NAME,s=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=s,n.jQueryInterface)}})},_e=(n,t=[],e=n)=>typeof n=="function"?n(...t):e,E_=(n,t,e=!0)=>{if(!e){_e(n);return}const r=sC(t)+5;let i=!1;const a=({target:l})=>{l===t&&(i=!0,t.removeEventListener(yc,a),_e(n))};t.addEventListener(yc,a),setTimeout(()=>{i||g_(t)},r)},Lu=(n,t,e,s)=>{const r=n.length;let i=n.indexOf(t);return i===-1?!e&&s?n[r-1]:n[0]:(i+=e?1:-1,s&&(i=(i+r)%r),n[Math.max(0,Math.min(i,r-1))])},iC=/[^.]*(?=\..*)\.|.*/,oC=/\..*/,aC=/::\d+$/,bl={};let bd=1;const v_={mouseenter:"mouseover",mouseleave:"mouseout"},lC=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function T_(n,t){return t&&`${t}::${bd++}`||n.uidEvent||bd++}function A_(n){const t=T_(n);return n.uidEvent=t,bl[t]=bl[t]||{},bl[t]}function cC(n,t){return function e(s){return Mu(s,{delegateTarget:n}),e.oneOff&&$.off(n,s.type,t),t.apply(n,[s])}}function uC(n,t,e){return function s(r){const i=n.querySelectorAll(t);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const l of i)if(l===a)return Mu(r,{delegateTarget:a}),s.oneOff&&$.off(n,r.type,t,e),e.apply(a,[r])}}function b_(n,t,e=null){return Object.values(n).find(s=>s.callable===t&&s.delegationSelector===e)}function w_(n,t,e){const s=typeof t=="string",r=s?e:t||e;let i=I_(n);return lC.has(i)||(i=n),[s,r,i]}function wd(n,t,e,s,r){if(typeof t!="string"||!n)return;let[i,a,l]=w_(t,e,s);t in v_&&(a=(D=>function(N){if(!N.relatedTarget||N.relatedTarget!==N.delegateTarget&&!N.delegateTarget.contains(N.relatedTarget))return D.call(this,N)})(a));const c=A_(n),h=c[l]||(c[l]={}),d=b_(h,a,i?e:null);if(d){d.oneOff=d.oneOff&&r;return}const m=T_(a,t.replace(iC,"")),g=i?uC(n,e,a):cC(n,a);g.delegationSelector=i?e:null,g.callable=a,g.oneOff=r,g.uidEvent=m,h[m]=g,n.addEventListener(l,g,i)}function Ec(n,t,e,s,r){const i=b_(t[e],s,r);i&&(n.removeEventListener(e,i,!!r),delete t[e][i.uidEvent])}function hC(n,t,e,s){const r=t[e]||{};for(const[i,a]of Object.entries(r))i.includes(s)&&Ec(n,t,e,a.callable,a.delegationSelector)}function I_(n){return n=n.replace(oC,""),v_[n]||n}const $={on(n,t,e,s){wd(n,t,e,s,!1)},one(n,t,e,s){wd(n,t,e,s,!0)},off(n,t,e,s){if(typeof t!="string"||!n)return;const[r,i,a]=w_(t,e,s),l=a!==t,c=A_(n),h=c[a]||{},d=t.startsWith(".");if(typeof i<"u"){if(!Object.keys(h).length)return;Ec(n,c,a,i,r?e:null);return}if(d)for(const m of Object.keys(c))hC(n,c,m,t.slice(1));for(const[m,g]of Object.entries(h)){const T=m.replace(aC,"");(!l||t.includes(T))&&Ec(n,c,a,g.callable,g.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const s=y_(),r=I_(t),i=t!==r;let a=null,l=!0,c=!0,h=!1;i&&s&&(a=s.Event(t,e),s(n).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const d=Mu(new Event(t,{bubbles:l,cancelable:!0}),e);return h&&d.preventDefault(),c&&n.dispatchEvent(d),d.defaultPrevented&&a&&a.preventDefault(),d}};function Mu(n,t={}){for(const[e,s]of Object.entries(t))try{n[e]=s}catch{Object.defineProperty(n,e,{configurable:!0,get(){return s}})}return n}function Id(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function wl(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const En={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${wl(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${wl(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=Id(n.dataset[s])}return t},getDataAttribute(n,t){return Id(n.getAttribute(`data-bs-${wl(t)}`))}};class Oi{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=yn(e)?En.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},...yn(e)?En.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,r]of Object.entries(e)){const i=t[s],a=yn(i)?"element":eC(i);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${r}".`)}}}const fC="5.3.3";class qe extends Oi{constructor(t,e){super(),t=Jn(t),t&&(this._element=t,this._config=this._getConfig(e),Tl.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Tl.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){E_(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Tl.get(Jn(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return fC}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Il=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>m_(e)).join(","):null},st={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let s=n.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Zn(e)&&Sr(e))},getSelectorFromElement(n){const t=Il(n);return t&&st.findOne(t)?t:null},getElementFromSelector(n){const t=Il(n);return t?st.findOne(t):null},getMultipleElementsFromSelector(n){const t=Il(n);return t?st.find(t):[]}},Ma=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,s=n.NAME;$.on(document,e,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Zn(this))return;const i=st.getElementFromSelector(this)||this.closest(`.${s}`);n.getOrCreateInstance(i)[t]()})},dC="alert",pC="bs.alert",S_=`.${pC}`,mC=`close${S_}`,gC=`closed${S_}`,_C="fade",yC="show";class ka extends qe{static get NAME(){return dC}close(){if($.trigger(this._element,mC).defaultPrevented)return;this._element.classList.remove(yC);const e=this._element.classList.contains(_C);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),$.trigger(this._element,gC),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=ka.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Ma(ka,"close");Fe(ka);const EC="button",vC="bs.button",TC=`.${vC}`,AC=".data-api",bC="active",Sd='[data-bs-toggle="button"]',wC=`click${TC}${AC}`;class $a extends qe{static get NAME(){return EC}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(bC))}static jQueryInterface(t){return this.each(function(){const e=$a.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}$.on(document,wC,Sd,n=>{n.preventDefault();const t=n.target.closest(Sd);$a.getOrCreateInstance(t).toggle()});Fe($a);const IC="swipe",Cr=".bs.swipe",SC=`touchstart${Cr}`,CC=`touchmove${Cr}`,RC=`touchend${Cr}`,PC=`pointerdown${Cr}`,DC=`pointerup${Cr}`,NC="touch",OC="pen",VC="pointer-event",xC=40,LC={endCallback:null,leftCallback:null,rightCallback:null},MC={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class na extends Oi{constructor(t,e){super(),this._element=t,!(!t||!na.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return LC}static get DefaultType(){return MC}static get NAME(){return IC}dispose(){$.off(this._element,Cr)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),_e(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=xC)return;const e=t/this._deltaX;this._deltaX=0,e&&_e(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,PC,t=>this._start(t)),$.on(this._element,DC,t=>this._end(t)),this._element.classList.add(VC)):($.on(this._element,SC,t=>this._start(t)),$.on(this._element,CC,t=>this._move(t)),$.on(this._element,RC,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===OC||t.pointerType===NC)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const kC="carousel",$C="bs.carousel",os=`.${$C}`,C_=".data-api",FC="ArrowLeft",UC="ArrowRight",BC=500,Kr="next",Fs="prev",zs="left",Co="right",jC=`slide${os}`,Sl=`slid${os}`,HC=`keydown${os}`,KC=`mouseenter${os}`,qC=`mouseleave${os}`,WC=`dragstart${os}`,zC=`load${os}${C_}`,GC=`click${os}${C_}`,R_="carousel",oo="active",QC="slide",YC="carousel-item-end",XC="carousel-item-start",JC="carousel-item-next",ZC="carousel-item-prev",P_=".active",D_=".carousel-item",t0=P_+D_,e0=".carousel-item img",n0=".carousel-indicators",s0="[data-bs-slide], [data-bs-slide-to]",r0='[data-bs-ride="carousel"]',i0={[FC]:Co,[UC]:zs},o0={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},a0={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Vi extends qe{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=st.findOne(n0,this._element),this._addEventListeners(),this._config.ride===R_&&this.cycle()}static get Default(){return o0}static get DefaultType(){return a0}static get NAME(){return kC}next(){this._slide(Kr)}nextWhenVisible(){!document.hidden&&Sr(this._element)&&this.next()}prev(){this._slide(Fs)}pause(){this._isSliding&&g_(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){$.one(this._element,Sl,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){$.one(this._element,Sl,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const r=t>s?Kr:Fs;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&$.on(this._element,HC,t=>this._keydown(t)),this._config.pause==="hover"&&($.on(this._element,KC,()=>this.pause()),$.on(this._element,qC,()=>this._maybeEnableCycle())),this._config.touch&&na.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of st.find(e0,this._element))$.on(s,WC,r=>r.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(zs)),rightCallback:()=>this._slide(this._directionToOrder(Co)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),BC+this._config.interval))}};this._swipeHelper=new na(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=i0[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=st.findOne(P_,this._indicatorsElement);e.classList.remove(oo),e.removeAttribute("aria-current");const s=st.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(oo),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),r=t===Kr,i=e||Lu(this._getItems(),s,r,this._config.wrap);if(i===s)return;const a=this._getItemIndex(i),l=T=>$.trigger(this._element,T,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:a});if(l(jC).defaultPrevented||!s||!i)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=i;const d=r?XC:YC,m=r?JC:ZC;i.classList.add(m),Ni(i),s.classList.add(d),i.classList.add(d);const g=()=>{i.classList.remove(d,m),i.classList.add(oo),s.classList.remove(oo,m,d),this._isSliding=!1,l(Sl)};this._queueCallback(g,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(QC)}_getActive(){return st.findOne(t0,this._element)}_getItems(){return st.find(D_,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ke()?t===zs?Fs:Kr:t===zs?Kr:Fs}_orderToDirection(t){return ke()?t===Fs?zs:Co:t===Fs?Co:zs}static jQueryInterface(t){return this.each(function(){const e=Vi.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(document,GC,s0,function(n){const t=st.getElementFromSelector(this);if(!t||!t.classList.contains(R_))return;n.preventDefault();const e=Vi.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(En.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});$.on(window,zC,()=>{const n=st.find(r0);for(const t of n)Vi.getOrCreateInstance(t)});Fe(Vi);const l0="collapse",c0="bs.collapse",xi=`.${c0}`,u0=".data-api",h0=`show${xi}`,f0=`shown${xi}`,d0=`hide${xi}`,p0=`hidden${xi}`,m0=`click${xi}${u0}`,Cl="show",Qs="collapse",ao="collapsing",g0="collapsed",_0=`:scope .${Qs} .${Qs}`,y0="collapse-horizontal",E0="width",v0="height",T0=".collapse.show, .collapse.collapsing",vc='[data-bs-toggle="collapse"]',A0={parent:null,toggle:!0},b0={parent:"(null|element)",toggle:"boolean"};class Ai extends qe{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=st.find(vc);for(const r of s){const i=st.getSelectorFromElement(r),a=st.find(i).filter(l=>l===this._element);i!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return A0}static get DefaultType(){return b0}static get NAME(){return l0}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(T0).filter(l=>l!==this._element).map(l=>Ai.getOrCreateInstance(l,{toggle:!1}))),t.length&&t[0]._isTransitioning||$.trigger(this._element,h0).defaultPrevented)return;for(const l of t)l.hide();const s=this._getDimension();this._element.classList.remove(Qs),this._element.classList.add(ao),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(ao),this._element.classList.add(Qs,Cl),this._element.style[s]="",$.trigger(this._element,f0)},a=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,d0).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Ni(this._element),this._element.classList.add(ao),this._element.classList.remove(Qs,Cl);for(const r of this._triggerArray){const i=st.getElementFromSelector(r);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(ao),this._element.classList.add(Qs),$.trigger(this._element,p0)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Cl)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Jn(t.parent),t}_getDimension(){return this._element.classList.contains(y0)?E0:v0}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(vc);for(const e of t){const s=st.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=st.find(_0,this._config.parent);return st.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(g0,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=Ai.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}$.on(document,m0,vc,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of st.getMultipleElementsFromSelector(this))Ai.getOrCreateInstance(t,{toggle:!1}).toggle()});Fe(Ai);const Cd="dropdown",w0="bs.dropdown",Ns=`.${w0}`,ku=".data-api",I0="Escape",Rd="Tab",S0="ArrowUp",Pd="ArrowDown",C0=2,R0=`hide${Ns}`,P0=`hidden${Ns}`,D0=`show${Ns}`,N0=`shown${Ns}`,N_=`click${Ns}${ku}`,O_=`keydown${Ns}${ku}`,O0=`keyup${Ns}${ku}`,Gs="show",V0="dropup",x0="dropend",L0="dropstart",M0="dropup-center",k0="dropdown-center",ys='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',$0=`${ys}.${Gs}`,Ro=".dropdown-menu",F0=".navbar",U0=".navbar-nav",B0=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",j0=ke()?"top-end":"top-start",H0=ke()?"top-start":"top-end",K0=ke()?"bottom-end":"bottom-start",q0=ke()?"bottom-start":"bottom-end",W0=ke()?"left-start":"right-start",z0=ke()?"right-start":"left-start",G0="top",Q0="bottom",Y0={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},X0={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class sn extends qe{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=st.next(this._element,Ro)[0]||st.prev(this._element,Ro)[0]||st.findOne(Ro,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Y0}static get DefaultType(){return X0}static get NAME(){return Cd}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Zn(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!$.trigger(this._element,D0,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(U0))for(const s of[].concat(...document.body.children))$.on(s,"mouseover",ea);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gs),this._element.classList.add(Gs),$.trigger(this._element,N0,t)}}hide(){if(Zn(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!$.trigger(this._element,R0,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))$.off(s,"mouseover",ea);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gs),this._element.classList.remove(Gs),this._element.setAttribute("aria-expanded","false"),En.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,P0,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!yn(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Cd.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof p_>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:yn(this._config.reference)?t=Jn(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=xu(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Gs)}_getPlacement(){const t=this._parent;if(t.classList.contains(x0))return W0;if(t.classList.contains(L0))return z0;if(t.classList.contains(M0))return G0;if(t.classList.contains(k0))return Q0;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(V0)?e?H0:j0:e?q0:K0}_detectNavbar(){return this._element.closest(F0)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(En.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..._e(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const s=st.find(B0,this._menu).filter(r=>Sr(r));s.length&&Lu(s,e,t===Pd,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=sn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===C0||t.type==="keyup"&&t.key!==Rd)return;const e=st.find($0);for(const s of e){const r=sn.getInstance(s);if(!r||r._config.autoClose===!1)continue;const i=t.composedPath(),a=i.includes(r._menu);if(i.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Rd||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const l={relatedTarget:r._element};t.type==="click"&&(l.clickEvent=t),r._completeHide(l)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===I0,r=[S0,Pd].includes(t.key);if(!r&&!s||e&&!s)return;t.preventDefault();const i=this.matches(ys)?this:st.prev(this,ys)[0]||st.next(this,ys)[0]||st.findOne(ys,t.delegateTarget.parentNode),a=sn.getOrCreateInstance(i);if(r){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),i.focus())}}$.on(document,O_,ys,sn.dataApiKeydownHandler);$.on(document,O_,Ro,sn.dataApiKeydownHandler);$.on(document,N_,sn.clearMenus);$.on(document,O0,sn.clearMenus);$.on(document,N_,ys,function(n){n.preventDefault(),sn.getOrCreateInstance(this).toggle()});Fe(sn);const V_="backdrop",J0="fade",Dd="show",Nd=`mousedown.bs.${V_}`,Z0={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tR={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class x_ extends Oi{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Z0}static get DefaultType(){return tR}static get NAME(){return V_}show(t){if(!this._config.isVisible){_e(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Ni(e),e.classList.add(Dd),this._emulateAnimation(()=>{_e(t)})}hide(t){if(!this._config.isVisible){_e(t);return}this._getElement().classList.remove(Dd),this._emulateAnimation(()=>{this.dispose(),_e(t)})}dispose(){this._isAppended&&($.off(this._element,Nd),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(J0),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Jn(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),$.on(t,Nd,()=>{_e(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){E_(t,this._getElement(),this._config.isAnimated)}}const eR="focustrap",nR="bs.focustrap",sa=`.${nR}`,sR=`focusin${sa}`,rR=`keydown.tab${sa}`,iR="Tab",oR="forward",Od="backward",aR={autofocus:!0,trapElement:null},lR={autofocus:"boolean",trapElement:"element"};class L_ extends Oi{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return aR}static get DefaultType(){return lR}static get NAME(){return eR}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,sa),$.on(document,sR,t=>this._handleFocusin(t)),$.on(document,rR,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,sa))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=st.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===Od?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===iR&&(this._lastTabNavDirection=t.shiftKey?Od:oR)}}const Vd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",xd=".sticky-top",lo="padding-right",Ld="margin-right";class Tc{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,lo,e=>e+t),this._setElementAttributes(Vd,lo,e=>e+t),this._setElementAttributes(xd,Ld,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,lo),this._resetElementAttributes(Vd,lo),this._resetElementAttributes(xd,Ld)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const r=this.getWidth(),i=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,e);const l=window.getComputedStyle(a).getPropertyValue(e);a.style.setProperty(e,`${s(Number.parseFloat(l))}px`)};this._applyManipulationCallback(t,i)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&En.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=r=>{const i=En.getDataAttribute(r,e);if(i===null){r.style.removeProperty(e);return}En.removeDataAttribute(r,e),r.style.setProperty(e,i)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(yn(t)){e(t);return}for(const s of st.find(t,this._element))e(s)}}const cR="modal",uR="bs.modal",$e=`.${uR}`,hR=".data-api",fR="Escape",dR=`hide${$e}`,pR=`hidePrevented${$e}`,M_=`hidden${$e}`,k_=`show${$e}`,mR=`shown${$e}`,gR=`resize${$e}`,_R=`click.dismiss${$e}`,yR=`mousedown.dismiss${$e}`,ER=`keydown.dismiss${$e}`,vR=`click${$e}${hR}`,Md="modal-open",TR="fade",kd="show",Rl="modal-static",AR=".modal.show",bR=".modal-dialog",wR=".modal-body",IR='[data-bs-toggle="modal"]',SR={backdrop:!0,focus:!0,keyboard:!0},CR={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class _r extends qe{constructor(t,e){super(t,e),this._dialog=st.findOne(bR,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Tc,this._addEventListeners()}static get Default(){return SR}static get DefaultType(){return CR}static get NAME(){return cR}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||$.trigger(this._element,k_,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Md),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||$.trigger(this._element,dR).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(kd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){$.off(window,$e),$.off(this._dialog,$e),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new x_({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new L_({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=st.findOne(wR,this._dialog);e&&(e.scrollTop=0),Ni(this._element),this._element.classList.add(kd);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,mR,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,ER,t=>{if(t.key===fR){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),$.on(window,gR,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,yR,t=>{$.one(this._element,_R,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Md),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,M_)})}_isAnimated(){return this._element.classList.contains(TR)}_triggerBackdropTransition(){if($.trigger(this._element,pR).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(Rl)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Rl),this._queueCallback(()=>{this._element.classList.remove(Rl),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const r=ke()?"paddingLeft":"paddingRight";this._element.style[r]=`${e}px`}if(!s&&t){const r=ke()?"paddingRight":"paddingLeft";this._element.style[r]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=_r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}$.on(document,vR,IR,function(n){const t=st.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),$.one(t,k_,r=>{r.defaultPrevented||$.one(t,M_,()=>{Sr(this)&&this.focus()})});const e=st.findOne(AR);e&&_r.getInstance(e).hide(),_r.getOrCreateInstance(t).toggle(this)});Ma(_r);Fe(_r);const RR="offcanvas",PR="bs.offcanvas",Sn=`.${PR}`,$_=".data-api",DR=`load${Sn}${$_}`,NR="Escape",$d="show",Fd="showing",Ud="hiding",OR="offcanvas-backdrop",F_=".offcanvas.show",VR=`show${Sn}`,xR=`shown${Sn}`,LR=`hide${Sn}`,Bd=`hidePrevented${Sn}`,U_=`hidden${Sn}`,MR=`resize${Sn}`,kR=`click${Sn}${$_}`,$R=`keydown.dismiss${Sn}`,FR='[data-bs-toggle="offcanvas"]',UR={backdrop:!0,keyboard:!0,scroll:!1},BR={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ts extends qe{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return UR}static get DefaultType(){return BR}static get NAME(){return RR}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||$.trigger(this._element,VR,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Tc().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fd);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add($d),this._element.classList.remove(Fd),$.trigger(this._element,xR,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||$.trigger(this._element,LR).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ud),this._backdrop.hide();const e=()=>{this._element.classList.remove($d,Ud),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Tc().reset(),$.trigger(this._element,U_)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){$.trigger(this._element,Bd);return}this.hide()},e=!!this._config.backdrop;return new x_({className:OR,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new L_({trapElement:this._element})}_addEventListeners(){$.on(this._element,$R,t=>{if(t.key===NR){if(this._config.keyboard){this.hide();return}$.trigger(this._element,Bd)}})}static jQueryInterface(t){return this.each(function(){const e=ts.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}$.on(document,kR,FR,function(n){const t=st.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Zn(this))return;$.one(t,U_,()=>{Sr(this)&&this.focus()});const e=st.findOne(F_);e&&e!==t&&ts.getInstance(e).hide(),ts.getOrCreateInstance(t).toggle(this)});$.on(window,DR,()=>{for(const n of st.find(F_))ts.getOrCreateInstance(n).show()});$.on(window,MR,()=>{for(const n of st.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&ts.getOrCreateInstance(n).hide()});Ma(ts);Fe(ts);const jR=/^aria-[\w-]*$/i,B_={"*":["class","dir","id","lang","role",jR],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},HR=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),KR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,qR=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?HR.has(e)?!!KR.test(n.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function WR(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const r=new window.DOMParser().parseFromString(n,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const a of i){const l=a.nodeName.toLowerCase();if(!Object.keys(t).includes(l)){a.remove();continue}const c=[].concat(...a.attributes),h=[].concat(t["*"]||[],t[l]||[]);for(const d of c)qR(d,h)||a.removeAttribute(d.nodeName)}return r.body.innerHTML}const zR="TemplateFactory",GR={allowList:B_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},QR={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},YR={entry:"(string|element|function|null)",selector:"(string|element)"};class XR extends Oi{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return GR}static get DefaultType(){return QR}static get NAME(){return zR}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},YR)}_setContent(t,e,s){const r=st.findOne(s,t);if(r){if(e=this._resolvePossibleFunction(e),!e){r.remove();return}if(yn(e)){this._putElementInTemplate(Jn(e),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(e);return}r.textContent=e}}_maybeSanitize(t){return this._config.sanitize?WR(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return _e(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const JR="tooltip",ZR=new Set(["sanitize","allowList","sanitizeFn"]),Pl="fade",tP="modal",co="show",eP=".tooltip-inner",jd=`.${tP}`,Hd="hide.bs.modal",qr="hover",Dl="focus",nP="click",sP="manual",rP="hide",iP="hidden",oP="show",aP="shown",lP="inserted",cP="click",uP="focusin",hP="focusout",fP="mouseenter",dP="mouseleave",pP={AUTO:"auto",TOP:"top",RIGHT:ke()?"left":"right",BOTTOM:"bottom",LEFT:ke()?"right":"left"},mP={allowList:B_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},gP={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Rr extends qe{constructor(t,e){if(typeof p_>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return mP}static get DefaultType(){return gP}static get NAME(){return JR}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(jd),Hd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=$.trigger(this._element,this.constructor.eventName(oP)),s=(__(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),$.trigger(this._element,this.constructor.eventName(lP))),this._popper=this._createPopper(r),r.classList.add(co),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))$.on(l,"mouseover",ea);const a=()=>{$.trigger(this._element,this.constructor.eventName(aP)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||$.trigger(this._element,this.constructor.eventName(rP)).defaultPrevented)return;if(this._getTipElement().classList.remove(co),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))$.off(r,"mouseover",ea);this._activeTrigger[nP]=!1,this._activeTrigger[Dl]=!1,this._activeTrigger[qr]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName(iP)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Pl,co),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=nC(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(Pl),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new XR({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[eP]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Pl)}_isShown(){return this.tip&&this.tip.classList.contains(co)}_createPopper(t){const e=_e(this._config.placement,[this,t,this._element]),s=pP[e.toUpperCase()];return xu(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return _e(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,..._e(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")$.on(this._element,this.constructor.eventName(cP),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(e!==sP){const s=e===qr?this.constructor.eventName(fP):this.constructor.eventName(uP),r=e===qr?this.constructor.eventName(dP):this.constructor.eventName(hP);$.on(this._element,s,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusin"?Dl:qr]=!0,a._enter()}),$.on(this._element,r,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusout"?Dl:qr]=a._element.contains(i.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(jd),Hd,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=En.getDataAttributes(this._element);for(const s of Object.keys(e))ZR.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Jn(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Rr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Fe(Rr);const _P="popover",yP=".popover-header",EP=".popover-body",vP={...Rr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},TP={...Rr.DefaultType,content:"(null|string|element|function)"};class $u extends Rr{static get Default(){return vP}static get DefaultType(){return TP}static get NAME(){return _P}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[yP]:this._getTitle(),[EP]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=$u.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Fe($u);const AP="scrollspy",bP="bs.scrollspy",Fu=`.${bP}`,wP=".data-api",IP=`activate${Fu}`,Kd=`click${Fu}`,SP=`load${Fu}${wP}`,CP="dropdown-item",Us="active",RP='[data-bs-spy="scroll"]',Nl="[href]",PP=".nav, .list-group",qd=".nav-link",DP=".nav-item",NP=".list-group-item",OP=`${qd}, ${DP} > ${qd}, ${NP}`,VP=".dropdown",xP=".dropdown-toggle",LP={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},MP={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Fa extends qe{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return LP}static get DefaultType(){return MP}static get NAME(){return AP}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Jn(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,Kd),$.on(this._config.target,Kd,Nl,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=a=>this._targetLinks.get(`#${a.target.id}`),s=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(e(a))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(a));continue}const l=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&l){if(s(a),!r)return;continue}!i&&!l&&s(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=st.find(Nl,this._config.target);for(const e of t){if(!e.hash||Zn(e))continue;const s=st.findOne(decodeURI(e.hash),this._element);Sr(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Us),this._activateParents(t),$.trigger(this._element,IP,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(CP)){st.findOne(xP,t.closest(VP)).classList.add(Us);return}for(const e of st.parents(t,PP))for(const s of st.prev(e,OP))s.classList.add(Us)}_clearActiveClass(t){t.classList.remove(Us);const e=st.find(`${Nl}.${Us}`,t);for(const s of e)s.classList.remove(Us)}static jQueryInterface(t){return this.each(function(){const e=Fa.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(window,SP,()=>{for(const n of st.find(RP))Fa.getOrCreateInstance(n)});Fe(Fa);const kP="tab",$P="bs.tab",Os=`.${$P}`,FP=`hide${Os}`,UP=`hidden${Os}`,BP=`show${Os}`,jP=`shown${Os}`,HP=`click${Os}`,KP=`keydown${Os}`,qP=`load${Os}`,WP="ArrowLeft",Wd="ArrowRight",zP="ArrowUp",zd="ArrowDown",Ol="Home",Gd="End",Es="active",Qd="fade",Vl="show",GP="dropdown",j_=".dropdown-toggle",QP=".dropdown-menu",xl=`:not(${j_})`,YP='.list-group, .nav, [role="tablist"]',XP=".nav-item, .list-group-item",JP=`.nav-link${xl}, .list-group-item${xl}, [role="tab"]${xl}`,H_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ll=`${JP}, ${H_}`,ZP=`.${Es}[data-bs-toggle="tab"], .${Es}[data-bs-toggle="pill"], .${Es}[data-bs-toggle="list"]`;class yr extends qe{constructor(t){super(t),this._parent=this._element.closest(YP),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,KP,e=>this._keydown(e)))}static get NAME(){return kP}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?$.trigger(e,FP,{relatedTarget:t}):null;$.trigger(t,BP,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Es),this._activate(st.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Vl);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),$.trigger(t,jP,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Qd))}_deactivate(t,e){if(!t)return;t.classList.remove(Es),t.blur(),this._deactivate(st.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Vl);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),$.trigger(t,UP,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Qd))}_keydown(t){if(![WP,Wd,zP,zd,Ol,Gd].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(r=>!Zn(r));let s;if([Ol,Gd].includes(t.key))s=e[t.key===Ol?0:e.length-1];else{const r=[Wd,zd].includes(t.key);s=Lu(e,t.target,r,!0)}s&&(s.focus({preventScroll:!0}),yr.getOrCreateInstance(s).show())}_getChildren(){return st.find(Ll,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=st.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(GP))return;const r=(i,a)=>{const l=st.findOne(i,s);l&&l.classList.toggle(a,e)};r(j_,Es),r(QP,Vl),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(Es)}_getInnerElement(t){return t.matches(Ll)?t:st.findOne(Ll,t)}_getOuterElement(t){return t.closest(XP)||t}static jQueryInterface(t){return this.each(function(){const e=yr.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(document,HP,H_,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Zn(this)&&yr.getOrCreateInstance(this).show()});$.on(window,qP,()=>{for(const n of st.find(ZP))yr.getOrCreateInstance(n)});Fe(yr);const tD="toast",eD="bs.toast",as=`.${eD}`,nD=`mouseover${as}`,sD=`mouseout${as}`,rD=`focusin${as}`,iD=`focusout${as}`,oD=`hide${as}`,aD=`hidden${as}`,lD=`show${as}`,cD=`shown${as}`,uD="fade",Yd="hide",uo="show",ho="showing",hD={animation:"boolean",autohide:"boolean",delay:"number"},fD={animation:!0,autohide:!0,delay:5e3};class Ua extends qe{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return fD}static get DefaultType(){return hD}static get NAME(){return tD}show(){if($.trigger(this._element,lD).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(uD);const e=()=>{this._element.classList.remove(ho),$.trigger(this._element,cD),this._maybeScheduleHide()};this._element.classList.remove(Yd),Ni(this._element),this._element.classList.add(uo,ho),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||$.trigger(this._element,oD).defaultPrevented)return;const e=()=>{this._element.classList.add(Yd),this._element.classList.remove(ho,uo),$.trigger(this._element,aD)};this._element.classList.add(ho),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(uo),super.dispose()}isShown(){return this._element.classList.contains(uo)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,nD,t=>this._onInteraction(t,!0)),$.on(this._element,sD,t=>this._onInteraction(t,!1)),$.on(this._element,rD,t=>this._onInteraction(t,!0)),$.on(this._element,iD,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Ua.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Ma(Ua);Fe(Ua);const dD=Mv(fS);dD.mount("#app");
