var ay=Object.defineProperty;var ly=(n,t,e)=>t in n?ay(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var Ch=(n,t,e)=>ly(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=e(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yc(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const It={},Ys=[],Xe=()=>{},cy=()=>!1,Jo=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Ec=n=>n.startsWith("onUpdate:"),ae=Object.assign,vc=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},uy=Object.prototype.hasOwnProperty,At=(n,t)=>uy.call(n,t),ct=Array.isArray,Xs=n=>Zo(n)==="[object Map]",Wd=n=>Zo(n)==="[object Set]",ht=n=>typeof n=="function",kt=n=>typeof n=="string",ts=n=>typeof n=="symbol",Nt=n=>n!==null&&typeof n=="object",qd=n=>(Nt(n)||ht(n))&&ht(n.then)&&ht(n.catch),zd=Object.prototype.toString,Zo=n=>zd.call(n),hy=n=>Zo(n).slice(8,-1),Gd=n=>Zo(n)==="[object Object]",Tc=n=>kt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Yr=yc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ta=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},fy=/-(\w)/g,Hn=ta(n=>n.replace(fy,(t,e)=>e?e.toUpperCase():"")),dy=/\B([A-Z])/g,Rs=ta(n=>n.replace(dy,"-$1").toLowerCase()),Qd=ta(n=>n.charAt(0).toUpperCase()+n.slice(1)),Qa=ta(n=>n?`on${Qd(n)}`:""),$n=(n,t)=>!Object.is(n,t),uo=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},Yd=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Nl=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let Rh;const ea=()=>Rh||(Rh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ac(n){if(ct(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],r=kt(s)?_y(s):Ac(s);if(r)for(const i in r)t[i]=r[i]}return t}else if(kt(n)||Nt(n))return n}const py=/;(?![^(]*\))/g,my=/:([^]+)/,gy=/\/\*[^]*?\*\//g;function _y(n){const t={};return n.replace(gy,"").split(py).forEach(e=>{if(e){const s=e.split(my);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function na(n){let t="";if(kt(n))t=n;else if(ct(n))for(let e=0;e<n.length;e++){const s=na(n[e]);s&&(t+=s+" ")}else if(Nt(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const yy="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ey=yc(yy);function Xd(n){return!!n||n===""}const Jd=n=>!!(n&&n.__v_isRef===!0),xn=n=>kt(n)?n:n==null?"":ct(n)||Nt(n)&&(n.toString===zd||!ht(n.toString))?Jd(n)?xn(n.value):JSON.stringify(n,Zd,2):String(n),Zd=(n,t)=>Jd(t)?Zd(n,t.value):Xs(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,r],i)=>(e[Ya(s,i)+" =>"]=r,e),{})}:Wd(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Ya(e))}:ts(t)?Ya(t):Nt(t)&&!ct(t)&&!Gd(t)?String(t):t,Ya=(n,t="")=>{var e;return ts(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let be;class vy{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=be,!t&&be&&(this.index=(be.scopes||(be.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=be;try{return be=this,t()}finally{be=e}}}on(){be=this}off(){be=this.parent}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Ty(){return be}let St;const Xa=new WeakSet;class tp{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,be&&be.active&&be.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xa.has(this)&&(Xa.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||np(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ph(this),sp(this);const t=St,e=je;St=this,je=!0;try{return this.fn()}finally{rp(this),St=t,je=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ic(t);this.deps=this.depsTail=void 0,Ph(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xa.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ol(this)&&this.run()}get dirty(){return Ol(this)}}let ep=0,Xr,Jr;function np(n,t=!1){if(n.flags|=8,t){n.next=Jr,Jr=n;return}n.next=Xr,Xr=n}function bc(){ep++}function wc(){if(--ep>0)return;if(Jr){let t=Jr;for(Jr=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;Xr;){let t=Xr;for(Xr=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function sp(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function rp(n){let t,e=n.depsTail,s=e;for(;s;){const r=s.prevDep;s.version===-1?(s===e&&(e=r),Ic(s),Ay(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}n.deps=t,n.depsTail=e}function Ol(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ip(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function ip(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===li))return;n.globalVersion=li;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Ol(n)){n.flags&=-3;return}const e=St,s=je;St=n,je=!0;try{sp(n);const r=n.fn(n._value);(t.version===0||$n(r,n._value))&&(n._value=r,t.version++)}catch(r){throw t.version++,r}finally{St=e,je=s,rp(n),n.flags&=-3}}function Ic(n,t=!1){const{dep:e,prevSub:s,nextSub:r}=n;if(s&&(s.nextSub=r,n.prevSub=void 0),r&&(r.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let i=e.computed.deps;i;i=i.nextDep)Ic(i,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Ay(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let je=!0;const op=[];function es(){op.push(je),je=!1}function ns(){const n=op.pop();je=n===void 0?!0:n}function Ph(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=St;St=void 0;try{t()}finally{St=e}}}let li=0;class by{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!St||!je||St===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==St)e=this.activeLink=new by(St,this),St.deps?(e.prevDep=St.depsTail,St.depsTail.nextDep=e,St.depsTail=e):St.deps=St.depsTail=e,ap(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=St.depsTail,e.nextDep=void 0,St.depsTail.nextDep=e,St.depsTail=e,St.deps===e&&(St.deps=s)}return e}trigger(t){this.version++,li++,this.notify(t)}notify(t){bc();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{wc()}}}function ap(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)ap(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const Vl=new WeakMap,vs=Symbol(""),xl=Symbol(""),ci=Symbol("");function se(n,t,e){if(je&&St){let s=Vl.get(n);s||Vl.set(n,s=new Map);let r=s.get(e);r||(s.set(e,r=new Sc),r.map=s,r.key=e),r.track()}}function dn(n,t,e,s,r,i){const a=Vl.get(n);if(!a){li++;return}const l=c=>{c&&c.trigger()};if(bc(),t==="clear")a.forEach(l);else{const c=ct(n),h=c&&Tc(e);if(c&&e==="length"){const d=Number(s);a.forEach((p,_)=>{(_==="length"||_===ci||!ts(_)&&_>=d)&&l(p)})}else switch((e!==void 0||a.has(void 0))&&l(a.get(e)),h&&l(a.get(ci)),t){case"add":c?h&&l(a.get("length")):(l(a.get(vs)),Xs(n)&&l(a.get(xl)));break;case"delete":c||(l(a.get(vs)),Xs(n)&&l(a.get(xl)));break;case"set":Xs(n)&&l(a.get(vs));break}}wc()}function ks(n){const t=Tt(n);return t===n?t:(se(t,"iterate",ci),Le(n)?t:t.map(re))}function sa(n){return se(n=Tt(n),"iterate",ci),n}const wy={__proto__:null,[Symbol.iterator](){return Ja(this,Symbol.iterator,re)},concat(...n){return ks(this).concat(...n.map(t=>ct(t)?ks(t):t))},entries(){return Ja(this,"entries",n=>(n[1]=re(n[1]),n))},every(n,t){return hn(this,"every",n,t,void 0,arguments)},filter(n,t){return hn(this,"filter",n,t,e=>e.map(re),arguments)},find(n,t){return hn(this,"find",n,t,re,arguments)},findIndex(n,t){return hn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return hn(this,"findLast",n,t,re,arguments)},findLastIndex(n,t){return hn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return hn(this,"forEach",n,t,void 0,arguments)},includes(...n){return Za(this,"includes",n)},indexOf(...n){return Za(this,"indexOf",n)},join(n){return ks(this).join(n)},lastIndexOf(...n){return Za(this,"lastIndexOf",n)},map(n,t){return hn(this,"map",n,t,void 0,arguments)},pop(){return Br(this,"pop")},push(...n){return Br(this,"push",n)},reduce(n,...t){return Dh(this,"reduce",n,t)},reduceRight(n,...t){return Dh(this,"reduceRight",n,t)},shift(){return Br(this,"shift")},some(n,t){return hn(this,"some",n,t,void 0,arguments)},splice(...n){return Br(this,"splice",n)},toReversed(){return ks(this).toReversed()},toSorted(n){return ks(this).toSorted(n)},toSpliced(...n){return ks(this).toSpliced(...n)},unshift(...n){return Br(this,"unshift",n)},values(){return Ja(this,"values",re)}};function Ja(n,t,e){const s=sa(n),r=s[t]();return s!==n&&!Le(n)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=e(i.value)),i}),r}const Iy=Array.prototype;function hn(n,t,e,s,r,i){const a=sa(n),l=a!==n&&!Le(n),c=a[t];if(c!==Iy[t]){const p=c.apply(n,i);return l?re(p):p}let h=e;a!==n&&(l?h=function(p,_){return e.call(this,re(p),_,n)}:e.length>2&&(h=function(p,_){return e.call(this,p,_,n)}));const d=c.call(a,h,s);return l&&r?r(d):d}function Dh(n,t,e,s){const r=sa(n);let i=e;return r!==n&&(Le(n)?e.length>3&&(i=function(a,l,c){return e.call(this,a,l,c,n)}):i=function(a,l,c){return e.call(this,a,re(l),c,n)}),r[t](i,...s)}function Za(n,t,e){const s=Tt(n);se(s,"iterate",ci);const r=s[t](...e);return(r===-1||r===!1)&&Dc(e[0])?(e[0]=Tt(e[0]),s[t](...e)):r}function Br(n,t,e=[]){es(),bc();const s=Tt(n)[t].apply(n,e);return wc(),ns(),s}const Sy=yc("__proto__,__v_isRef,__isVue"),lp=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ts));function Cy(n){ts(n)||(n=String(n));const t=Tt(this);return se(t,"has",n),t.hasOwnProperty(n)}class cp{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return i;if(e==="__v_raw")return s===(r?i?ky:dp:i?fp:hp).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const a=ct(t);if(!r){let c;if(a&&(c=wy[e]))return c;if(e==="hasOwnProperty")return Cy}const l=Reflect.get(t,e,oe(t)?t:s);return(ts(e)?lp.has(e):Sy(e))||(r||se(t,"get",e),i)?l:oe(l)?a&&Tc(e)?l:l.value:Nt(l)?r?pp(l):Rc(l):l}}class up extends cp{constructor(t=!1){super(!1,t)}set(t,e,s,r){let i=t[e];if(!this._isShallow){const c=As(i);if(!Le(s)&&!As(s)&&(i=Tt(i),s=Tt(s)),!ct(t)&&oe(i)&&!oe(s))return c?!1:(i.value=s,!0)}const a=ct(t)&&Tc(e)?Number(e)<t.length:At(t,e),l=Reflect.set(t,e,s,oe(t)?t:r);return t===Tt(r)&&(a?$n(s,i)&&dn(t,"set",e,s):dn(t,"add",e,s)),l}deleteProperty(t,e){const s=At(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&s&&dn(t,"delete",e,void 0),r}has(t,e){const s=Reflect.has(t,e);return(!ts(e)||!lp.has(e))&&se(t,"has",e),s}ownKeys(t){return se(t,"iterate",ct(t)?"length":vs),Reflect.ownKeys(t)}}class Ry extends cp{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Py=new up,Dy=new Ry,Ny=new up(!0);const Ll=n=>n,Qi=n=>Reflect.getPrototypeOf(n);function Oy(n,t,e){return function(...s){const r=this.__v_raw,i=Tt(r),a=Xs(i),l=n==="entries"||n===Symbol.iterator&&a,c=n==="keys"&&a,h=r[n](...s),d=e?Ll:t?Ml:re;return!t&&se(i,"iterate",c?xl:vs),{next(){const{value:p,done:_}=h.next();return _?{value:p,done:_}:{value:l?[d(p[0]),d(p[1])]:d(p),done:_}},[Symbol.iterator](){return this}}}}function Yi(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function Vy(n,t){const e={get(r){const i=this.__v_raw,a=Tt(i),l=Tt(r);n||($n(r,l)&&se(a,"get",r),se(a,"get",l));const{has:c}=Qi(a),h=t?Ll:n?Ml:re;if(c.call(a,r))return h(i.get(r));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!n&&se(Tt(r),"iterate",vs),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,a=Tt(i),l=Tt(r);return n||($n(r,l)&&se(a,"has",r),se(a,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const a=this,l=a.__v_raw,c=Tt(l),h=t?Ll:n?Ml:re;return!n&&se(c,"iterate",vs),l.forEach((d,p)=>r.call(i,h(d),h(p),a))}};return ae(e,n?{add:Yi("add"),set:Yi("set"),delete:Yi("delete"),clear:Yi("clear")}:{add(r){!t&&!Le(r)&&!As(r)&&(r=Tt(r));const i=Tt(this);return Qi(i).has.call(i,r)||(i.add(r),dn(i,"add",r,r)),this},set(r,i){!t&&!Le(i)&&!As(i)&&(i=Tt(i));const a=Tt(this),{has:l,get:c}=Qi(a);let h=l.call(a,r);h||(r=Tt(r),h=l.call(a,r));const d=c.call(a,r);return a.set(r,i),h?$n(i,d)&&dn(a,"set",r,i):dn(a,"add",r,i),this},delete(r){const i=Tt(this),{has:a,get:l}=Qi(i);let c=a.call(i,r);c||(r=Tt(r),c=a.call(i,r)),l&&l.call(i,r);const h=i.delete(r);return c&&dn(i,"delete",r,void 0),h},clear(){const r=Tt(this),i=r.size!==0,a=r.clear();return i&&dn(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Oy(r,n,t)}),e}function Cc(n,t){const e=Vy(n,t);return(s,r,i)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?s:Reflect.get(At(e,r)&&r in s?e:s,r,i)}const xy={get:Cc(!1,!1)},Ly={get:Cc(!1,!0)},My={get:Cc(!0,!1)};const hp=new WeakMap,fp=new WeakMap,dp=new WeakMap,ky=new WeakMap;function $y(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Fy(n){return n.__v_skip||!Object.isExtensible(n)?0:$y(hy(n))}function Rc(n){return As(n)?n:Pc(n,!1,Py,xy,hp)}function Uy(n){return Pc(n,!1,Ny,Ly,fp)}function pp(n){return Pc(n,!0,Dy,My,dp)}function Pc(n,t,e,s,r){if(!Nt(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const i=r.get(n);if(i)return i;const a=Fy(n);if(a===0)return n;const l=new Proxy(n,a===2?s:e);return r.set(n,l),l}function Js(n){return As(n)?Js(n.__v_raw):!!(n&&n.__v_isReactive)}function As(n){return!!(n&&n.__v_isReadonly)}function Le(n){return!!(n&&n.__v_isShallow)}function Dc(n){return n?!!n.__v_raw:!1}function Tt(n){const t=n&&n.__v_raw;return t?Tt(t):n}function By(n){return!At(n,"__v_skip")&&Object.isExtensible(n)&&Yd(n,"__v_skip",!0),n}const re=n=>Nt(n)?Rc(n):n,Ml=n=>Nt(n)?pp(n):n;function oe(n){return n?n.__v_isRef===!0:!1}function ze(n){return jy(n,!1)}function jy(n,t){return oe(n)?n:new Hy(n,t)}class Hy{constructor(t,e){this.dep=new Sc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Tt(t),this._value=e?t:re(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Le(t)||As(t);t=s?t:Tt(t),$n(t,e)&&(this._rawValue=t,this._value=s?t:re(t),this.dep.trigger())}}function kl(n){return oe(n)?n.value:n}const Ky={get:(n,t,e)=>t==="__v_raw"?n:kl(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const r=n[t];return oe(r)&&!oe(e)?(r.value=e,!0):Reflect.set(n,t,e,s)}};function mp(n){return Js(n)?n:new Proxy(n,Ky)}class Wy{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Sc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=li-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&St!==this)return np(this,!0),!0}get value(){const t=this.dep.track();return ip(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function qy(n,t,e=!1){let s,r;return ht(n)?s=n:(s=n.get,r=n.set),new Wy(s,r,e)}const Xi={},So=new WeakMap;let ps;function zy(n,t=!1,e=ps){if(e){let s=So.get(e);s||So.set(e,s=[]),s.push(n)}}function Gy(n,t,e=It){const{immediate:s,deep:r,once:i,scheduler:a,augmentJob:l,call:c}=e,h=L=>r?L:Le(L)||r===!1||r===0?pn(L,1):pn(L);let d,p,_,b,D=!1,N=!1;if(oe(n)?(p=()=>n.value,D=Le(n)):Js(n)?(p=()=>h(n),D=!0):ct(n)?(N=!0,D=n.some(L=>Js(L)||Le(L)),p=()=>n.map(L=>{if(oe(L))return L.value;if(Js(L))return h(L);if(ht(L))return c?c(L,2):L()})):ht(n)?t?p=c?()=>c(n,2):n:p=()=>{if(_){es();try{_()}finally{ns()}}const L=ps;ps=d;try{return c?c(n,3,[b]):n(b)}finally{ps=L}}:p=Xe,t&&r){const L=p,X=r===!0?1/0:r;p=()=>pn(L(),X)}const O=Ty(),H=()=>{d.stop(),O&&O.active&&vc(O.effects,d)};if(i&&t){const L=t;t=(...X)=>{L(...X),H()}}let z=N?new Array(n.length).fill(Xi):Xi;const G=L=>{if(!(!(d.flags&1)||!d.dirty&&!L))if(t){const X=d.run();if(r||D||(N?X.some((Z,A)=>$n(Z,z[A])):$n(X,z))){_&&_();const Z=ps;ps=d;try{const A=[X,z===Xi?void 0:N&&z[0]===Xi?[]:z,b];c?c(t,3,A):t(...A),z=X}finally{ps=Z}}}else d.run()};return l&&l(G),d=new tp(p),d.scheduler=a?()=>a(G,!1):G,b=L=>zy(L,!1,d),_=d.onStop=()=>{const L=So.get(d);if(L){if(c)c(L,4);else for(const X of L)X();So.delete(d)}},t?s?G(!0):z=d.run():a?a(G.bind(null,!0),!0):d.run(),H.pause=d.pause.bind(d),H.resume=d.resume.bind(d),H.stop=H,H}function pn(n,t=1/0,e){if(t<=0||!Nt(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,oe(n))pn(n.value,t,e);else if(ct(n))for(let s=0;s<n.length;s++)pn(n[s],t,e);else if(Wd(n)||Xs(n))n.forEach(s=>{pn(s,t,e)});else if(Gd(n)){for(const s in n)pn(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&pn(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ai(n,t,e,s){try{return s?n(...s):n()}catch(r){ra(r,t,e)}}function sn(n,t,e,s){if(ht(n)){const r=Ai(n,t,e,s);return r&&qd(r)&&r.catch(i=>{ra(i,t,e)}),r}if(ct(n)){const r=[];for(let i=0;i<n.length;i++)r.push(sn(n[i],t,e,s));return r}}function ra(n,t,e,s=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](n,c,h)===!1)return}l=l.parent}if(i){es(),Ai(i,null,10,[n,c,h]),ns();return}}Qy(n,e,r,s,a)}function Qy(n,t,e,s=!0,r=!1){if(r)throw n;console.error(n)}const ue=[];let Ge=-1;const Zs=[];let Ln=null,Us=0;const gp=Promise.resolve();let Co=null;function Yy(n){const t=Co||gp;return n?t.then(this?n.bind(this):n):t}function Xy(n){let t=Ge+1,e=ue.length;for(;t<e;){const s=t+e>>>1,r=ue[s],i=ui(r);i<n||i===n&&r.flags&2?t=s+1:e=s}return t}function Nc(n){if(!(n.flags&1)){const t=ui(n),e=ue[ue.length-1];!e||!(n.flags&2)&&t>=ui(e)?ue.push(n):ue.splice(Xy(t),0,n),n.flags|=1,_p()}}function _p(){Co||(Co=gp.then(Ep))}function Jy(n){ct(n)?Zs.push(...n):Ln&&n.id===-1?Ln.splice(Us+1,0,n):n.flags&1||(Zs.push(n),n.flags|=1),_p()}function Nh(n,t,e=Ge+1){for(;e<ue.length;e++){const s=ue[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;ue.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function yp(n){if(Zs.length){const t=[...new Set(Zs)].sort((e,s)=>ui(e)-ui(s));if(Zs.length=0,Ln){Ln.push(...t);return}for(Ln=t,Us=0;Us<Ln.length;Us++){const e=Ln[Us];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Ln=null,Us=0}}const ui=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Ep(n){try{for(Ge=0;Ge<ue.length;Ge++){const t=ue[Ge];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ai(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ge<ue.length;Ge++){const t=ue[Ge];t&&(t.flags&=-2)}Ge=-1,ue.length=0,yp(),Co=null,(ue.length||Zs.length)&&Ep()}}let xe=null,vp=null;function Ro(n){const t=xe;return xe=n,vp=n&&n.type.__scopeId||null,t}function Zy(n,t=xe,e){if(!t||n._n)return n;const s=(...r)=>{s._d&&Uh(-1);const i=Ro(t);let a;try{a=n(...r)}finally{Ro(i),s._d&&Uh(1)}return a};return s._n=!0,s._c=!0,s._d=!0,s}function Nn(n,t){if(xe===null)return n;const e=la(xe),s=n.dirs||(n.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,l,c=It]=t[r];i&&(ht(i)&&(i={mounted:i,updated:i}),i.deep&&pn(a),s.push({dir:i,instance:e,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function fs(n,t,e,s){const r=n.dirs,i=t&&t.dirs;for(let a=0;a<r.length;a++){const l=r[a];i&&(l.oldValue=i[a].value);let c=l.dir[s];c&&(es(),sn(c,e,8,[n.el,l,n,t]),ns())}}const tE=Symbol("_vte"),eE=n=>n.__isTeleport;function Oc(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Oc(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Vc(n,t){return ht(n)?ae({name:n.name},t,{setup:n}):n}function Tp(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Po(n,t,e,s,r=!1){if(ct(n)){n.forEach((D,N)=>Po(D,t&&(ct(t)?t[N]:t),e,s,r));return}if(Zr(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Po(n,t,e,s.component.subTree);return}const i=s.shapeFlag&4?la(s.component):s.el,a=r?null:i,{i:l,r:c}=n,h=t&&t.r,d=l.refs===It?l.refs={}:l.refs,p=l.setupState,_=Tt(p),b=p===It?()=>!1:D=>At(_,D);if(h!=null&&h!==c&&(kt(h)?(d[h]=null,b(h)&&(p[h]=null)):oe(h)&&(h.value=null)),ht(c))Ai(c,l,12,[a,d]);else{const D=kt(c),N=oe(c);if(D||N){const O=()=>{if(n.f){const H=D?b(c)?p[c]:d[c]:c.value;r?ct(H)&&vc(H,i):ct(H)?H.includes(i)||H.push(i):D?(d[c]=[i],b(c)&&(p[c]=d[c])):(c.value=[i],n.k&&(d[n.k]=c.value))}else D?(d[c]=a,b(c)&&(p[c]=a)):N&&(c.value=a,n.k&&(d[n.k]=a))};a?(O.id=-1,Ae(O,e)):O()}}}ea().requestIdleCallback;ea().cancelIdleCallback;const Zr=n=>!!n.type.__asyncLoader,Ap=n=>n.type.__isKeepAlive;function nE(n,t){bp(n,"a",t)}function sE(n,t){bp(n,"da",t)}function bp(n,t,e=he){const s=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ia(t,s,e),e){let r=e.parent;for(;r&&r.parent;)Ap(r.parent.vnode)&&rE(s,t,e,r),r=r.parent}}function rE(n,t,e,s){const r=ia(t,n,s,!0);Ip(()=>{vc(s[t],r)},e)}function ia(n,t,e=he,s=!1){if(e){const r=e[n]||(e[n]=[]),i=t.__weh||(t.__weh=(...a)=>{es();const l=bi(e),c=sn(t,e,n,a);return l(),ns(),c});return s?r.unshift(i):r.push(i),i}}const wn=n=>(t,e=he)=>{(!fi||n==="sp")&&ia(n,(...s)=>t(...s),e)},iE=wn("bm"),wp=wn("m"),oE=wn("bu"),aE=wn("u"),lE=wn("bum"),Ip=wn("um"),cE=wn("sp"),uE=wn("rtg"),hE=wn("rtc");function fE(n,t=he){ia("ec",n,t)}const dE=Symbol.for("v-ndc");function pE(n,t,e,s){let r;const i=e,a=ct(n);if(a||kt(n)){const l=a&&Js(n);let c=!1;l&&(c=!Le(n),n=sa(n)),r=new Array(n.length);for(let h=0,d=n.length;h<d;h++)r[h]=t(c?re(n[h]):n[h],h,void 0,i)}else if(typeof n=="number"){r=new Array(n);for(let l=0;l<n;l++)r[l]=t(l+1,l,void 0,i)}else if(Nt(n))if(n[Symbol.iterator])r=Array.from(n,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(n);r=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];r[c]=t(n[d],d,c,i)}}else r=[];return r}const $l=n=>n?Gp(n)?la(n):$l(n.parent):null,ti=ae(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>$l(n.parent),$root:n=>$l(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Cp(n),$forceUpdate:n=>n.f||(n.f=()=>{Nc(n.update)}),$nextTick:n=>n.n||(n.n=Yy.bind(n.proxy)),$watch:n=>ME.bind(n)}),tl=(n,t)=>n!==It&&!n.__isScriptSetup&&At(n,t),mE={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:r,props:i,accessCache:a,type:l,appContext:c}=n;let h;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return s[t];case 2:return r[t];case 4:return e[t];case 3:return i[t]}else{if(tl(s,t))return a[t]=1,s[t];if(r!==It&&At(r,t))return a[t]=2,r[t];if((h=n.propsOptions[0])&&At(h,t))return a[t]=3,i[t];if(e!==It&&At(e,t))return a[t]=4,e[t];Fl&&(a[t]=0)}}const d=ti[t];let p,_;if(d)return t==="$attrs"&&se(n.attrs,"get",""),d(n);if((p=l.__cssModules)&&(p=p[t]))return p;if(e!==It&&At(e,t))return a[t]=4,e[t];if(_=c.config.globalProperties,At(_,t))return _[t]},set({_:n},t,e){const{data:s,setupState:r,ctx:i}=n;return tl(r,t)?(r[t]=e,!0):s!==It&&At(s,t)?(s[t]=e,!0):At(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(i[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:r,propsOptions:i}},a){let l;return!!e[a]||n!==It&&At(n,a)||tl(t,a)||(l=i[0])&&At(l,a)||At(s,a)||At(ti,a)||At(r.config.globalProperties,a)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:At(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Oh(n){return ct(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Fl=!0;function gE(n){const t=Cp(n),e=n.proxy,s=n.ctx;Fl=!1,t.beforeCreate&&Vh(t.beforeCreate,n,"bc");const{data:r,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:_,beforeUpdate:b,updated:D,activated:N,deactivated:O,beforeDestroy:H,beforeUnmount:z,destroyed:G,unmounted:L,render:X,renderTracked:Z,renderTriggered:A,errorCaptured:g,serverPrefetch:E,expose:T,inheritAttrs:w,components:S,directives:y,filters:xt}=t;if(h&&_E(h,s,null),a)for(const ft in a){const dt=a[ft];ht(dt)&&(s[ft]=dt.bind(e))}if(r){const ft=r.call(e,e);Nt(ft)&&(n.data=Rc(ft))}if(Fl=!0,i)for(const ft in i){const dt=i[ft],$t=ht(dt)?dt.bind(e,e):ht(dt.get)?dt.get.bind(e,e):Xe,De=!ht(dt)&&ht(dt.set)?dt.set.bind(e):Xe,ye=nv({get:$t,set:De});Object.defineProperty(s,ft,{enumerable:!0,configurable:!0,get:()=>ye.value,set:Ct=>ye.value=Ct})}if(l)for(const ft in l)Sp(l[ft],s,e,ft);if(c){const ft=ht(c)?c.call(e):c;Reflect.ownKeys(ft).forEach(dt=>{bE(dt,ft[dt])})}d&&Vh(d,n,"c");function vt(ft,dt){ct(dt)?dt.forEach($t=>ft($t.bind(e))):dt&&ft(dt.bind(e))}if(vt(iE,p),vt(wp,_),vt(oE,b),vt(aE,D),vt(nE,N),vt(sE,O),vt(fE,g),vt(hE,Z),vt(uE,A),vt(lE,z),vt(Ip,L),vt(cE,E),ct(T))if(T.length){const ft=n.exposed||(n.exposed={});T.forEach(dt=>{Object.defineProperty(ft,dt,{get:()=>e[dt],set:$t=>e[dt]=$t})})}else n.exposed||(n.exposed={});X&&n.render===Xe&&(n.render=X),w!=null&&(n.inheritAttrs=w),S&&(n.components=S),y&&(n.directives=y),E&&Tp(n)}function _E(n,t,e=Xe){ct(n)&&(n=Ul(n));for(const s in n){const r=n[s];let i;Nt(r)?"default"in r?i=ho(r.from||s,r.default,!0):i=ho(r.from||s):i=ho(r),oe(i)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[s]=i}}function Vh(n,t,e){sn(ct(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function Sp(n,t,e,s){let r=s.includes(".")?Bp(e,s):()=>e[s];if(kt(n)){const i=t[n];ht(i)&&nl(r,i)}else if(ht(n))nl(r,n.bind(e));else if(Nt(n))if(ct(n))n.forEach(i=>Sp(i,t,e,s));else{const i=ht(n.handler)?n.handler.bind(e):t[n.handler];ht(i)&&nl(r,i,n)}}function Cp(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=n.appContext,l=i.get(t);let c;return l?c=l:!r.length&&!e&&!s?c=t:(c={},r.length&&r.forEach(h=>Do(c,h,a,!0)),Do(c,t,a)),Nt(t)&&i.set(t,c),c}function Do(n,t,e,s=!1){const{mixins:r,extends:i}=t;i&&Do(n,i,e,!0),r&&r.forEach(a=>Do(n,a,e,!0));for(const a in t)if(!(s&&a==="expose")){const l=yE[a]||e&&e[a];n[a]=l?l(n[a],t[a]):t[a]}return n}const yE={data:xh,props:Lh,emits:Lh,methods:Wr,computed:Wr,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:Wr,directives:Wr,watch:vE,provide:xh,inject:EE};function xh(n,t){return t?n?function(){return ae(ht(n)?n.call(this,this):n,ht(t)?t.call(this,this):t)}:t:n}function EE(n,t){return Wr(Ul(n),Ul(t))}function Ul(n){if(ct(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function ce(n,t){return n?[...new Set([].concat(n,t))]:t}function Wr(n,t){return n?ae(Object.create(null),n,t):t}function Lh(n,t){return n?ct(n)&&ct(t)?[...new Set([...n,...t])]:ae(Object.create(null),Oh(n),Oh(t??{})):t}function vE(n,t){if(!n)return t;if(!t)return n;const e=ae(Object.create(null),n);for(const s in t)e[s]=ce(n[s],t[s]);return e}function Rp(){return{app:null,config:{isNativeTag:cy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let TE=0;function AE(n,t){return function(s,r=null){ht(s)||(s=ae({},s)),r!=null&&!Nt(r)&&(r=null);const i=Rp(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:TE++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:sv,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ht(d.install)?(a.add(d),d.install(h,...p)):ht(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,_){if(!c){const b=h._ceVNode||Je(s,r);return b.appContext=i,_===!0?_="svg":_===!1&&(_=void 0),n(b,d,_),c=!0,h._container=d,d.__vue_app__=h,la(b.component)}},onUnmount(d){l.push(d)},unmount(){c&&(sn(l,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=tr;tr=h;try{return d()}finally{tr=p}}};return h}}let tr=null;function bE(n,t){if(he){let e=he.provides;const s=he.parent&&he.parent.provides;s===e&&(e=he.provides=Object.create(s)),e[n]=t}}function ho(n,t,e=!1){const s=he||xe;if(s||tr){const r=tr?tr._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return e&&ht(t)?t.call(s&&s.proxy):t}}const Pp={},Dp=()=>Object.create(Pp),Np=n=>Object.getPrototypeOf(n)===Pp;function wE(n,t,e,s=!1){const r={},i=Dp();n.propsDefaults=Object.create(null),Op(n,t,r,i);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);e?n.props=s?r:Uy(r):n.type.props?n.props=r:n.props=i,n.attrs=i}function IE(n,t,e,s){const{props:r,attrs:i,vnode:{patchFlag:a}}=n,l=Tt(r),[c]=n.propsOptions;let h=!1;if((s||a>0)&&!(a&16)){if(a&8){const d=n.vnode.dynamicProps;for(let p=0;p<d.length;p++){let _=d[p];if(oa(n.emitsOptions,_))continue;const b=t[_];if(c)if(At(i,_))b!==i[_]&&(i[_]=b,h=!0);else{const D=Hn(_);r[D]=Bl(c,l,D,b,n,!1)}else b!==i[_]&&(i[_]=b,h=!0)}}}else{Op(n,t,r,i)&&(h=!0);let d;for(const p in l)(!t||!At(t,p)&&((d=Rs(p))===p||!At(t,d)))&&(c?e&&(e[p]!==void 0||e[d]!==void 0)&&(r[p]=Bl(c,l,p,void 0,n,!0)):delete r[p]);if(i!==l)for(const p in i)(!t||!At(t,p))&&(delete i[p],h=!0)}h&&dn(n.attrs,"set","")}function Op(n,t,e,s){const[r,i]=n.propsOptions;let a=!1,l;if(t)for(let c in t){if(Yr(c))continue;const h=t[c];let d;r&&At(r,d=Hn(c))?!i||!i.includes(d)?e[d]=h:(l||(l={}))[d]=h:oa(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,a=!0)}if(i){const c=Tt(e),h=l||It;for(let d=0;d<i.length;d++){const p=i[d];e[p]=Bl(r,c,p,h[p],n,!At(h,p))}}return a}function Bl(n,t,e,s,r,i){const a=n[e];if(a!=null){const l=At(a,"default");if(l&&s===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ht(c)){const{propsDefaults:h}=r;if(e in h)s=h[e];else{const d=bi(r);s=h[e]=c.call(null,t),d()}}else s=c;r.ce&&r.ce._setProp(e,s)}a[0]&&(i&&!l?s=!1:a[1]&&(s===""||s===Rs(e))&&(s=!0))}return s}const SE=new WeakMap;function Vp(n,t,e=!1){const s=e?SE:t.propsCache,r=s.get(n);if(r)return r;const i=n.props,a={},l=[];let c=!1;if(!ht(n)){const d=p=>{c=!0;const[_,b]=Vp(p,t,!0);ae(a,_),b&&l.push(...b)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!i&&!c)return Nt(n)&&s.set(n,Ys),Ys;if(ct(i))for(let d=0;d<i.length;d++){const p=Hn(i[d]);Mh(p)&&(a[p]=It)}else if(i)for(const d in i){const p=Hn(d);if(Mh(p)){const _=i[d],b=a[p]=ct(_)||ht(_)?{type:_}:ae({},_),D=b.type;let N=!1,O=!0;if(ct(D))for(let H=0;H<D.length;++H){const z=D[H],G=ht(z)&&z.name;if(G==="Boolean"){N=!0;break}else G==="String"&&(O=!1)}else N=ht(D)&&D.name==="Boolean";b[0]=N,b[1]=O,(N||At(b,"default"))&&l.push(p)}}const h=[a,l];return Nt(n)&&s.set(n,h),h}function Mh(n){return n[0]!=="$"&&!Yr(n)}const xp=n=>n[0]==="_"||n==="$stable",xc=n=>ct(n)?n.map(Ye):[Ye(n)],CE=(n,t,e)=>{if(t._n)return t;const s=Zy((...r)=>xc(t(...r)),e);return s._c=!1,s},Lp=(n,t,e)=>{const s=n._ctx;for(const r in n){if(xp(r))continue;const i=n[r];if(ht(i))t[r]=CE(r,i,s);else if(i!=null){const a=xc(i);t[r]=()=>a}}},Mp=(n,t)=>{const e=xc(t);n.slots.default=()=>e},kp=(n,t,e)=>{for(const s in t)(e||s!=="_")&&(n[s]=t[s])},RE=(n,t,e)=>{const s=n.slots=Dp();if(n.vnode.shapeFlag&32){const r=t._;r?(kp(s,t,e),e&&Yd(s,"_",r,!0)):Lp(t,s)}else t&&Mp(n,t)},PE=(n,t,e)=>{const{vnode:s,slots:r}=n;let i=!0,a=It;if(s.shapeFlag&32){const l=t._;l?e&&l===1?i=!1:kp(r,t,e):(i=!t.$stable,Lp(t,r)),a=t}else t&&(Mp(n,t),a={default:1});if(i)for(const l in r)!xp(l)&&a[l]==null&&delete r[l]},Ae=HE;function DE(n){return NE(n)}function NE(n,t){const e=ea();e.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:_,setScopeId:b=Xe,insertStaticContent:D}=n,N=(v,I,P,U=null,x=null,F=null,W=void 0,j=null,B=!!I.dynamicChildren)=>{if(v===I)return;v&&!jr(v,I)&&(U=pe(v),Ct(v,x,F,!0),v=null),I.patchFlag===-2&&(B=!1,I.dynamicChildren=null);const{type:k,ref:tt,shapeFlag:q}=I;switch(k){case aa:O(v,I,P,U);break;case bs:H(v,I,P,U);break;case sl:v==null&&z(I,P,U,W);break;case Be:S(v,I,P,U,x,F,W,j,B);break;default:q&1?X(v,I,P,U,x,F,W,j,B):q&6?y(v,I,P,U,x,F,W,j,B):(q&64||q&128)&&k.process(v,I,P,U,x,F,W,j,B,Ne)}tt!=null&&x&&Po(tt,v&&v.ref,F,I||v,!I)},O=(v,I,P,U)=>{if(v==null)s(I.el=l(I.children),P,U);else{const x=I.el=v.el;I.children!==v.children&&h(x,I.children)}},H=(v,I,P,U)=>{v==null?s(I.el=c(I.children||""),P,U):I.el=v.el},z=(v,I,P,U)=>{[v.el,v.anchor]=D(v.children,I,P,U,v.el,v.anchor)},G=({el:v,anchor:I},P,U)=>{let x;for(;v&&v!==I;)x=_(v),s(v,P,U),v=x;s(I,P,U)},L=({el:v,anchor:I})=>{let P;for(;v&&v!==I;)P=_(v),r(v),v=P;r(I)},X=(v,I,P,U,x,F,W,j,B)=>{I.type==="svg"?W="svg":I.type==="math"&&(W="mathml"),v==null?Z(I,P,U,x,F,W,j,B):E(v,I,x,F,W,j,B)},Z=(v,I,P,U,x,F,W,j)=>{let B,k;const{props:tt,shapeFlag:q,transition:Y,dirs:it}=v;if(B=v.el=a(v.type,F,tt&&tt.is,tt),q&8?d(B,v.children):q&16&&g(v.children,B,null,U,x,el(v,F),W,j),it&&fs(v,null,U,"created"),A(B,v,v.scopeId,W,U),tt){for(const at in tt)at!=="value"&&!Yr(at)&&i(B,at,null,tt[at],F,U);"value"in tt&&i(B,"value",null,tt.value,F),(k=tt.onVnodeBeforeMount)&&qe(k,U,v)}it&&fs(v,null,U,"beforeMount");const et=OE(x,Y);et&&Y.beforeEnter(B),s(B,I,P),((k=tt&&tt.onVnodeMounted)||et||it)&&Ae(()=>{k&&qe(k,U,v),et&&Y.enter(B),it&&fs(v,null,U,"mounted")},x)},A=(v,I,P,U,x)=>{if(P&&b(v,P),U)for(let F=0;F<U.length;F++)b(v,U[F]);if(x){let F=x.subTree;if(I===F||Hp(F.type)&&(F.ssContent===I||F.ssFallback===I)){const W=x.vnode;A(v,W,W.scopeId,W.slotScopeIds,x.parent)}}},g=(v,I,P,U,x,F,W,j,B=0)=>{for(let k=B;k<v.length;k++){const tt=v[k]=j?Mn(v[k]):Ye(v[k]);N(null,tt,I,P,U,x,F,W,j)}},E=(v,I,P,U,x,F,W)=>{const j=I.el=v.el;let{patchFlag:B,dynamicChildren:k,dirs:tt}=I;B|=v.patchFlag&16;const q=v.props||It,Y=I.props||It;let it;if(P&&ds(P,!1),(it=Y.onVnodeBeforeUpdate)&&qe(it,P,I,v),tt&&fs(I,v,P,"beforeUpdate"),P&&ds(P,!0),(q.innerHTML&&Y.innerHTML==null||q.textContent&&Y.textContent==null)&&d(j,""),k?T(v.dynamicChildren,k,j,P,U,el(I,x),F):W||dt(v,I,j,null,P,U,el(I,x),F,!1),B>0){if(B&16)w(j,q,Y,P,x);else if(B&2&&q.class!==Y.class&&i(j,"class",null,Y.class,x),B&4&&i(j,"style",q.style,Y.style,x),B&8){const et=I.dynamicProps;for(let at=0;at<et.length;at++){const pt=et[at],Xt=q[pt],Ht=Y[pt];(Ht!==Xt||pt==="value")&&i(j,pt,Xt,Ht,x,P)}}B&1&&v.children!==I.children&&d(j,I.children)}else!W&&k==null&&w(j,q,Y,P,x);((it=Y.onVnodeUpdated)||tt)&&Ae(()=>{it&&qe(it,P,I,v),tt&&fs(I,v,P,"updated")},U)},T=(v,I,P,U,x,F,W)=>{for(let j=0;j<I.length;j++){const B=v[j],k=I[j],tt=B.el&&(B.type===Be||!jr(B,k)||B.shapeFlag&70)?p(B.el):P;N(B,k,tt,null,U,x,F,W,!0)}},w=(v,I,P,U,x)=>{if(I!==P){if(I!==It)for(const F in I)!Yr(F)&&!(F in P)&&i(v,F,I[F],null,x,U);for(const F in P){if(Yr(F))continue;const W=P[F],j=I[F];W!==j&&F!=="value"&&i(v,F,j,W,x,U)}"value"in P&&i(v,"value",I.value,P.value,x)}},S=(v,I,P,U,x,F,W,j,B)=>{const k=I.el=v?v.el:l(""),tt=I.anchor=v?v.anchor:l("");let{patchFlag:q,dynamicChildren:Y,slotScopeIds:it}=I;it&&(j=j?j.concat(it):it),v==null?(s(k,P,U),s(tt,P,U),g(I.children||[],P,tt,x,F,W,j,B)):q>0&&q&64&&Y&&v.dynamicChildren?(T(v.dynamicChildren,Y,P,x,F,W,j),(I.key!=null||x&&I===x.subTree)&&$p(v,I,!0)):dt(v,I,P,tt,x,F,W,j,B)},y=(v,I,P,U,x,F,W,j,B)=>{I.slotScopeIds=j,v==null?I.shapeFlag&512?x.ctx.activate(I,P,U,W,B):xt(I,P,U,x,F,W,B):Qt(v,I,B)},xt=(v,I,P,U,x,F,W)=>{const j=v.component=YE(v,U,x);if(Ap(v)&&(j.ctx.renderer=Ne),XE(j,!1,W),j.asyncDep){if(x&&x.registerDep(j,vt,W),!v.el){const B=j.subTree=Je(bs);H(null,B,I,P)}}else vt(j,v,I,P,x,F,W)},Qt=(v,I,P)=>{const U=I.component=v.component;if(BE(v,I,P))if(U.asyncDep&&!U.asyncResolved){ft(U,I,P);return}else U.next=I,U.update();else I.el=v.el,U.vnode=I},vt=(v,I,P,U,x,F,W)=>{const j=()=>{if(v.isMounted){let{next:q,bu:Y,u:it,parent:et,vnode:at}=v;{const Jt=Fp(v);if(Jt){q&&(q.el=at.el,ft(v,q,W)),Jt.asyncDep.then(()=>{v.isUnmounted||j()});return}}let pt=q,Xt;ds(v,!1),q?(q.el=at.el,ft(v,q,W)):q=at,Y&&uo(Y),(Xt=q.props&&q.props.onVnodeBeforeUpdate)&&qe(Xt,et,q,at),ds(v,!0);const Ht=$h(v),Oe=v.subTree;v.subTree=Ht,N(Oe,Ht,p(Oe.el),pe(Oe),v,x,F),q.el=Ht.el,pt===null&&jE(v,Ht.el),it&&Ae(it,x),(Xt=q.props&&q.props.onVnodeUpdated)&&Ae(()=>qe(Xt,et,q,at),x)}else{let q;const{el:Y,props:it}=I,{bm:et,m:at,parent:pt,root:Xt,type:Ht}=v,Oe=Zr(I);ds(v,!1),et&&uo(et),!Oe&&(q=it&&it.onVnodeBeforeMount)&&qe(q,pt,I),ds(v,!0);{Xt.ce&&Xt.ce._injectChildStyle(Ht);const Jt=v.subTree=$h(v);N(null,Jt,P,U,v,x,F),I.el=Jt.el}if(at&&Ae(at,x),!Oe&&(q=it&&it.onVnodeMounted)){const Jt=I;Ae(()=>qe(q,pt,Jt),x)}(I.shapeFlag&256||pt&&Zr(pt.vnode)&&pt.vnode.shapeFlag&256)&&v.a&&Ae(v.a,x),v.isMounted=!0,I=P=U=null}};v.scope.on();const B=v.effect=new tp(j);v.scope.off();const k=v.update=B.run.bind(B),tt=v.job=B.runIfDirty.bind(B);tt.i=v,tt.id=v.uid,B.scheduler=()=>Nc(tt),ds(v,!0),k()},ft=(v,I,P)=>{I.component=v;const U=v.vnode.props;v.vnode=I,v.next=null,IE(v,I.props,U,P),PE(v,I.children,P),es(),Nh(v),ns()},dt=(v,I,P,U,x,F,W,j,B=!1)=>{const k=v&&v.children,tt=v?v.shapeFlag:0,q=I.children,{patchFlag:Y,shapeFlag:it}=I;if(Y>0){if(Y&128){De(k,q,P,U,x,F,W,j,B);return}else if(Y&256){$t(k,q,P,U,x,F,W,j,B);return}}it&8?(tt&16&&Ee(k,x,F),q!==k&&d(P,q)):tt&16?it&16?De(k,q,P,U,x,F,W,j,B):Ee(k,x,F,!0):(tt&8&&d(P,""),it&16&&g(q,P,U,x,F,W,j,B))},$t=(v,I,P,U,x,F,W,j,B)=>{v=v||Ys,I=I||Ys;const k=v.length,tt=I.length,q=Math.min(k,tt);let Y;for(Y=0;Y<q;Y++){const it=I[Y]=B?Mn(I[Y]):Ye(I[Y]);N(v[Y],it,P,null,x,F,W,j,B)}k>tt?Ee(v,x,F,!0,!1,q):g(I,P,U,x,F,W,j,B,q)},De=(v,I,P,U,x,F,W,j,B)=>{let k=0;const tt=I.length;let q=v.length-1,Y=tt-1;for(;k<=q&&k<=Y;){const it=v[k],et=I[k]=B?Mn(I[k]):Ye(I[k]);if(jr(it,et))N(it,et,P,null,x,F,W,j,B);else break;k++}for(;k<=q&&k<=Y;){const it=v[q],et=I[Y]=B?Mn(I[Y]):Ye(I[Y]);if(jr(it,et))N(it,et,P,null,x,F,W,j,B);else break;q--,Y--}if(k>q){if(k<=Y){const it=Y+1,et=it<tt?I[it].el:U;for(;k<=Y;)N(null,I[k]=B?Mn(I[k]):Ye(I[k]),P,et,x,F,W,j,B),k++}}else if(k>Y)for(;k<=q;)Ct(v[k],x,F,!0),k++;else{const it=k,et=k,at=new Map;for(k=et;k<=Y;k++){const Kt=I[k]=B?Mn(I[k]):Ye(I[k]);Kt.key!=null&&at.set(Kt.key,k)}let pt,Xt=0;const Ht=Y-et+1;let Oe=!1,Jt=0;const Cn=new Array(Ht);for(k=0;k<Ht;k++)Cn[k]=0;for(k=it;k<=q;k++){const Kt=v[k];if(Xt>=Ht){Ct(Kt,x,F,!0);continue}let Ve;if(Kt.key!=null)Ve=at.get(Kt.key);else for(pt=et;pt<=Y;pt++)if(Cn[pt-et]===0&&jr(Kt,I[pt])){Ve=pt;break}Ve===void 0?Ct(Kt,x,F,!0):(Cn[Ve-et]=k+1,Ve>=Jt?Jt=Ve:Oe=!0,N(Kt,I[Ve],P,null,x,F,W,j,B),Xt++)}const Rr=Oe?VE(Cn):Ys;for(pt=Rr.length-1,k=Ht-1;k>=0;k--){const Kt=et+k,Ve=I[Kt],Vi=Kt+1<tt?I[Kt+1].el:U;Cn[k]===0?N(null,Ve,P,Vi,x,F,W,j,B):Oe&&(pt<0||k!==Rr[pt]?ye(Ve,P,Vi,2):pt--)}}},ye=(v,I,P,U,x=null)=>{const{el:F,type:W,transition:j,children:B,shapeFlag:k}=v;if(k&6){ye(v.component.subTree,I,P,U);return}if(k&128){v.suspense.move(I,P,U);return}if(k&64){W.move(v,I,P,Ne);return}if(W===Be){s(F,I,P);for(let q=0;q<B.length;q++)ye(B[q],I,P,U);s(v.anchor,I,P);return}if(W===sl){G(v,I,P);return}if(U!==2&&k&1&&j)if(U===0)j.beforeEnter(F),s(F,I,P),Ae(()=>j.enter(F),x);else{const{leave:q,delayLeave:Y,afterLeave:it}=j,et=()=>s(F,I,P),at=()=>{q(F,()=>{et(),it&&it()})};Y?Y(F,et,at):at()}else s(F,I,P)},Ct=(v,I,P,U=!1,x=!1)=>{const{type:F,props:W,ref:j,children:B,dynamicChildren:k,shapeFlag:tt,patchFlag:q,dirs:Y,cacheIndex:it}=v;if(q===-2&&(x=!1),j!=null&&Po(j,null,P,v,!0),it!=null&&(I.renderCache[it]=void 0),tt&256){I.ctx.deactivate(v);return}const et=tt&1&&Y,at=!Zr(v);let pt;if(at&&(pt=W&&W.onVnodeBeforeUnmount)&&qe(pt,I,v),tt&6)Yt(v.component,P,U);else{if(tt&128){v.suspense.unmount(P,U);return}et&&fs(v,null,I,"beforeUnmount"),tt&64?v.type.remove(v,I,P,Ne,U):k&&!k.hasOnce&&(F!==Be||q>0&&q&64)?Ee(k,I,P,!1,!0):(F===Be&&q&384||!x&&tt&16)&&Ee(B,I,P),U&&Pt(v)}(at&&(pt=W&&W.onVnodeUnmounted)||et)&&Ae(()=>{pt&&qe(pt,I,v),et&&fs(v,null,I,"unmounted")},P)},Pt=v=>{const{type:I,el:P,anchor:U,transition:x}=v;if(I===Be){We(P,U);return}if(I===sl){L(v);return}const F=()=>{r(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(v.shapeFlag&1&&x&&!x.persisted){const{leave:W,delayLeave:j}=x,B=()=>W(P,F);j?j(v.el,F,B):B()}else F()},We=(v,I)=>{let P;for(;v!==I;)P=_(v),r(v),v=P;r(I)},Yt=(v,I,P)=>{const{bum:U,scope:x,job:F,subTree:W,um:j,m:B,a:k}=v;kh(B),kh(k),U&&uo(U),x.stop(),F&&(F.flags|=8,Ct(W,v,I,P)),j&&Ae(j,I),Ae(()=>{v.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&v.asyncDep&&!v.asyncResolved&&v.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Ee=(v,I,P,U=!1,x=!1,F=0)=>{for(let W=F;W<v.length;W++)Ct(v[W],I,P,U,x)},pe=v=>{if(v.shapeFlag&6)return pe(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const I=_(v.anchor||v.el),P=I&&I[tE];return P?_(P):I};let ve=!1;const Sn=(v,I,P)=>{v==null?I._vnode&&Ct(I._vnode,null,null,!0):N(I._vnode||null,v,I,null,null,null,P),I._vnode=v,ve||(ve=!0,Nh(),yp(),ve=!1)},Ne={p:N,um:Ct,m:ye,r:Pt,mt:xt,mc:g,pc:dt,pbc:T,n:pe,o:n};return{render:Sn,hydrate:void 0,createApp:AE(Sn)}}function el({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ds({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function OE(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function $p(n,t,e=!1){const s=n.children,r=t.children;if(ct(s)&&ct(r))for(let i=0;i<s.length;i++){const a=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Mn(r[i]),l.el=a.el),!e&&l.patchFlag!==-2&&$p(a,l)),l.type===aa&&(l.el=a.el)}}function VE(n){const t=n.slice(),e=[0];let s,r,i,a,l;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(r=e[e.length-1],n[r]<h){t[s]=r,e.push(s);continue}for(i=0,a=e.length-1;i<a;)l=i+a>>1,n[e[l]]<h?i=l+1:a=l;h<n[e[i]]&&(i>0&&(t[s]=e[i-1]),e[i]=s)}}for(i=e.length,a=e[i-1];i-- >0;)e[i]=a,a=t[a];return e}function Fp(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Fp(t)}function kh(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const xE=Symbol.for("v-scx"),LE=()=>ho(xE);function nl(n,t,e){return Up(n,t,e)}function Up(n,t,e=It){const{immediate:s,deep:r,flush:i,once:a}=e,l=ae({},e),c=t&&s||!t&&i!=="post";let h;if(fi){if(i==="sync"){const b=LE();h=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Xe,b.resume=Xe,b.pause=Xe,b}}const d=he;l.call=(b,D,N)=>sn(b,d,D,N);let p=!1;i==="post"?l.scheduler=b=>{Ae(b,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(b,D)=>{D?b():Nc(b)}),l.augmentJob=b=>{t&&(b.flags|=4),p&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const _=Gy(n,t,l);return fi&&(h?h.push(_):c&&_()),_}function ME(n,t,e){const s=this.proxy,r=kt(n)?n.includes(".")?Bp(s,n):()=>s[n]:n.bind(s,s);let i;ht(t)?i=t:(i=t.handler,e=t);const a=bi(this),l=Up(r,i.bind(s),e);return a(),l}function Bp(n,t){const e=t.split(".");return()=>{let s=n;for(let r=0;r<e.length&&s;r++)s=s[e[r]];return s}}const kE=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Hn(t)}Modifiers`]||n[`${Rs(t)}Modifiers`];function $E(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||It;let r=e;const i=t.startsWith("update:"),a=i&&kE(s,t.slice(7));a&&(a.trim&&(r=e.map(d=>kt(d)?d.trim():d)),a.number&&(r=e.map(Nl)));let l,c=s[l=Qa(t)]||s[l=Qa(Hn(t))];!c&&i&&(c=s[l=Qa(Rs(t))]),c&&sn(c,n,6,r);const h=s[l+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,sn(h,n,6,r)}}function jp(n,t,e=!1){const s=t.emitsCache,r=s.get(n);if(r!==void 0)return r;const i=n.emits;let a={},l=!1;if(!ht(n)){const c=h=>{const d=jp(h,t,!0);d&&(l=!0,ae(a,d))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!i&&!l?(Nt(n)&&s.set(n,null),null):(ct(i)?i.forEach(c=>a[c]=null):ae(a,i),Nt(n)&&s.set(n,a),a)}function oa(n,t){return!n||!Jo(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(n,t[0].toLowerCase()+t.slice(1))||At(n,Rs(t))||At(n,t))}function $h(n){const{type:t,vnode:e,proxy:s,withProxy:r,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:_,setupState:b,ctx:D,inheritAttrs:N}=n,O=Ro(n);let H,z;try{if(e.shapeFlag&4){const L=r||s,X=L;H=Ye(h.call(X,L,d,p,b,_,D)),z=l}else{const L=t;H=Ye(L.length>1?L(p,{attrs:l,slots:a,emit:c}):L(p,null)),z=t.props?l:FE(l)}}catch(L){ei.length=0,ra(L,n,1),H=Je(bs)}let G=H;if(z&&N!==!1){const L=Object.keys(z),{shapeFlag:X}=G;L.length&&X&7&&(i&&L.some(Ec)&&(z=UE(z,i)),G=sr(G,z,!1,!0))}return e.dirs&&(G=sr(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(e.dirs):e.dirs),e.transition&&Oc(G,e.transition),H=G,Ro(O),H}const FE=n=>{let t;for(const e in n)(e==="class"||e==="style"||Jo(e))&&((t||(t={}))[e]=n[e]);return t},UE=(n,t)=>{const e={};for(const s in n)(!Ec(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function BE(n,t,e){const{props:s,children:r,component:i}=n,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Fh(s,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const _=d[p];if(a[_]!==s[_]&&!oa(h,_))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===a?!1:s?a?Fh(s,a,h):!0:!!a;return!1}function Fh(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(t[i]!==n[i]&&!oa(e,i))return!0}return!1}function jE({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const Hp=n=>n.__isSuspense;function HE(n,t){t&&t.pendingBranch?ct(n)?t.effects.push(...n):t.effects.push(n):Jy(n)}const Be=Symbol.for("v-fgt"),aa=Symbol.for("v-txt"),bs=Symbol.for("v-cmt"),sl=Symbol.for("v-stc"),ei=[];let we=null;function mn(n=!1){ei.push(we=n?null:[])}function KE(){ei.pop(),we=ei[ei.length-1]||null}let hi=1;function Uh(n,t=!1){hi+=n,n<0&&we&&t&&(we.hasOnce=!0)}function Kp(n){return n.dynamicChildren=hi>0?we||Ys:null,KE(),hi>0&&we&&we.push(n),n}function gs(n,t,e,s,r,i){return Kp(nt(n,t,e,s,r,i,!0))}function Wp(n,t,e,s,r){return Kp(Je(n,t,e,s,r,!0))}function qp(n){return n?n.__v_isVNode===!0:!1}function jr(n,t){return n.type===t.type&&n.key===t.key}const zp=({key:n})=>n??null,fo=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?kt(n)||oe(n)||ht(n)?{i:xe,r:n,k:t,f:!!e}:n:null);function nt(n,t=null,e=null,s=0,r=null,i=n===Be?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&zp(t),ref:t&&fo(t),scopeId:vp,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:xe};return l?(Lc(c,e),i&128&&n.normalize(c)):e&&(c.shapeFlag|=kt(e)?8:16),hi>0&&!a&&we&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&we.push(c),c}const Je=WE;function WE(n,t=null,e=null,s=0,r=null,i=!1){if((!n||n===dE)&&(n=bs),qp(n)){const l=sr(n,t,!0);return e&&Lc(l,e),hi>0&&!i&&we&&(l.shapeFlag&6?we[we.indexOf(n)]=l:we.push(l)),l.patchFlag=-2,l}if(ev(n)&&(n=n.__vccOpts),t){t=qE(t);let{class:l,style:c}=t;l&&!kt(l)&&(t.class=na(l)),Nt(c)&&(Dc(c)&&!ct(c)&&(c=ae({},c)),t.style=Ac(c))}const a=kt(n)?1:Hp(n)?128:eE(n)?64:Nt(n)?4:ht(n)?2:0;return nt(n,t,e,s,r,a,i,!0)}function qE(n){return n?Dc(n)||Np(n)?ae({},n):n:null}function sr(n,t,e=!1,s=!1){const{props:r,ref:i,patchFlag:a,children:l,transition:c}=n,h=t?zE(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&zp(h),ref:t&&t.ref?e&&i?ct(i)?i.concat(fo(t)):[i,fo(t)]:fo(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Be?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&sr(n.ssContent),ssFallback:n.ssFallback&&sr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&Oc(d,c.clone(d)),d}function po(n=" ",t=0){return Je(aa,null,n,t)}function rl(n="",t=!1){return t?(mn(),Wp(bs,null,n)):Je(bs,null,n)}function Ye(n){return n==null||typeof n=="boolean"?Je(bs):ct(n)?Je(Be,null,n.slice()):qp(n)?Mn(n):Je(aa,null,String(n))}function Mn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:sr(n)}function Lc(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(ct(t))e=16;else if(typeof t=="object")if(s&65){const r=t.default;r&&(r._c&&(r._d=!1),Lc(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!Np(t)?t._ctx=xe:r===3&&xe&&(xe.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else ht(t)?(t={default:t,_ctx:xe},e=32):(t=String(t),s&64?(e=16,t=[po(t)]):e=8);n.children=t,n.shapeFlag|=e}function zE(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const r in s)if(r==="class")t.class!==s.class&&(t.class=na([t.class,s.class]));else if(r==="style")t.style=Ac([t.style,s.style]);else if(Jo(r)){const i=t[r],a=s[r];a&&i!==a&&!(ct(i)&&i.includes(a))&&(t[r]=i?[].concat(i,a):a)}else r!==""&&(t[r]=s[r])}return t}function qe(n,t,e,s=null){sn(n,t,7,[e,s])}const GE=Rp();let QE=0;function YE(n,t,e){const s=n.type,r=(t?t.appContext:n.appContext)||GE,i={uid:QE++,vnode:n,type:s,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vp(s,r),emitsOptions:jp(s,r),emit:null,emitted:null,propsDefaults:It,inheritAttrs:s.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=$E.bind(null,i),n.ce&&n.ce(i),i}let he=null,No,jl;{const n=ea(),t=(e,s)=>{let r;return(r=n[e])||(r=n[e]=[]),r.push(s),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};No=t("__VUE_INSTANCE_SETTERS__",e=>he=e),jl=t("__VUE_SSR_SETTERS__",e=>fi=e)}const bi=n=>{const t=he;return No(n),n.scope.on(),()=>{n.scope.off(),No(t)}},Bh=()=>{he&&he.scope.off(),No(null)};function Gp(n){return n.vnode.shapeFlag&4}let fi=!1;function XE(n,t=!1,e=!1){t&&jl(t);const{props:s,children:r}=n.vnode,i=Gp(n);wE(n,s,i,t),RE(n,r,e);const a=i?JE(n,t):void 0;return t&&jl(!1),a}function JE(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,mE);const{setup:s}=e;if(s){es();const r=n.setupContext=s.length>1?tv(n):null,i=bi(n),a=Ai(s,n,0,[n.props,r]),l=qd(a);if(ns(),i(),(l||n.sp)&&!Zr(n)&&Tp(n),l){if(a.then(Bh,Bh),t)return a.then(c=>{jh(n,c)}).catch(c=>{ra(c,n,0)});n.asyncDep=a}else jh(n,a)}else Qp(n)}function jh(n,t,e){ht(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Nt(t)&&(n.setupState=mp(t)),Qp(n)}function Qp(n,t,e){const s=n.type;n.render||(n.render=s.render||Xe);{const r=bi(n);es();try{gE(n)}finally{ns(),r()}}}const ZE={get(n,t){return se(n,"get",""),n[t]}};function tv(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,ZE),slots:n.slots,emit:n.emit,expose:t}}function la(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(mp(By(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in ti)return ti[e](n)},has(t,e){return e in t||e in ti}})):n.proxy}function ev(n){return ht(n)&&"__vccOpts"in n}const nv=(n,t)=>qy(n,t,fi),sv="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hl;const Hh=typeof window<"u"&&window.trustedTypes;if(Hh)try{Hl=Hh.createPolicy("vue",{createHTML:n=>n})}catch{}const Yp=Hl?n=>Hl.createHTML(n):n=>n,rv="http://www.w3.org/2000/svg",iv="http://www.w3.org/1998/Math/MathML",fn=typeof document<"u"?document:null,Kh=fn&&fn.createElement("template"),ov={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const r=t==="svg"?fn.createElementNS(rv,n):t==="mathml"?fn.createElementNS(iv,n):e?fn.createElement(n,{is:e}):fn.createElement(n);return n==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:n=>fn.createTextNode(n),createComment:n=>fn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>fn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,r,i){const a=e?e.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===i||!(r=r.nextSibling)););else{Kh.innerHTML=Yp(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const l=Kh.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[a?a.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},av=Symbol("_vtc");function lv(n,t,e){const s=n[av];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Wh=Symbol("_vod"),cv=Symbol("_vsh"),uv=Symbol(""),hv=/(^|;)\s*display\s*:/;function fv(n,t,e){const s=n.style,r=kt(e);let i=!1;if(e&&!r){if(t)if(kt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();e[l]==null&&mo(s,l,"")}else for(const a in t)e[a]==null&&mo(s,a,"");for(const a in e)a==="display"&&(i=!0),mo(s,a,e[a])}else if(r){if(t!==e){const a=s[uv];a&&(e+=";"+a),s.cssText=e,i=hv.test(e)}}else t&&n.removeAttribute("style");Wh in n&&(n[Wh]=i?s.display:"",n[cv]&&(s.display="none"))}const qh=/\s*!important$/;function mo(n,t,e){if(ct(e))e.forEach(s=>mo(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=dv(n,t);qh.test(e)?n.setProperty(Rs(s),e.replace(qh,""),"important"):n[s]=e}}const zh=["Webkit","Moz","ms"],il={};function dv(n,t){const e=il[t];if(e)return e;let s=Hn(t);if(s!=="filter"&&s in n)return il[t]=s;s=Qd(s);for(let r=0;r<zh.length;r++){const i=zh[r]+s;if(i in n)return il[t]=i}return t}const Gh="http://www.w3.org/1999/xlink";function Qh(n,t,e,s,r,i=Ey(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Gh,t.slice(6,t.length)):n.setAttributeNS(Gh,t,e):e==null||i&&!Xd(e)?n.removeAttribute(t):n.setAttribute(t,i?"":ts(e)?String(e):e)}function Yh(n,t,e,s,r){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Yp(e):e);return}const i=n.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let a=!1;if(e===""||e==null){const l=typeof n[t];l==="boolean"?e=Xd(e):e==null&&l==="string"?(e="",a=!0):l==="number"&&(e=0,a=!0)}try{n[t]=e}catch{}a&&n.removeAttribute(r||t)}function Bs(n,t,e,s){n.addEventListener(t,e,s)}function pv(n,t,e,s){n.removeEventListener(t,e,s)}const Xh=Symbol("_vei");function mv(n,t,e,s,r=null){const i=n[Xh]||(n[Xh]={}),a=i[t];if(s&&a)a.value=s;else{const[l,c]=gv(t);if(s){const h=i[t]=Ev(s,r);Bs(n,l,h,c)}else a&&(pv(n,l,a,c),i[t]=void 0)}}const Jh=/(?:Once|Passive|Capture)$/;function gv(n){let t;if(Jh.test(n)){t={};let s;for(;s=n.match(Jh);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Rs(n.slice(2)),t]}let ol=0;const _v=Promise.resolve(),yv=()=>ol||(_v.then(()=>ol=0),ol=Date.now());function Ev(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;sn(vv(s,e.value),t,5,[s])};return e.value=n,e.attached=yv(),e}function vv(n,t){if(ct(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>r=>!r._stopped&&s&&s(r))}else return t}const Zh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,Tv=(n,t,e,s,r,i)=>{const a=r==="svg";t==="class"?lv(n,s,a):t==="style"?fv(n,e,s):Jo(t)?Ec(t)||mv(n,t,e,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Av(n,t,s,a))?(Yh(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Qh(n,t,s,a,i,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!kt(s))?Yh(n,Hn(t),s,i,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Qh(n,t,s,a))};function Av(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&Zh(t)&&ht(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Zh(t)&&kt(e)?!1:t in n}const tf=n=>{const t=n.props["onUpdate:modelValue"]||!1;return ct(t)?e=>uo(t,e):t};function bv(n){n.target.composing=!0}function ef(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const al=Symbol("_assign"),On={created(n,{modifiers:{lazy:t,trim:e,number:s}},r){n[al]=tf(r);const i=s||r.props&&r.props.type==="number";Bs(n,t?"change":"input",a=>{if(a.target.composing)return;let l=n.value;e&&(l=l.trim()),i&&(l=Nl(l)),n[al](l)}),e&&Bs(n,"change",()=>{n.value=n.value.trim()}),t||(Bs(n,"compositionstart",bv),Bs(n,"compositionend",ef),Bs(n,"change",ef))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:r,number:i}},a){if(n[al]=tf(a),n.composing)return;const l=(i||n.type==="number")&&!/^0\d/.test(n.value)?Nl(n.value):n.value,c=t??"";l!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||r&&n.value.trim()===c)||(n.value=c))}},wv=["ctrl","shift","alt","meta"],Iv={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>wv.some(e=>n[`${e}Key`]&&!t.includes(e))},Sv=(n,t)=>{const e=n._withMods||(n._withMods={}),s=t.join(".");return e[s]||(e[s]=(r,...i)=>{for(let a=0;a<t.length;a++){const l=Iv[t[a]];if(l&&l(r,t))return}return n(r,...i)})},Cv=ae({patchProp:Tv},ov);let nf;function Rv(){return nf||(nf=DE(Cv))}const Pv=(...n)=>{const t=Rv().createApp(...n),{mount:e}=t;return t.mount=s=>{const r=Nv(s);if(!r)return;const i=t._component;!ht(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=e(r,!1,Dv(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},t};function Dv(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Nv(n){return kt(n)?document.querySelector(n):n}const Ov=()=>{};var sf={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=function(n){const t=[];let e=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Vv=function(n){const t=[];let e=0,s=0;for(;e<n.length;){const r=n[e++];if(r<128)t[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=n[e++];t[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=n[e++],a=n[e++],l=n[e++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const i=n[e++],a=n[e++];t[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Jp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const i=n[r],a=r+1<n.length,l=a?n[r+1]:0,c=r+2<n.length,h=c?n[r+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let _=(l&15)<<2|h>>6,b=h&63;c||(b=64,a||(_=64)),s.push(e[d],e[p],e[_],e[b])}return s.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Xp(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Vv(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const i=e[n.charAt(r++)],l=r<n.length?e[n.charAt(r)]:0;++r;const h=r<n.length?e[n.charAt(r)]:64;++r;const p=r<n.length?e[n.charAt(r)]:64;if(++r,i==null||l==null||h==null||p==null)throw new xv;const _=i<<2|l>>4;if(s.push(_),h!==64){const b=l<<4&240|h>>2;if(s.push(b),p!==64){const D=h<<6&192|p;s.push(D)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lv=function(n){const t=Xp(n);return Jp.encodeByteArray(t,!0)},Oo=function(n){return Lv(n).replace(/\./g,"")},Mv=function(n){try{return Jp.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=()=>kv().__FIREBASE_DEFAULTS__,Fv=()=>{if(typeof process>"u"||typeof sf>"u")return;const n=sf.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Uv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&Mv(n[1]);return t&&JSON.parse(t)},Mc=()=>{try{return Ov()||$v()||Fv()||Uv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bv=n=>{var t,e;return(e=(t=Mc())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},jv=n=>{const t=Bv(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),s]:[t.substring(0,e),s]},Zp=()=>{var n;return(n=Mc())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,s)=>{e?this.reject(e):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},s=t||"demo-project",r=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Oo(JSON.stringify(e)),Oo(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qv(){var n;const t=(n=Mc())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zv(){return!qv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gv(){try{return typeof indexedDB=="object"}catch{return!1}}function Qv(){return new Promise((n,t)=>{try{let e=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var i;t(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="FirebaseError";class yr extends Error{constructor(t,e,s){super(e),this.code=t,this.customData=s,this.name=Yv,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tm.prototype.create)}}class tm{constructor(t,e,s){this.service=t,this.serviceName=e,this.errors=s}create(t,...e){const s=e[0]||{},r=`${this.service}/${t}`,i=this.errors[t],a=i?Xv(i,s):"Error",l=`${this.serviceName}: ${a} (${r}).`;return new yr(r,l,s)}}function Xv(n,t){return n.replace(Jv,(e,s)=>{const r=t[s];return r!=null?String(r):`<${s}?>`})}const Jv=/\{\$([^}]+)}/g;function Vo(n,t){if(n===t)return!0;const e=Object.keys(n),s=Object.keys(t);for(const r of e){if(!s.includes(r))return!1;const i=n[r],a=t[r];if(rf(i)&&rf(a)){if(!Vo(i,a))return!1}else if(i!==a)return!1}for(const r of s)if(!e.includes(r))return!1;return!0}function rf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(n){return n&&n._delegate?n._delegate:n}class di{constructor(t,e,s){this.name=t,this.instanceFactory=e,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const s=new Hv;if(this.instancesDeferred.set(e,s),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(eT(t))try{this.getOrInitializeService({instanceIdentifier:ms})}catch{}for(const[e,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(t=ms){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ms){return this.instances.has(t)}getOptions(t=ms){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:e});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(r)}return r}onInit(t,e){var s;const r=this.normalizeInstanceIdentifier(e),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(t),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&t(a,r),()=>{i.delete(t)}}invokeOnInitCallbacks(t,e){const s=this.onInitCallbacks.get(e);if(s)for(const r of s)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:tT(t),options:e}),this.instances.set(t,s),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=ms){return this.component?this.component.multipleInstances?t:ms:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tT(n){return n===ms?void 0:n}function eT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Zv(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(yt||(yt={}));const sT={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},rT=yt.INFO,iT={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},oT=(n,t,...e)=>{if(t<n.logLevel)return;const s=new Date().toISOString(),r=iT[t];if(r)console[r](`[${s}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class em{constructor(t){this.name=t,this._logLevel=rT,this._logHandler=oT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sT[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...t),this._logHandler(this,yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...t),this._logHandler(this,yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...t),this._logHandler(this,yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...t),this._logHandler(this,yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...t),this._logHandler(this,yt.ERROR,...t)}}const aT=(n,t)=>t.some(e=>n instanceof e);let of,af;function lT(){return of||(of=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cT(){return af||(af=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nm=new WeakMap,Kl=new WeakMap,sm=new WeakMap,ll=new WeakMap,kc=new WeakMap;function uT(n){const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("success",i),n.removeEventListener("error",a)},i=()=>{e(Fn(n.result)),r()},a=()=>{s(n.error),r()};n.addEventListener("success",i),n.addEventListener("error",a)});return t.then(e=>{e instanceof IDBCursor&&nm.set(e,n)}).catch(()=>{}),kc.set(t,n),t}function hT(n){if(Kl.has(n))return;const t=new Promise((e,s)=>{const r=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",a),n.removeEventListener("abort",a)},i=()=>{e(),r()},a=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",i),n.addEventListener("error",a),n.addEventListener("abort",a)});Kl.set(n,t)}let Wl={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Kl.get(n);if(t==="objectStoreNames")return n.objectStoreNames||sm.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Fn(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function fT(n){Wl=n(Wl)}function dT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const s=n.call(cl(this),t,...e);return sm.set(s,t.sort?t.sort():[t]),Fn(s)}:cT().includes(n)?function(...t){return n.apply(cl(this),t),Fn(nm.get(this))}:function(...t){return Fn(n.apply(cl(this),t))}}function pT(n){return typeof n=="function"?dT(n):(n instanceof IDBTransaction&&hT(n),aT(n,lT())?new Proxy(n,Wl):n)}function Fn(n){if(n instanceof IDBRequest)return uT(n);if(ll.has(n))return ll.get(n);const t=pT(n);return t!==n&&(ll.set(n,t),kc.set(t,n)),t}const cl=n=>kc.get(n);function mT(n,t,{blocked:e,upgrade:s,blocking:r,terminated:i}={}){const a=indexedDB.open(n,t),l=Fn(a);return s&&a.addEventListener("upgradeneeded",c=>{s(Fn(a.result),c.oldVersion,c.newVersion,Fn(a.transaction),c)}),e&&a.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const gT=["get","getKey","getAll","getAllKeys","count"],_T=["put","add","delete","clear"],ul=new Map;function lf(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(ul.get(t))return ul.get(t);const e=t.replace(/FromIndex$/,""),s=t!==e,r=_T.includes(e);if(!(e in(s?IDBIndex:IDBObjectStore).prototype)||!(r||gT.includes(e)))return;const i=async function(a,...l){const c=this.transaction(a,r?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(l.shift())),(await Promise.all([h[e](...l),r&&c.done]))[0]};return ul.set(t,i),i}fT(n=>({...n,get:(t,e,s)=>lf(t,e)||n.get(t,e,s),has:(t,e)=>!!lf(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(ET(e)){const s=e.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(e=>e).join(" ")}}function ET(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ql="@firebase/app",cf="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En=new em("@firebase/app"),vT="@firebase/app-compat",TT="@firebase/analytics-compat",AT="@firebase/analytics",bT="@firebase/app-check-compat",wT="@firebase/app-check",IT="@firebase/auth",ST="@firebase/auth-compat",CT="@firebase/database",RT="@firebase/data-connect",PT="@firebase/database-compat",DT="@firebase/functions",NT="@firebase/functions-compat",OT="@firebase/installations",VT="@firebase/installations-compat",xT="@firebase/messaging",LT="@firebase/messaging-compat",MT="@firebase/performance",kT="@firebase/performance-compat",$T="@firebase/remote-config",FT="@firebase/remote-config-compat",UT="@firebase/storage",BT="@firebase/storage-compat",jT="@firebase/firestore",HT="@firebase/vertexai",KT="@firebase/firestore-compat",WT="firebase",qT="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl="[DEFAULT]",zT={[ql]:"fire-core",[vT]:"fire-core-compat",[AT]:"fire-analytics",[TT]:"fire-analytics-compat",[wT]:"fire-app-check",[bT]:"fire-app-check-compat",[IT]:"fire-auth",[ST]:"fire-auth-compat",[CT]:"fire-rtdb",[RT]:"fire-data-connect",[PT]:"fire-rtdb-compat",[DT]:"fire-fn",[NT]:"fire-fn-compat",[OT]:"fire-iid",[VT]:"fire-iid-compat",[xT]:"fire-fcm",[LT]:"fire-fcm-compat",[MT]:"fire-perf",[kT]:"fire-perf-compat",[$T]:"fire-rc",[FT]:"fire-rc-compat",[UT]:"fire-gcs",[BT]:"fire-gcs-compat",[jT]:"fire-fst",[KT]:"fire-fst-compat",[HT]:"fire-vertex","fire-js":"fire-js",[WT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=new Map,GT=new Map,Gl=new Map;function uf(n,t){try{n.container.addComponent(t)}catch(e){En.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Lo(n){const t=n.name;if(Gl.has(t))return En.debug(`There were multiple attempts to register component ${t}.`),!1;Gl.set(t,n);for(const e of xo.values())uf(e,n);for(const e of GT.values())uf(e,n);return!0}function QT(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function YT(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Un=new tm("app","Firebase",XT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,e,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=qT;function rm(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const s=Object.assign({name:zl,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw Un.create("bad-app-name",{appName:String(r)});if(e||(e=Zp()),!e)throw Un.create("no-options");const i=xo.get(r);if(i){if(Vo(e,i.options)&&Vo(s,i.config))return i;throw Un.create("duplicate-app",{appName:r})}const a=new nT(r);for(const c of Gl.values())a.addComponent(c);const l=new JT(e,s,a);return xo.set(r,l),l}function tA(n=zl){const t=xo.get(n);if(!t&&n===zl&&Zp())return rm();if(!t)throw Un.create("no-app",{appName:n});return t}function er(n,t,e){var s;let r=(s=zT[n])!==null&&s!==void 0?s:n;e&&(r+=`-${e}`);const i=r.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${t}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),En.warn(l.join(" "));return}Lo(new di(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firebase-heartbeat-database",nA=1,pi="firebase-heartbeat-store";let hl=null;function im(){return hl||(hl=mT(eA,nA,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(pi)}catch(e){console.warn(e)}}}}).catch(n=>{throw Un.create("idb-open",{originalErrorMessage:n.message})})),hl}async function sA(n){try{const e=(await im()).transaction(pi),s=await e.objectStore(pi).get(om(n));return await e.done,s}catch(t){if(t instanceof yr)En.warn(t.message);else{const e=Un.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});En.warn(e.message)}}}async function hf(n,t){try{const s=(await im()).transaction(pi,"readwrite");await s.objectStore(pi).put(t,om(n)),await s.done}catch(e){if(e instanceof yr)En.warn(e.message);else{const s=Un.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});En.warn(s.message)}}}function om(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=1024,iA=30;class oA{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lA(e),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,e;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ff();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>iA){const a=cA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){En.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ff(),{heartbeatsToSend:s,unsentEntries:r}=aA(this._heartbeatsCache.heartbeats),i=Oo(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return En.warn(e),""}}}function ff(){return new Date().toISOString().substring(0,10)}function aA(n,t=rA){const e=[];let s=n.slice();for(const r of n){const i=e.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),df(e)>t){i.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),df(e)>t){e.pop();break}s=s.slice(1)}return{heartbeatsToSend:e,unsentEntries:s}}class lA{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gv()?Qv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await sA(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return hf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return hf(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function df(n){return Oo(JSON.stringify({version:2,heartbeats:n})).length}function cA(n){if(n.length===0)return-1;let t=0,e=n[0].date;for(let s=1;s<n.length;s++)n[s].date<e&&(e=n[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(n){Lo(new di("platform-logger",t=>new yT(t),"PRIVATE")),Lo(new di("heartbeat",t=>new oA(t),"PRIVATE")),er(ql,cf,n),er(ql,cf,"esm2017"),er("fire-js","")}uA("");var hA="firebase",fA="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */er(hA,fA,"app");var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bn,am;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,g){function E(){}E.prototype=g.prototype,A.D=g.prototype,A.prototype=new E,A.prototype.constructor=A,A.C=function(T,w,S){for(var y=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)y[xt-2]=arguments[xt];return g.prototype[w].apply(T,y)}}function e(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,e),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,g,E){E||(E=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(E++)|g.charCodeAt(E++)<<8|g.charCodeAt(E++)<<16|g.charCodeAt(E++)<<24;else for(w=0;16>w;++w)T[w]=g[E++]|g[E++]<<8|g[E++]<<16|g[E++]<<24;g=A.g[0],E=A.g[1],w=A.g[2];var S=A.g[3],y=g+(S^E&(w^S))+T[0]+3614090360&4294967295;g=E+(y<<7&4294967295|y>>>25),y=S+(w^g&(E^w))+T[1]+3905402710&4294967295,S=g+(y<<12&4294967295|y>>>20),y=w+(E^S&(g^E))+T[2]+606105819&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(g^w&(S^g))+T[3]+3250441966&4294967295,E=w+(y<<22&4294967295|y>>>10),y=g+(S^E&(w^S))+T[4]+4118548399&4294967295,g=E+(y<<7&4294967295|y>>>25),y=S+(w^g&(E^w))+T[5]+1200080426&4294967295,S=g+(y<<12&4294967295|y>>>20),y=w+(E^S&(g^E))+T[6]+2821735955&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(g^w&(S^g))+T[7]+4249261313&4294967295,E=w+(y<<22&4294967295|y>>>10),y=g+(S^E&(w^S))+T[8]+1770035416&4294967295,g=E+(y<<7&4294967295|y>>>25),y=S+(w^g&(E^w))+T[9]+2336552879&4294967295,S=g+(y<<12&4294967295|y>>>20),y=w+(E^S&(g^E))+T[10]+4294925233&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(g^w&(S^g))+T[11]+2304563134&4294967295,E=w+(y<<22&4294967295|y>>>10),y=g+(S^E&(w^S))+T[12]+1804603682&4294967295,g=E+(y<<7&4294967295|y>>>25),y=S+(w^g&(E^w))+T[13]+4254626195&4294967295,S=g+(y<<12&4294967295|y>>>20),y=w+(E^S&(g^E))+T[14]+2792965006&4294967295,w=S+(y<<17&4294967295|y>>>15),y=E+(g^w&(S^g))+T[15]+1236535329&4294967295,E=w+(y<<22&4294967295|y>>>10),y=g+(w^S&(E^w))+T[1]+4129170786&4294967295,g=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(g^E))+T[6]+3225465664&4294967295,S=g+(y<<9&4294967295|y>>>23),y=w+(g^E&(S^g))+T[11]+643717713&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^g&(w^S))+T[0]+3921069994&4294967295,E=w+(y<<20&4294967295|y>>>12),y=g+(w^S&(E^w))+T[5]+3593408605&4294967295,g=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(g^E))+T[10]+38016083&4294967295,S=g+(y<<9&4294967295|y>>>23),y=w+(g^E&(S^g))+T[15]+3634488961&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^g&(w^S))+T[4]+3889429448&4294967295,E=w+(y<<20&4294967295|y>>>12),y=g+(w^S&(E^w))+T[9]+568446438&4294967295,g=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(g^E))+T[14]+3275163606&4294967295,S=g+(y<<9&4294967295|y>>>23),y=w+(g^E&(S^g))+T[3]+4107603335&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^g&(w^S))+T[8]+1163531501&4294967295,E=w+(y<<20&4294967295|y>>>12),y=g+(w^S&(E^w))+T[13]+2850285829&4294967295,g=E+(y<<5&4294967295|y>>>27),y=S+(E^w&(g^E))+T[2]+4243563512&4294967295,S=g+(y<<9&4294967295|y>>>23),y=w+(g^E&(S^g))+T[7]+1735328473&4294967295,w=S+(y<<14&4294967295|y>>>18),y=E+(S^g&(w^S))+T[12]+2368359562&4294967295,E=w+(y<<20&4294967295|y>>>12),y=g+(E^w^S)+T[5]+4294588738&4294967295,g=E+(y<<4&4294967295|y>>>28),y=S+(g^E^w)+T[8]+2272392833&4294967295,S=g+(y<<11&4294967295|y>>>21),y=w+(S^g^E)+T[11]+1839030562&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^g)+T[14]+4259657740&4294967295,E=w+(y<<23&4294967295|y>>>9),y=g+(E^w^S)+T[1]+2763975236&4294967295,g=E+(y<<4&4294967295|y>>>28),y=S+(g^E^w)+T[4]+1272893353&4294967295,S=g+(y<<11&4294967295|y>>>21),y=w+(S^g^E)+T[7]+4139469664&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^g)+T[10]+3200236656&4294967295,E=w+(y<<23&4294967295|y>>>9),y=g+(E^w^S)+T[13]+681279174&4294967295,g=E+(y<<4&4294967295|y>>>28),y=S+(g^E^w)+T[0]+3936430074&4294967295,S=g+(y<<11&4294967295|y>>>21),y=w+(S^g^E)+T[3]+3572445317&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^g)+T[6]+76029189&4294967295,E=w+(y<<23&4294967295|y>>>9),y=g+(E^w^S)+T[9]+3654602809&4294967295,g=E+(y<<4&4294967295|y>>>28),y=S+(g^E^w)+T[12]+3873151461&4294967295,S=g+(y<<11&4294967295|y>>>21),y=w+(S^g^E)+T[15]+530742520&4294967295,w=S+(y<<16&4294967295|y>>>16),y=E+(w^S^g)+T[2]+3299628645&4294967295,E=w+(y<<23&4294967295|y>>>9),y=g+(w^(E|~S))+T[0]+4096336452&4294967295,g=E+(y<<6&4294967295|y>>>26),y=S+(E^(g|~w))+T[7]+1126891415&4294967295,S=g+(y<<10&4294967295|y>>>22),y=w+(g^(S|~E))+T[14]+2878612391&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~g))+T[5]+4237533241&4294967295,E=w+(y<<21&4294967295|y>>>11),y=g+(w^(E|~S))+T[12]+1700485571&4294967295,g=E+(y<<6&4294967295|y>>>26),y=S+(E^(g|~w))+T[3]+2399980690&4294967295,S=g+(y<<10&4294967295|y>>>22),y=w+(g^(S|~E))+T[10]+4293915773&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~g))+T[1]+2240044497&4294967295,E=w+(y<<21&4294967295|y>>>11),y=g+(w^(E|~S))+T[8]+1873313359&4294967295,g=E+(y<<6&4294967295|y>>>26),y=S+(E^(g|~w))+T[15]+4264355552&4294967295,S=g+(y<<10&4294967295|y>>>22),y=w+(g^(S|~E))+T[6]+2734768916&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~g))+T[13]+1309151649&4294967295,E=w+(y<<21&4294967295|y>>>11),y=g+(w^(E|~S))+T[4]+4149444226&4294967295,g=E+(y<<6&4294967295|y>>>26),y=S+(E^(g|~w))+T[11]+3174756917&4294967295,S=g+(y<<10&4294967295|y>>>22),y=w+(g^(S|~E))+T[2]+718787259&4294967295,w=S+(y<<15&4294967295|y>>>17),y=E+(S^(w|~g))+T[9]+3951481745&4294967295,A.g[0]=A.g[0]+g&4294967295,A.g[1]=A.g[1]+(w+(y<<21&4294967295|y>>>11))&4294967295,A.g[2]=A.g[2]+w&4294967295,A.g[3]=A.g[3]+S&4294967295}s.prototype.u=function(A,g){g===void 0&&(g=A.length);for(var E=g-this.blockSize,T=this.B,w=this.h,S=0;S<g;){if(w==0)for(;S<=E;)r(this,A,S),S+=this.blockSize;if(typeof A=="string"){for(;S<g;)if(T[w++]=A.charCodeAt(S++),w==this.blockSize){r(this,T),w=0;break}}else for(;S<g;)if(T[w++]=A[S++],w==this.blockSize){r(this,T),w=0;break}}this.h=w,this.o+=g},s.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var g=1;g<A.length-8;++g)A[g]=0;var E=8*this.o;for(g=A.length-8;g<A.length;++g)A[g]=E&255,E/=256;for(this.u(A),A=Array(16),g=E=0;4>g;++g)for(var T=0;32>T;T+=8)A[E++]=this.g[g]>>>T&255;return A};function i(A,g){var E=l;return Object.prototype.hasOwnProperty.call(E,A)?E[A]:E[A]=g(A)}function a(A,g){this.h=g;for(var E=[],T=!0,w=A.length-1;0<=w;w--){var S=A[w]|0;T&&S==g||(E[w]=S,T=!1)}this.g=E}var l={};function c(A){return-128<=A&&128>A?i(A,function(g){return new a([g|0],0>g?-1:0)}):new a([A|0],0>A?-1:0)}function h(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return O(h(-A));for(var g=[],E=1,T=0;A>=E;T++)g[T]=A/E|0,E*=4294967296;return new a(g,0)}function d(A,g){if(A.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(A.charAt(0)=="-")return O(d(A.substring(1),g));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=h(Math.pow(g,8)),T=p,w=0;w<A.length;w+=8){var S=Math.min(8,A.length-w),y=parseInt(A.substring(w,w+S),g);8>S?(S=h(Math.pow(g,S)),T=T.j(S).add(h(y))):(T=T.j(E),T=T.add(h(y)))}return T}var p=c(0),_=c(1),b=c(16777216);n=a.prototype,n.m=function(){if(N(this))return-O(this).m();for(var A=0,g=1,E=0;E<this.g.length;E++){var T=this.i(E);A+=(0<=T?T:4294967296+T)*g,g*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(D(this))return"0";if(N(this))return"-"+O(this).toString(A);for(var g=h(Math.pow(A,6)),E=this,T="";;){var w=L(E,g).g;E=H(E,w.j(g));var S=((0<E.g.length?E.g[0]:E.h)>>>0).toString(A);if(E=w,D(E))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function D(A){if(A.h!=0)return!1;for(var g=0;g<A.g.length;g++)if(A.g[g]!=0)return!1;return!0}function N(A){return A.h==-1}n.l=function(A){return A=H(this,A),N(A)?-1:D(A)?0:1};function O(A){for(var g=A.g.length,E=[],T=0;T<g;T++)E[T]=~A.g[T];return new a(E,~A.h).add(_)}n.abs=function(){return N(this)?O(this):this},n.add=function(A){for(var g=Math.max(this.g.length,A.g.length),E=[],T=0,w=0;w<=g;w++){var S=T+(this.i(w)&65535)+(A.i(w)&65535),y=(S>>>16)+(this.i(w)>>>16)+(A.i(w)>>>16);T=y>>>16,S&=65535,y&=65535,E[w]=y<<16|S}return new a(E,E[E.length-1]&-2147483648?-1:0)};function H(A,g){return A.add(O(g))}n.j=function(A){if(D(this)||D(A))return p;if(N(this))return N(A)?O(this).j(O(A)):O(O(this).j(A));if(N(A))return O(this.j(O(A)));if(0>this.l(b)&&0>A.l(b))return h(this.m()*A.m());for(var g=this.g.length+A.g.length,E=[],T=0;T<2*g;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<A.g.length;w++){var S=this.i(T)>>>16,y=this.i(T)&65535,xt=A.i(w)>>>16,Qt=A.i(w)&65535;E[2*T+2*w]+=y*Qt,z(E,2*T+2*w),E[2*T+2*w+1]+=S*Qt,z(E,2*T+2*w+1),E[2*T+2*w+1]+=y*xt,z(E,2*T+2*w+1),E[2*T+2*w+2]+=S*xt,z(E,2*T+2*w+2)}for(T=0;T<g;T++)E[T]=E[2*T+1]<<16|E[2*T];for(T=g;T<2*g;T++)E[T]=0;return new a(E,0)};function z(A,g){for(;(A[g]&65535)!=A[g];)A[g+1]+=A[g]>>>16,A[g]&=65535,g++}function G(A,g){this.g=A,this.h=g}function L(A,g){if(D(g))throw Error("division by zero");if(D(A))return new G(p,p);if(N(A))return g=L(O(A),g),new G(O(g.g),O(g.h));if(N(g))return g=L(A,O(g)),new G(O(g.g),g.h);if(30<A.g.length){if(N(A)||N(g))throw Error("slowDivide_ only works with positive integers.");for(var E=_,T=g;0>=T.l(A);)E=X(E),T=X(T);var w=Z(E,1),S=Z(T,1);for(T=Z(T,2),E=Z(E,2);!D(T);){var y=S.add(T);0>=y.l(A)&&(w=w.add(E),S=y),T=Z(T,1),E=Z(E,1)}return g=H(A,w.j(g)),new G(w,g)}for(w=p;0<=A.l(g);){for(E=Math.max(1,Math.floor(A.m()/g.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=h(E),y=S.j(g);N(y)||0<y.l(A);)E-=T,S=h(E),y=S.j(g);D(S)&&(S=_),w=w.add(S),A=H(A,y)}return new G(w,A)}n.A=function(A){return L(this,A).h},n.and=function(A){for(var g=Math.max(this.g.length,A.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)&A.i(T);return new a(E,this.h&A.h)},n.or=function(A){for(var g=Math.max(this.g.length,A.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)|A.i(T);return new a(E,this.h|A.h)},n.xor=function(A){for(var g=Math.max(this.g.length,A.g.length),E=[],T=0;T<g;T++)E[T]=this.i(T)^A.i(T);return new a(E,this.h^A.h)};function X(A){for(var g=A.g.length+1,E=[],T=0;T<g;T++)E[T]=A.i(T)<<1|A.i(T-1)>>>31;return new a(E,A.h)}function Z(A,g){var E=g>>5;g%=32;for(var T=A.g.length-E,w=[],S=0;S<T;S++)w[S]=0<g?A.i(S+E)>>>g|A.i(S+E+1)<<32-g:A.i(S+E);return new a(w,A.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,am=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Bn=a}).apply(typeof pf<"u"?pf:typeof self<"u"?self:typeof window<"u"?window:{});var Ji=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lm,qr,cm,go,Ql,um,hm,fm;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){return o==Array.prototype||o==Object.prototype||(o[u]=f.value),o};function e(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ji=="object"&&Ji];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var s=e(this);function r(o,u){if(u)t:{var f=s;o=o.split(".");for(var m=0;m<o.length-1;m++){var C=o[m];if(!(C in f))break t;f=f[C]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var f=0,m=!1,C={next:function(){if(!m&&f<o.length){var R=f++;return{value:u(R,o[R]),done:!1}}return m=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}r("Array.prototype.values",function(o){return o||function(){return i(this,function(u,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function h(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,f){return o.call.apply(o.bind,arguments)}function p(o,u,f){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,m),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function _(o,u,f){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,_.apply(null,arguments)}function b(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function D(o,u){function f(){}f.prototype=u.prototype,o.aa=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(m,C,R){for(var K=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)K[wt-2]=arguments[wt];return u.prototype[C].apply(m,K)}}function N(o){const u=o.length;if(0<u){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function O(o,u){for(let f=1;f<arguments.length;f++){const m=arguments[f];if(c(m)){const C=o.length||0,R=m.length||0;o.length=C+R;for(let K=0;K<R;K++)o[C+K]=m[K]}else o.push(m)}}class H{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function z(o){return/^[\s\xa0]*$/.test(o)}function G(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function L(o){return L[" "](o),o}L[" "]=function(){};var X=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function Z(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function A(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function g(o){const u={};for(const f in o)u[f]=o[f];return u}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)o[f]=m[f];for(let R=0;R<E.length;R++)f=E[R],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function w(o){var u=1;o=o.split(":");const f=[];for(;0<u&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function S(o){l.setTimeout(()=>{throw o},0)}function y(){var o=$t;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class xt{constructor(){this.h=this.g=null}add(u,f){const m=Qt.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var Qt=new H(()=>new vt,o=>o.reset());class vt{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ft,dt=!1,$t=new xt,De=()=>{const o=l.Promise.resolve(void 0);ft=()=>{o.then(ye)}};var ye=()=>{for(var o;o=y();){try{o.h.call(o.g)}catch(f){S(f)}var u=Qt;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}dt=!1};function Ct(){this.s=this.s,this.C=this.C}Ct.prototype.s=!1,Ct.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ct.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,u),l.removeEventListener("test",f,u)}catch{}return o}();function Yt(o,u){if(Pt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(X){t:{try{L(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ee[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Yt.aa.h.call(this)}}D(Yt,Pt);var Ee={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),ve=0;function Sn(o,u,f,m,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=C,this.key=++ve,this.da=this.fa=!1}function Ne(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ln(o){this.src=o,this.g={},this.h=0}ln.prototype.add=function(o,u,f,m,C){var R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);var K=I(o,u,m,C);return-1<K?(u=o[K],f||(u.fa=!1)):(u=new Sn(u,this.src,R,!!m,C),u.fa=f,o.push(u)),u};function v(o,u){var f=u.type;if(f in o.g){var m=o.g[f],C=Array.prototype.indexOf.call(m,u,void 0),R;(R=0<=C)&&Array.prototype.splice.call(m,C,1),R&&(Ne(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function I(o,u,f,m){for(var C=0;C<o.length;++C){var R=o[C];if(!R.da&&R.listener==u&&R.capture==!!f&&R.ha==m)return C}return-1}var P="closure_lm_"+(1e6*Math.random()|0),U={};function x(o,u,f,m,C){if(Array.isArray(u)){for(var R=0;R<u.length;R++)x(o,u[R],f,m,C);return null}return f=it(f),o&&o[pe]?o.K(u,f,h(m)?!!m.capture:!1,C):F(o,u,f,!1,m,C)}function F(o,u,f,m,C,R){if(!u)throw Error("Invalid event type");var K=h(C)?!!C.capture:!!C,wt=q(o);if(wt||(o[P]=wt=new ln(o)),f=wt.add(u,f,m,K,R),f.proxy)return f;if(m=W(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)We||(C=K),C===void 0&&(C=!1),o.addEventListener(u.toString(),m,C);else if(o.attachEvent)o.attachEvent(k(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function W(){function o(f){return u.call(o.src,o.listener,f)}const u=tt;return o}function j(o,u,f,m,C){if(Array.isArray(u))for(var R=0;R<u.length;R++)j(o,u[R],f,m,C);else m=h(m)?!!m.capture:!!m,f=it(f),o&&o[pe]?(o=o.i,u=String(u).toString(),u in o.g&&(R=o.g[u],f=I(R,f,m,C),-1<f&&(Ne(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete o.g[u],o.h--)))):o&&(o=q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=I(u,f,m,C)),(f=-1<o?u[o]:null)&&B(f))}function B(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[pe])v(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(k(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=q(u))?(v(f,o),f.h==0&&(f.src=null,u[P]=null)):Ne(o)}}}function k(o){return o in U?U[o]:U[o]="on"+o}function tt(o,u){if(o.da)o=!0;else{u=new Yt(u,this);var f=o.listener,m=o.ha||o.src;o.fa&&B(o),o=f.call(m,u)}return o}function q(o){return o=o[P],o instanceof ln?o:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(o){return typeof o=="function"?o:(o[Y]||(o[Y]=function(u){return o.handleEvent(u)}),o[Y])}function et(){Ct.call(this),this.i=new ln(this),this.M=this,this.F=null}D(et,Ct),et.prototype[pe]=!0,et.prototype.removeEventListener=function(o,u,f,m){j(this,o,u,f,m)};function at(o,u){var f,m=o.F;if(m)for(f=[];m;m=m.F)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new Pt(u,o);else if(u instanceof Pt)u.target=u.target||o;else{var C=u;u=new Pt(m,o),T(u,C)}if(C=!0,f)for(var R=f.length-1;0<=R;R--){var K=u.g=f[R];C=pt(K,m,!0,u)&&C}if(K=u.g=o,C=pt(K,m,!0,u)&&C,C=pt(K,m,!1,u)&&C,f)for(R=0;R<f.length;R++)K=u.g=f[R],C=pt(K,m,!1,u)&&C}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var f=o.g[u],m=0;m<f.length;m++)Ne(f[m]);delete o.g[u],o.h--}}this.F=null},et.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},et.prototype.L=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function pt(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,R=0;R<u.length;++R){var K=u[R];if(K&&!K.da&&K.capture==f){var wt=K.listener,Wt=K.ha||K.src;K.fa&&v(o.i,K),C=wt.call(Wt,m)!==!1&&C}}return C&&!m.defaultPrevented}function Xt(o,u,f){if(typeof o=="function")f&&(o=_(o,f));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Ht(o){o.g=Xt(()=>{o.g=null,o.i&&(o.i=!1,Ht(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Oe extends Ct{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Ht(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(o){Ct.call(this),this.h=o,this.g={}}D(Jt,Ct);var Cn=[];function Rr(o){Z(o.g,function(u,f){this.g.hasOwnProperty(f)&&B(u)},o),o.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),Rr(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,Ve=l.JSON.parse,Vi=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function xa(){}xa.prototype.h=null;function Mu(o){return o.h||(o.h=o.i())}function ku(){}var Pr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function La(){Pt.call(this,"d")}D(La,Pt);function Ma(){Pt.call(this,"c")}D(Ma,Pt);var ls={},$u=null;function xi(){return $u=$u||new et}ls.La="serverreachability";function Fu(o){Pt.call(this,ls.La,o)}D(Fu,Pt);function Dr(o){const u=xi();at(u,new Fu(u))}ls.STAT_EVENT="statevent";function Uu(o,u){Pt.call(this,ls.STAT_EVENT,o),this.stat=u}D(Uu,Pt);function le(o){const u=xi();at(u,new Uu(u,o))}ls.Ma="timingevent";function Bu(o,u){Pt.call(this,ls.Ma,o),this.size=u}D(Bu,Pt);function Nr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Or(){this.g=!0}Or.prototype.xa=function(){this.g=!1};function $_(o,u,f,m,C,R){o.info(function(){if(o.g)if(R)for(var K="",wt=R.split("&"),Wt=0;Wt<wt.length;Wt++){var Et=wt[Wt].split("=");if(1<Et.length){var Zt=Et[0];Et=Et[1];var te=Zt.split("_");K=2<=te.length&&te[1]=="type"?K+(Zt+"="+Et+"&"):K+(Zt+"=redacted&")}}else K=null;else K=R;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+u+`
`+f+`
`+K})}function F_(o,u,f,m,C,R,K){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+u+`
`+f+`
`+R+" "+K})}function Vs(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+B_(o,f)+(m?" "+m:"")})}function U_(o,u){o.info(function(){return"TIMEOUT: "+u})}Or.prototype.info=function(){};function B_(o,u){if(!o.g)return u;if(!u)return null;try{var f=JSON.parse(u);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var m=f[o];if(!(2>m.length)){var C=m[1];if(Array.isArray(C)&&!(1>C.length)){var R=C[0];if(R!="noop"&&R!="stop"&&R!="close")for(var K=1;K<C.length;K++)C[K]=""}}}}return Kt(f)}catch{return u}}var Li={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ju={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ka;function Mi(){}D(Mi,xa),Mi.prototype.g=function(){return new XMLHttpRequest},Mi.prototype.i=function(){return{}},ka=new Mi;function Rn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.R=m||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Hu}function Hu(){this.i=null,this.g="",this.h=!1}var Ku={},$a={};function Fa(o,u,f){o.L=1,o.v=Ui(cn(u)),o.m=f,o.P=!0,Wu(o,null)}function Wu(o,u){o.F=Date.now(),ki(o),o.A=cn(o.v);var f=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),ih(f.i,"t",m),o.C=0,f=o.j.J,o.h=new Hu,o.g=bh(o.j,f?u:null,!o.m),0<o.O&&(o.M=new Oe(_(o.Y,o,o.g),o.O)),u=o.U,f=o.g,m=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(Cn[0]=C.toString()),C=Cn);for(var R=0;R<C.length;R++){var K=x(f,C[R],m||u.handleEvent,!1,u.h||u);if(!K)break;u.g[K.key]=K}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Dr(),$_(o.i,o.u,o.A,o.l,o.R,o.m)}Rn.prototype.ca=function(o){o=o.target;const u=this.M;u&&un(o)==3?u.j():this.Y(o)},Rn.prototype.Y=function(o){try{if(o==this.g)t:{const te=un(this.g);var u=this.g.Ba();const Ms=this.g.Z();if(!(3>te)&&(te!=3||this.g&&(this.h.h||this.g.oa()||fh(this.g)))){this.J||te!=4||u==7||(u==8||0>=Ms?Dr(3):Dr(2)),Ua(this);var f=this.g.Z();this.X=f;e:if(qu(this)){var m=fh(this.g);o="";var C=m.length,R=un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),Vr(this);var K="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(R&&u==C-1)});m.length=0,this.h.g+=o,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=f==200,F_(this.i,this.u,this.A,this.l,this.R,te,f),this.o){if(this.T&&!this.K){e:{if(this.g){var wt,Wt=this.g;if((wt=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z(wt)){var Et=wt;break e}}Et=null}if(f=Et)Vs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ba(this,f);else{this.o=!1,this.s=3,le(12),cs(this),Vr(this);break t}}if(this.P){f=!0;let Ue;for(;!this.J&&this.C<K.length;)if(Ue=j_(this,K),Ue==$a){te==4&&(this.s=4,le(14),f=!1),Vs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==Ku){this.s=4,le(15),Vs(this.i,this.l,K,"[Invalid Chunk]"),f=!1;break}else Vs(this.i,this.l,Ue,null),Ba(this,Ue);if(qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||K.length!=0||this.h.h||(this.s=1,le(16),f=!1),this.o=this.o&&f,!f)Vs(this.i,this.l,K,"[Invalid Chunked Response]"),cs(this),Vr(this);else if(0<K.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),za(Zt),Zt.M=!0,le(11))}}else Vs(this.i,this.l,K,null),Ba(this,K);te==4&&cs(this),this.o&&!this.J&&(te==4?Eh(this.j,this):(this.o=!1,ki(this)))}else iy(this.g),f==400&&0<K.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),cs(this),Vr(this)}}}catch{}finally{}};function qu(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function j_(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?$a:(f=Number(u.substring(f,m)),isNaN(f)?Ku:(m+=1,m+f>u.length?$a:(u=u.slice(m,m+f),o.C=m+f,u)))}Rn.prototype.cancel=function(){this.J=!0,cs(this)};function ki(o){o.S=Date.now()+o.I,zu(o,o.I)}function zu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Nr(_(o.ba,o),u)}function Ua(o){o.B&&(l.clearTimeout(o.B),o.B=null)}Rn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(U_(this.i,this.A),this.L!=2&&(Dr(),le(17)),cs(this),this.s=2,Vr(this)):zu(this,this.S-o)};function Vr(o){o.j.G==0||o.J||Eh(o.j,o)}function cs(o){Ua(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Rr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Ba(o,u){try{var f=o.j;if(f.G!=0&&(f.g==o||ja(f.h,o))){if(!o.K&&ja(f.h,o)&&f.G==3){try{var m=f.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){t:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)qi(f),Ki(f);else break t;qa(f),le(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Nr(_(f.Za,f),6e3));if(1>=Yu(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else hs(f,11)}else if((o.K||f.g==o)&&qi(f),!z(u))for(C=f.Da.g.parse(u),u=0;u<C.length;u++){let Et=C[u];if(f.T=Et[0],Et=Et[1],f.G==2)if(Et[0]=="c"){f.K=Et[1],f.ia=Et[2];const Zt=Et[3];Zt!=null&&(f.la=Zt,f.j.info("VER="+f.la));const te=Et[4];te!=null&&(f.Aa=te,f.j.info("SVER="+f.Aa));const Ms=Et[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(m=1.5*Ms,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Ue=o.g;if(Ue){const Gi=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gi){var R=m.h;R.g||Gi.indexOf("spdy")==-1&&Gi.indexOf("quic")==-1&&Gi.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ha(R,R.h),R.h=null))}if(m.D){const Ga=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;Ga&&(m.ya=Ga,Rt(m.I,m.D,Ga))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var K=o;if(m.qa=Ah(m,m.J?m.ia:null,m.W),K.K){Xu(m.h,K);var wt=K,Wt=m.L;Wt&&(wt.I=Wt),wt.B&&(Ua(wt),ki(wt)),m.g=K}else _h(m);0<f.i.length&&Wi(f)}else Et[0]!="stop"&&Et[0]!="close"||hs(f,7);else f.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?hs(f,7):Wa(f):Et[0]!="noop"&&f.l&&f.l.ta(Et),f.v=0)}}Dr(4)}catch{}}var H_=class{constructor(o,u){this.g=o,this.map=u}};function Gu(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Yu(o){return o.h?1:o.g?o.g.size:0}function ja(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function Ha(o,u){o.g?o.g.add(u):o.h=u}function Xu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}Gu.prototype.cancel=function(){if(this.i=Ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ju(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.D);return u}return N(o.i)}function K_(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],f=o.length,m=0;m<f;m++)u.push(o[m]);return u}u=[],f=0;for(m in o)u[f++]=o[m];return u}function W_(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(const m in o)u[f++]=m;return u}}}function Zu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var f=W_(o),m=K_(o),C=m.length,R=0;R<C;R++)u.call(void 0,m[R],f&&f[R],o)}var th=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q_(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var m=o[f].indexOf("="),C=null;if(0<=m){var R=o[f].substring(0,m);C=o[f].substring(m+1)}else R=o[f];u(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function us(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof us){this.h=o.h,$i(this,o.j),this.o=o.o,this.g=o.g,Fi(this,o.s),this.l=o.l;var u=o.i,f=new Mr;f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),eh(this,f),this.m=o.m}else o&&(u=String(o).match(th))?(this.h=!1,$i(this,u[1]||"",!0),this.o=xr(u[2]||""),this.g=xr(u[3]||"",!0),Fi(this,u[4]),this.l=xr(u[5]||"",!0),eh(this,u[6]||"",!0),this.m=xr(u[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}us.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Lr(u,nh,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Lr(u,nh,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Lr(f,f.charAt(0)=="/"?Q_:G_,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Lr(f,X_)),o.join("")};function cn(o){return new us(o)}function $i(o,u,f){o.j=f?xr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Fi(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function eh(o,u,f){u instanceof Mr?(o.i=u,J_(o.i,o.h)):(f||(u=Lr(u,Y_)),o.i=new Mr(u,o.h))}function Rt(o,u,f){o.i.set(u,f)}function Ui(o){return Rt(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function xr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Lr(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,z_),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function z_(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var nh=/[#\/\?@]/g,G_=/[#\?:]/g,Q_=/[#\?]/g,Y_=/[#\?@]/g,X_=/#/g;function Mr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Pn(o){o.g||(o.g=new Map,o.h=0,o.i&&q_(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}n=Mr.prototype,n.add=function(o,u){Pn(this),this.i=null,o=xs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function sh(o,u){Pn(o),u=xs(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function rh(o,u){return Pn(o),u=xs(o,u),o.g.has(u)}n.forEach=function(o,u){Pn(this),this.g.forEach(function(f,m){f.forEach(function(C){o.call(u,C,m,this)},this)},this)},n.na=function(){Pn(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),f=[];for(let m=0;m<u.length;m++){const C=o[m];for(let R=0;R<C.length;R++)f.push(u[m])}return f},n.V=function(o){Pn(this);let u=[];if(typeof o=="string")rh(this,o)&&(u=u.concat(this.g.get(xs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)u=u.concat(o[f])}return u},n.set=function(o,u){return Pn(this),this.i=null,o=xs(this,o),rh(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function ih(o,u,f){sh(o,u),0<f.length&&(o.i=null,o.g.set(xs(o,u),N(f)),o.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var f=0;f<u.length;f++){var m=u[f];const R=encodeURIComponent(String(m)),K=this.V(m);for(m=0;m<K.length;m++){var C=R;K[m]!==""&&(C+="="+encodeURIComponent(String(K[m]))),o.push(C)}}return this.i=o.join("&")};function xs(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function J_(o,u){u&&!o.j&&(Pn(o),o.i=null,o.g.forEach(function(f,m){var C=m.toLowerCase();m!=C&&(sh(this,m),ih(this,C,f))},o)),o.j=u}function Z_(o,u){const f=new Or;if(l.Image){const m=new Image;m.onload=b(Dn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=b(Dn,f,"TestLoadImage: error",!1,u,m),m.onabort=b(Dn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=b(Dn,f,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function ty(o,u){const f=new Or,m=new AbortController,C=setTimeout(()=>{m.abort(),Dn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(R=>{clearTimeout(C),R.ok?Dn(f,"TestPingServer: ok",!0,u):Dn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),Dn(f,"TestPingServer: error",!1,u)})}function Dn(o,u,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function ey(){this.g=new Vi}function ny(o,u,f){const m=f||"";try{Zu(o,function(C,R){let K=C;h(C)&&(K=Kt(C)),u.push(m+R+"="+encodeURIComponent(K))})}catch(C){throw u.push(m+"type="+encodeURIComponent("_badmap")),C}}function Bi(o){this.l=o.Ub||null,this.j=o.eb||!1}D(Bi,xa),Bi.prototype.g=function(){return new ji(this.l,this.j)},Bi.prototype.i=function(o){return function(){return o}}({});function ji(o,u){et.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ji,et),n=ji.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,$r(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,$r(this)),this.g&&(this.readyState=3,$r(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oh(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function oh(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?kr(this):$r(this),this.readyState==3&&oh(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,kr(this))},n.Qa=function(o){this.g&&(this.response=o,kr(this))},n.ga=function(){this.g&&kr(this)};function kr(o){o.readyState=4,o.l=null,o.j=null,o.v=null,$r(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function $r(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function ah(o){let u="";return Z(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function Ka(o,u,f){t:{for(m in f){var m=!1;break t}m=!0}m||(f=ah(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):Rt(o,u,f))}function Vt(o){et.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(Vt,et);var sy=/^https?$/i,ry=["POST","PUT"];n=Vt.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ka.g(),this.v=this.o?Mu(this.o):Mu(ka),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(R){lh(this,R);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(ry,u,void 0))||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,K]of f)this.g.setRequestHeader(R,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{hh(this),this.u=!0,this.g.send(o),this.u=!1}catch(R){lh(this,R)}};function lh(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,ch(o),Hi(o)}function ch(o){o.A||(o.A=!0,at(o,"complete"),at(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,at(this,"complete"),at(this,"abort"),Hi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hi(this,!0)),Vt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?uh(this):this.bb())},n.bb=function(){uh(this)};function uh(o){if(o.h&&typeof a<"u"&&(!o.v[1]||un(o)!=4||o.Z()!=2)){if(o.u&&un(o)==4)Xt(o.Ea,0,o);else if(at(o,"readystatechange"),un(o)==4){o.h=!1;try{const K=o.Z();t:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var m;if(m=K===0){var C=String(o.D).match(th)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),m=!sy.test(C?C.toLowerCase():"")}f=m}if(f)at(o,"complete"),at(o,"success");else{o.m=6;try{var R=2<un(o)?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.Z()+"]",ch(o)}}finally{Hi(o)}}}}function Hi(o,u){if(o.g){hh(o);const f=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||at(o,"ready");try{f.onreadystatechange=m}catch{}}}function hh(o){o.I&&(l.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function un(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<un(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ve(u)}};function fh(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function iy(o){const u={};o=(o.g&&2<=un(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(z(o[m]))continue;var f=w(o[m]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const R=u[C]||[];u[C]=R,R.push(f)}A(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fr(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function dh(o){this.Aa=0,this.i=[],this.j=new Or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fr("baseRetryDelayMs",5e3,o),this.cb=Fr("retryDelaySeedMs",1e4,o),this.Wa=Fr("forwardChannelMaxRetries",2,o),this.wa=Fr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Gu(o&&o.concurrentRequestLimit),this.Da=new ey,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=dh.prototype,n.la=8,n.G=1,n.connect=function(o,u,f,m){le(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=Ah(this,null,this.W),Wi(this)};function Wa(o){if(ph(o),o.G==3){var u=o.U++,f=cn(o.I);if(Rt(f,"SID",o.K),Rt(f,"RID",u),Rt(f,"TYPE","terminate"),Ur(o,f),u=new Rn(o,o.j,u),u.L=2,u.v=Ui(cn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=u.v,f=!0),f||(u.g=bh(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ki(u)}Th(o)}function Ki(o){o.g&&(za(o),o.g.cancel(),o.g=null)}function ph(o){Ki(o),o.u&&(l.clearTimeout(o.u),o.u=null),qi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function Wi(o){if(!Qu(o.h)&&!o.s){o.s=!0;var u=o.Ga;ft||De(),dt||(ft(),dt=!0),$t.add(u,o),o.B=0}}function oy(o,u){return Yu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Nr(_(o.Ga,o,u),vh(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new Rn(this,this.j,o);let R=this.o;if(this.S&&(R?(R=g(R),T(R,this.S)):R=this.S),this.m!==null||this.O||(C.H=R,R=null),this.P)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=gh(this,C,u),f=cn(this.I),Rt(f,"RID",o),Rt(f,"CVER",22),this.D&&Rt(f,"X-HTTP-Session-Id",this.D),Ur(this,f),R&&(this.O?u="headers="+encodeURIComponent(String(ah(R)))+"&"+u:this.m&&Ka(f,this.m,R)),Ha(this.h,C),this.Ua&&Rt(f,"TYPE","init"),this.P?(Rt(f,"$req",u),Rt(f,"SID","null"),C.T=!0,Fa(C,f,null)):Fa(C,f,u),this.G=2}}else this.G==3&&(o?mh(this,o):this.i.length==0||Qu(this.h)||mh(this))};function mh(o,u){var f;u?f=u.l:f=o.U++;const m=cn(o.I);Rt(m,"SID",o.K),Rt(m,"RID",f),Rt(m,"AID",o.T),Ur(o,m),o.m&&o.o&&Ka(m,o.m,o.o),f=new Rn(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),u&&(o.i=u.D.concat(o.i)),u=gh(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ha(o.h,f),Fa(f,m,u)}function Ur(o,u){o.H&&Z(o.H,function(f,m){Rt(u,m,f)}),o.l&&Zu({},function(f,m){Rt(u,m,f)})}function gh(o,u,f){f=Math.min(o.i.length,f);var m=o.l?_(o.l.Na,o.l,o):null;t:{var C=o.i;let R=-1;for(;;){const K=["count="+f];R==-1?0<f?(R=C[0].g,K.push("ofs="+R)):R=0:K.push("ofs="+R);let wt=!0;for(let Wt=0;Wt<f;Wt++){let Et=C[Wt].g;const Zt=C[Wt].map;if(Et-=R,0>Et)R=Math.max(0,C[Wt].g-100),wt=!1;else try{ny(Zt,K,"req"+Et+"_")}catch{m&&m(Zt)}}if(wt){m=K.join("&");break t}}}return o=o.i.splice(0,f),u.D=o,m}function _h(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;ft||De(),dt||(ft(),dt=!0),$t.add(u,o),o.v=0}}function qa(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Nr(_(o.Fa,o),vh(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,yh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Nr(_(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Ki(this),yh(this))};function za(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function yh(o){o.g=new Rn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=cn(o.qa);Rt(u,"RID","rpc"),Rt(u,"SID",o.K),Rt(u,"AID",o.T),Rt(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Rt(u,"TO",o.ja),Rt(u,"TYPE","xmlhttp"),Ur(o,u),o.m&&o.o&&Ka(u,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=Ui(cn(u)),f.m=null,f.P=!0,Wu(f,o)}n.Za=function(){this.C!=null&&(this.C=null,Ki(this),qa(this),le(19))};function qi(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Eh(o,u){var f=null;if(o.g==u){qi(o),za(o),o.g=null;var m=2}else if(ja(o.h,u))f=u.D,Xu(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){f=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;m=xi(),at(m,new Bu(m,f)),Wi(o)}else _h(o);else if(C=u.s,C==3||C==0&&0<u.X||!(m==1&&oy(o,u)||m==2&&qa(o)))switch(f&&0<f.length&&(u=o.h,u.i=u.i.concat(f)),C){case 1:hs(o,5);break;case 4:hs(o,10);break;case 3:hs(o,6);break;default:hs(o,2)}}}function vh(o,u){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*u}function hs(o,u){if(o.j.info("Error code "+u),u==2){var f=_(o.fb,o),m=o.Xa;const C=!m;m=new us(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||$i(m,"https"),Ui(m),C?Z_(m.toString(),f):ty(m.toString(),f)}else le(2);o.G=0,o.l&&o.l.sa(u),Th(o),ph(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Th(o){if(o.G=0,o.ka=[],o.l){const u=Ju(o.h);(u.length!=0||o.i.length!=0)&&(O(o.ka,u),O(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function Ah(o,u,f){var m=f instanceof us?cn(f):new us(f);if(m.g!="")u&&(m.g=u+"."+m.g),Fi(m,m.s);else{var C=l.location;m=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var R=new us(null);m&&$i(R,m),u&&(R.g=u),C&&Fi(R,C),f&&(R.l=f),m=R}return f=o.D,u=o.ya,f&&u&&Rt(m,f,u),Rt(m,"VER",o.la),Ur(o,m),m}function bh(o,u,f){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Vt(new Bi({eb:f})):new Vt(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wh(){}n=wh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zi(){}zi.prototype.g=function(o,u){return new Te(o,u)};function Te(o,u){et.call(this),this.g=new dh(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!z(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!z(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Ls(this)}D(Te,et),Te.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Te.prototype.close=function(){Wa(this.g)},Te.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=Kt(o),o=f);u.i.push(new H_(u.Ya++,o)),u.G==3&&Wi(u)},Te.prototype.N=function(){this.g.l=null,delete this.j,Wa(this.g),delete this.g,Te.aa.N.call(this)};function Ih(o){La.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}D(Ih,La);function Sh(){Ma.call(this),this.status=1}D(Sh,Ma);function Ls(o){this.g=o}D(Ls,wh),Ls.prototype.ua=function(){at(this.g,"a")},Ls.prototype.ta=function(o){at(this.g,new Ih(o))},Ls.prototype.sa=function(o){at(this.g,new Sh)},Ls.prototype.ra=function(){at(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,Te.prototype.send=Te.prototype.o,Te.prototype.open=Te.prototype.m,Te.prototype.close=Te.prototype.close,fm=function(){return new zi},hm=function(){return xi()},um=ls,Ql={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Li.NO_ERROR=0,Li.TIMEOUT=8,Li.HTTP_ERROR=6,go=Li,ju.COMPLETE="complete",cm=ju,ku.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",et.prototype.listen=et.prototype.K,qr=ku,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,lm=Vt}).apply(typeof Ji<"u"?Ji:typeof self<"u"?self:typeof window<"u"?window:{});const mf="@firebase/firestore",gf="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ne.UNAUTHENTICATED=new ne(null),ne.GOOGLE_CREDENTIALS=new ne("google-credentials-uid"),ne.FIRST_PARTY=new ne("first-party-uid"),ne.MOCK_USER=new ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Er="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new em("@firebase/firestore");function js(){return ws.logLevel}function Q(n,...t){if(ws.logLevel<=yt.DEBUG){const e=t.map($c);ws.debug(`Firestore (${Er}): ${n}`,...e)}}function vn(n,...t){if(ws.logLevel<=yt.ERROR){const e=t.map($c);ws.error(`Firestore (${Er}): ${n}`,...e)}}function rr(n,...t){if(ws.logLevel<=yt.WARN){const e=t.map($c);ws.warn(`Firestore (${Er}): ${n}`,...e)}}function $c(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n="Unexpected state"){const t=`FIRESTORE (${Er}) INTERNAL ASSERTION FAILED: `+n;throw vn(t),new Error(t)}function bt(n,t){n||ot()}function ut(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends yr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ne.UNAUTHENTICATED))}shutdown(){}}class pA{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(t){this.t=t,this.currentUser=ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){bt(this.o===void 0);let s=this.i;const r=c=>this.i!==s?(s=this.i,e(c)):Promise.resolve();let i=new gn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gn,t.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},l=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gn)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(s=>this.i!==t?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(bt(typeof s.accessToken=="string"),new dm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return bt(t===null||typeof t=="string"),new ne(t)}}class gA{constructor(t,e,s){this.l=t,this.h=e,this.P=s,this.type="FirstParty",this.user=ne.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class _A{constructor(t,e,s){this.l=t,this.h=e,this.P=s}getToken(){return Promise.resolve(new gA(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _f{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yA{constructor(t,e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,YT(t)&&t.settings.appCheckToken&&(this.V=t.settings.appCheckToken)}start(t,e){bt(this.o===void 0);const s=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?e(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>s(i))};const r=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new _f(this.V));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(bt(typeof e.token=="string"),this.R=e.token,new _f(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let s=0;s<n;s++)e[s]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=EA(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<e&&(s+=t.charAt(r[i]%62))}return s}}function gt(n,t){return n<t?-1:n>t?1:0}function ir(n,t,e){return n.length===t.length&&n.every((s,r)=>e(s,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf=-62135596800,Ef=1e6;class Ut{static now(){return Ut.fromMillis(Date.now())}static fromDate(t){return Ut.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),s=Math.floor((t-1e3*e)*Ef);return new Ut(e,s)}constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new J(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new J(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<yf)throw new J(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ef}_compareTo(t){return this.seconds===t.seconds?gt(this.nanoseconds,t.nanoseconds):gt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-yf;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static fromTimestamp(t){return new lt(t)}static min(){return new lt(new Ut(0,0))}static max(){return new lt(new Ut(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="__name__";class Qe{constructor(t,e,s){e===void 0?e=0:e>t.length&&ot(),s===void 0?s=t.length-e:s>t.length-e&&ot(),this.segments=t,this.offset=e,this.len=s}get length(){return this.len}isEqual(t){return Qe.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Qe?t.forEach(s=>{e.push(s)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,s=this.limit();e<s;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const s=Math.min(t.length,e.length);for(let r=0;r<s;r++){const i=Qe.compareSegments(t.get(r),e.get(r));if(i!==0)return i}return Math.sign(t.length-e.length)}static compareSegments(t,e){const s=Qe.isNumericId(t),r=Qe.isNumericId(e);return s&&!r?-1:!s&&r?1:s&&r?Qe.extractNumericId(t).compare(Qe.extractNumericId(e)):t<e?-1:t>e?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Bn.fromString(t.substring(4,t.length-2))}}class Dt extends Qe{construct(t,e,s){return new Dt(t,e,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const s of t){if(s.indexOf("//")>=0)throw new J(M.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(r=>r.length>0))}return new Dt(e)}static emptyPath(){return new Dt([])}}const vA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Qe{construct(t,e,s){return new zt(t,e,s)}static isValidIdentifier(t){return vA.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vf}static keyField(){return new zt([vf])}static fromServerFormat(t){const e=[];let s="",r=0;const i=()=>{if(s.length===0)throw new J(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(s),s=""};let a=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new J(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,r+=2}else l==="`"?(a=!a,r++):l!=="."||a?(s+=l,r++):(i(),r++)}if(i(),a)throw new J(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new zt(e)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Dt.fromString(t))}static fromName(t){return new rt(Dt.fromString(t).popFirst(5))}static empty(){return new rt(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Dt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Dt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Dt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=-1;function TA(n,t){const e=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=lt.fromTimestamp(s===1e9?new Ut(e+1,0):new Ut(e,s));return new Wn(r,rt.empty(),t)}function AA(n){return new Wn(n.readTime,n.key,mi)}class Wn{constructor(t,e,s){this.readTime=t,this.documentKey=e,this.largestBatchId=s}static min(){return new Wn(lt.min(),rt.empty(),mi)}static max(){return new Wn(lt.max(),rt.empty(),mi)}}function bA(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(n.documentKey,t.documentKey),e!==0?e:gt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vr(n){if(n.code!==M.FAILED_PRECONDITION||n.message!==wA)throw n;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new V((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(e,i).next(s,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof V?e:V.resolve(e)}catch(e){return V.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):V.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):V.reject(e)}static resolve(t){return new V((e,s)=>{e(t)})}static reject(t){return new V((e,s)=>{s(t)})}static waitFor(t){return new V((e,s)=>{let r=0,i=0,a=!1;t.forEach(l=>{++r,l.next(()=>{++i,a&&i===r&&e()},c=>s(c))}),a=!0,i===r&&e()})}static or(t){let e=V.resolve(!1);for(const s of t)e=e.next(r=>r?V.resolve(r):s());return e}static forEach(t,e){const s=[];return t.forEach((r,i)=>{s.push(e.call(this,r,i))}),this.waitFor(s)}static mapArray(t,e){return new V((s,r)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;e(t[h]).next(d=>{a[h]=d,++l,l===i&&s(a)},d=>r(d))}})}static doWhile(t,e){return new V((s,r)=>{const i=()=>{t()===!0?e().next(()=>{i()},r):s()};i()})}}function SA(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Tr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=s=>this.oe(s),this._e=s=>e.writeSequenceNumber(s))}oe(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this._e&&this._e(t),t}}ca.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=-1;function ua(n){return n==null}function Mo(n){return n===0&&1/n==-1/0}function CA(n){return typeof n=="number"&&Number.isInteger(n)&&!Mo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="";function RA(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=Tf(t)),t=PA(n.get(e),t);return Tf(t)}function PA(n,t){let e=t;const s=n.length;for(let r=0;r<s;r++){const i=n.charAt(r);switch(i){case"\0":e+="";break;case mm:e+="";break;default:e+=i}}return e}function Tf(n){return n+mm+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function ss(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function gm(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,e){this.comparator=t,this.root=e||qt.EMPTY}insert(t,e){return new Ot(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,qt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const s=this.comparator(t,e.key);if(s===0)return e.value;s<0?e=e.left:s>0&&(e=e.right)}return null}indexOf(t){let e=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return e+s.left.size;r<0?s=s.left:(e+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,s)=>(t(e,s),!1))}toString(){const t=[];return this.inorderTraversal((e,s)=>(t.push(`${e}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zi(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zi(this.root,t,this.comparator,!0)}}class Zi{constructor(t,e,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=e?s(t.key,e):1,e&&r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class qt{constructor(t,e,s,r,i){this.key=t,this.value=e,this.color=s??qt.RED,this.left=r??qt.EMPTY,this.right=i??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,s,r,i){return new qt(t??this.key,e??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,s){let r=this;const i=s(t,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(t,e,s),null):i===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let s,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const t=this.left.check();if(t!==this.right.check())throw ot();return t+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(t,e,s,r,i){return this}insert(t,e,s){return new qt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,s)=>(t(e),!1))}forEachInRange(t,e){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let s;for(s=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new bf(this.data.getIterator())}getIteratorFrom(t){return new bf(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(s=>{e=e.add(s)}),e}isEqual(t){if(!(t instanceof Bt)||this.size!==t.size)return!1;const e=this.data.getIterator(),s=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Bt(this.comparator);return e.data=t,e}}class bf{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.fields=t,t.sort(zt.comparator)}static empty(){return new Ie([])}unionWith(t){let e=new Bt(zt.comparator);for(const s of this.fields)e=e.add(s);for(const s of t)e=e.add(s);return new Ie(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ir(this.fields,t.fields,(e,s)=>e.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _m("Invalid base64 string: "+i):i}}(t);return new Gt(e)}static fromUint8Array(t){const e=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(t);return new Gt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const s=new Uint8Array(e.length);for(let r=0;r<e.length;r++)s[r]=e.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const DA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qn(n){if(bt(!!n),typeof n=="string"){let t=0;const e=DA.exec(n);if(bt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Lt(n.seconds),nanos:Lt(n.nanos)}}function Lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function zn(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="server_timestamp",Em="__type__",vm="__previous_value__",Tm="__local_write_time__";function Uc(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Em])===null||e===void 0?void 0:e.stringValue)===ym}function ha(n){const t=n.mapValue.fields[vm];return Uc(t)?ha(t):t}function gi(n){const t=qn(n.mapValue.fields[Tm].timestampValue);return new Ut(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(t,e,s,r,i,a,l,c,h){this.databaseId=t,this.appId=e,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}const ko="(default)";class _i{constructor(t,e){this.projectId=t,this.database=e||ko}static empty(){return new _i("","")}get isDefaultDatabase(){return this.database===ko}isEqual(t){return t instanceof _i&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="__type__",OA="__max__",to={mapValue:{}},bm="__vector__",$o="value";function Gn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Uc(n)?4:xA(n)?9007199254740991:VA(n)?10:11:ot()}function rn(n,t){if(n===t)return!0;const e=Gn(n);if(e!==Gn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return gi(n).isEqual(gi(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=qn(r.timestampValue),l=qn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,i){return zn(r.bytesValue).isEqual(zn(i.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Lt(r.geoPointValue.latitude)===Lt(i.geoPointValue.latitude)&&Lt(r.geoPointValue.longitude)===Lt(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lt(r.integerValue)===Lt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Lt(r.doubleValue),l=Lt(i.doubleValue);return a===l?Mo(a)===Mo(l):isNaN(a)&&isNaN(l)}return!1}(n,t);case 9:return ir(n.arrayValue.values||[],t.arrayValue.values||[],rn);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Af(a)!==Af(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!rn(a[c],l[c])))return!1;return!0}(n,t);default:return ot()}}function yi(n,t){return(n.values||[]).find(e=>rn(e,t))!==void 0}function or(n,t){if(n===t)return 0;const e=Gn(n),s=Gn(t);if(e!==s)return gt(e,s);switch(e){case 0:case 9007199254740991:return 0;case 1:return gt(n.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Lt(i.integerValue||i.doubleValue),c=Lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,t);case 3:return wf(n.timestampValue,t.timestampValue);case 4:return wf(gi(n),gi(t));case 5:return gt(n.stringValue,t.stringValue);case 6:return function(i,a){const l=zn(i),c=zn(a);return l.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=gt(l[h],c[h]);if(d!==0)return d}return gt(l.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,a){const l=gt(Lt(i.latitude),Lt(a.latitude));return l!==0?l:gt(Lt(i.longitude),Lt(a.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return If(n.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,h,d;const p=i.fields||{},_=a.fields||{},b=(l=p[$o])===null||l===void 0?void 0:l.arrayValue,D=(c=_[$o])===null||c===void 0?void 0:c.arrayValue,N=gt(((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0,((d=D==null?void 0:D.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:If(b,D)}(n.mapValue,t.mapValue);case 11:return function(i,a){if(i===to.mapValue&&a===to.mapValue)return 0;if(i===to.mapValue)return 1;if(a===to.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const _=gt(c[p],d[p]);if(_!==0)return _;const b=or(l[c[p]],h[d[p]]);if(b!==0)return b}return gt(c.length,d.length)}(n.mapValue,t.mapValue);default:throw ot()}}function wf(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return gt(n,t);const e=qn(n),s=qn(t),r=gt(e.seconds,s.seconds);return r!==0?r:gt(e.nanos,s.nanos)}function If(n,t){const e=n.values||[],s=t.values||[];for(let r=0;r<e.length&&r<s.length;++r){const i=or(e[r],s[r]);if(i)return i}return gt(e.length,s.length)}function ar(n){return Yl(n)}function Yl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const s=qn(e);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return zn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return rt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let s="[",r=!0;for(const i of e.values||[])r?r=!1:s+=",",s+=Yl(i);return s+"]"}(n.arrayValue):"mapValue"in n?function(e){const s=Object.keys(e.fields||{}).sort();let r="{",i=!0;for(const a of s)i?i=!1:r+=",",r+=`${a}:${Yl(e.fields[a])}`;return r+"}"}(n.mapValue):ot()}function _o(n){switch(Gn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ha(n);return t?16+_o(t):16;case 5:return 2*n.stringValue.length;case 6:return zn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((r,i)=>r+_o(i),0)}(n.arrayValue);case 10:case 11:return function(s){let r=0;return ss(s.fields,(i,a)=>{r+=i.length+_o(a)}),r}(n.mapValue);default:throw ot()}}function Xl(n){return!!n&&"integerValue"in n}function Bc(n){return!!n&&"arrayValue"in n}function Sf(n){return!!n&&"nullValue"in n}function Cf(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yo(n){return!!n&&"mapValue"in n}function VA(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{})[Am])===null||e===void 0?void 0:e.stringValue)===bm}function ni(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return ss(n.mapValue.fields,(e,s)=>t.mapValue.fields[e]=ni(s)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ni(n.arrayValue.values[e]);return t}return Object.assign({},n)}function xA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.value=t}static empty(){return new ge({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let s=0;s<t.length-1;++s)if(e=(e.mapValue.fields||{})[t.get(s)],!yo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ni(e)}setAll(t){let e=zt.emptyPath(),s={},r=[];t.forEach((a,l)=>{if(!e.isImmediateParentOf(l)){const c=this.getFieldsMap(e);this.applyChanges(c,s,r),s={},r=[],e=l.popLast()}a?s[l.lastSegment()]=ni(a):r.push(l.lastSegment())});const i=this.getFieldsMap(e);this.applyChanges(i,s,r)}delete(t){const e=this.field(t.popLast());yo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return rn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let s=0;s<t.length;++s){let r=e.mapValue.fields[t.get(s)];yo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(s)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,s){ss(e,(r,i)=>t[r]=i);for(const r of s)delete t[r]}clone(){return new ge(ni(this.value))}}function wm(n){const t=[];return ss(n.fields,(e,s)=>{const r=new zt([e]);if(yo(s)){const i=wm(s.mapValue).fields;if(i.length===0)t.push(r);else for(const a of i)t.push(r.child(a))}else t.push(r)}),new Ie(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,s,r,i,a,l){this.key=t,this.documentType=e,this.version=s,this.readTime=r,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,lt.min(),lt.min(),lt.min(),ge.empty(),0)}static newFoundDocument(t,e,s,r){return new ie(t,1,e,lt.min(),s,r,0)}static newNoDocument(t,e){return new ie(t,2,e,lt.min(),lt.min(),ge.empty(),0)}static newUnknownDocument(t,e){return new ie(t,3,e,lt.min(),lt.min(),ge.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(lt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ge.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=lt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,e){this.position=t,this.inclusive=e}}function Rf(n,t,e){let s=0;for(let r=0;r<n.position.length;r++){const i=t[r],a=n.position[r];if(i.field.isKeyField()?s=rt.comparator(rt.fromName(a.referenceValue),e.key):s=or(a,e.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Pf(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!rn(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,e="asc"){this.field=t,this.dir=e}}function LA(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{}class Ft extends Im{constructor(t,e,s){super(),this.field=t,this.op=e,this.value=s}static create(t,e,s){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,s):new kA(t,e,s):e==="array-contains"?new UA(t,s):e==="in"?new BA(t,s):e==="not-in"?new jA(t,s):e==="array-contains-any"?new HA(t,s):new Ft(t,e,s)}static createKeyFieldInFilter(t,e,s){return e==="in"?new $A(t,s):new FA(t,s)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(or(e,this.value)):e!==null&&Gn(this.value)===Gn(e)&&this.matchesComparison(or(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends Im{constructor(t,e){super(),this.filters=t,this.op=e,this.ce=null}static create(t,e){return new on(t,e)}matches(t){return Sm(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Sm(n){return n.op==="and"}function Cm(n){return MA(n)&&Sm(n)}function MA(n){for(const t of n.filters)if(t instanceof on)return!1;return!0}function Jl(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+ar(n.value);if(Cm(n))return n.filters.map(t=>Jl(t)).join(",");{const t=n.filters.map(e=>Jl(e)).join(",");return`${n.op}(${t})`}}function Rm(n,t){return n instanceof Ft?function(s,r){return r instanceof Ft&&s.op===r.op&&s.field.isEqual(r.field)&&rn(s.value,r.value)}(n,t):n instanceof on?function(s,r){return r instanceof on&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce((i,a,l)=>i&&Rm(a,r.filters[l]),!0):!1}(n,t):void ot()}function Pm(n){return n instanceof Ft?function(e){return`${e.field.canonicalString()} ${e.op} ${ar(e.value)}`}(n):n instanceof on?function(e){return e.op.toString()+" {"+e.getFilters().map(Pm).join(" ,")+"}"}(n):"Filter"}class kA extends Ft{constructor(t,e,s){super(t,e,s),this.key=rt.fromName(s.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class $A extends Ft{constructor(t,e){super(t,"in",e),this.keys=Dm("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class FA extends Ft{constructor(t,e){super(t,"not-in",e),this.keys=Dm("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Dm(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(s=>rt.fromName(s.referenceValue))}class UA extends Ft{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Bc(e)&&yi(e.arrayValue,this.value)}}class BA extends Ft{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&yi(this.value.arrayValue,e)}}class jA extends Ft{constructor(t,e){super(t,"not-in",e)}matches(t){if(yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!yi(this.value.arrayValue,e)}}class HA extends Ft{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Bc(e)||!e.arrayValue.values)&&e.arrayValue.values.some(s=>yi(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(t,e=null,s=[],r=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=a,this.endAt=l,this.le=null}}function Df(n,t=null,e=[],s=[],r=null,i=null,a=null){return new KA(n,t,e,s,r,i,a)}function jc(n){const t=ut(n);if(t.le===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(s=>Jl(s)).join(","),e+="|ob:",e+=t.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),ua(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(s=>ar(s)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(s=>ar(s)).join(",")),t.le=e}return t.le}function Hc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!LA(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Rm(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Pf(n.startAt,t.startAt)&&Pf(n.endAt,t.endAt)}function Zl(n){return rt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,e=null,s=[],r=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function WA(n,t,e,s,r,i,a,l){return new fa(n,t,e,s,r,i,a,l)}function Kc(n){return new fa(n)}function Nf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qA(n){return n.collectionGroup!==null}function si(n){const t=ut(n);if(t.he===null){t.he=[];const e=new Set;for(const i of t.explicitOrderBy)t.he.push(i),e.add(i.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Bt(zt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(t).forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.he.push(new Uo(i,s))}),e.has(zt.keyField().canonicalString())||t.he.push(new Uo(zt.keyField(),s))}return t.he}function Ze(n){const t=ut(n);return t.Pe||(t.Pe=zA(t,si(n))),t.Pe}function zA(n,t){if(n.limitType==="F")return Df(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new Uo(r.field,i)});const e=n.endAt?new Fo(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Fo(n.startAt.position,n.startAt.inclusive):null;return Df(n.path,n.collectionGroup,t,n.filters,n.limit,e,s)}}function tc(n,t,e){return new fa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function da(n,t){return Hc(Ze(n),Ze(t))&&n.limitType===t.limitType}function Nm(n){return`${jc(Ze(n))}|lt:${n.limitType}`}function Hs(n){return`Query(target=${function(e){let s=e.path.canonicalString();return e.collectionGroup!==null&&(s+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(s+=`, filters: [${e.filters.map(r=>Pm(r)).join(", ")}]`),ua(e.limit)||(s+=", limit: "+e.limit),e.orderBy.length>0&&(s+=`, orderBy: [${e.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),e.startAt&&(s+=", startAt: ",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>ar(r)).join(",")),e.endAt&&(s+=", endAt: ",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>ar(r)).join(",")),`Target(${s})`}(Ze(n))}; limitType=${n.limitType})`}function pa(n,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):rt.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,t)&&function(s,r){for(const i of si(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(a,l,c){const h=Rf(a,l,c);return a.inclusive?h<=0:h<0}(s.startAt,si(s),r)||s.endAt&&!function(a,l,c){const h=Rf(a,l,c);return a.inclusive?h>=0:h>0}(s.endAt,si(s),r))}(n,t)}function GA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Om(n){return(t,e)=>{let s=!1;for(const r of si(n)){const i=QA(r,t,e);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function QA(n,t,e){const s=n.field.isKeyField()?rt.comparator(t.key,e.key):function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?or(c,h):ot()}(n.field,t,e);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return ot()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,t))return i}}has(t){return this.get(t)!==void 0}set(t,e){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return this.inner[s]=[[t,e]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),s=this.inner[e];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return s.length===1?delete this.inner[e]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(t){ss(this.inner,(e,s)=>{for(const[r,i]of s)t(r,i)})}isEmpty(){return gm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Ot(rt.comparator);function Tn(){return YA}const Vm=new Ot(rt.comparator);function zr(...n){let t=Vm;for(const e of n)t=t.insert(e.key,e);return t}function xm(n){let t=Vm;return n.forEach((e,s)=>t=t.insert(e,s.overlayedDocument)),t}function _s(){return ri()}function Lm(){return ri()}function ri(){return new Ps(n=>n.toString(),(n,t)=>n.isEqual(t))}const XA=new Ot(rt.comparator),JA=new Bt(rt.comparator);function mt(...n){let t=JA;for(const e of n)t=t.add(e);return t}const ZA=new Bt(gt);function tb(){return ZA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mo(t)?"-0":t}}function Mm(n){return{integerValue:""+n}}function eb(n,t){return CA(t)?Mm(t):Wc(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){this._=void 0}}function nb(n,t,e){return n instanceof Bo?function(r,i){const a={fields:{[Em]:{stringValue:ym},[Tm]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Uc(i)&&(i=ha(i)),i&&(a.fields[vm]=i),{mapValue:a}}(e,t):n instanceof Ei?$m(n,t):n instanceof vi?Fm(n,t):function(r,i){const a=km(r,i),l=Of(a)+Of(r.Ie);return Xl(a)&&Xl(r.Ie)?Mm(l):Wc(r.serializer,l)}(n,t)}function sb(n,t,e){return n instanceof Ei?$m(n,t):n instanceof vi?Fm(n,t):e}function km(n,t){return n instanceof jo?function(s){return Xl(s)||function(i){return!!i&&"doubleValue"in i}(s)}(t)?t:{integerValue:0}:null}class Bo extends ma{}class Ei extends ma{constructor(t){super(),this.elements=t}}function $m(n,t){const e=Um(t);for(const s of n.elements)e.some(r=>rn(r,s))||e.push(s);return{arrayValue:{values:e}}}class vi extends ma{constructor(t){super(),this.elements=t}}function Fm(n,t){let e=Um(t);for(const s of n.elements)e=e.filter(r=>!rn(r,s));return{arrayValue:{values:e}}}class jo extends ma{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Of(n){return Lt(n.integerValue||n.doubleValue)}function Um(n){return Bc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function rb(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof Ei&&r instanceof Ei||s instanceof vi&&r instanceof vi?ir(s.elements,r.elements,rn):s instanceof jo&&r instanceof jo?rn(s.Ie,r.Ie):s instanceof Bo&&r instanceof Bo}(n.transform,t.transform)}class ib{constructor(t,e){this.version=t,this.transformResults=e}}class He{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new He}static exists(t){return new He(void 0,t)}static updateTime(t){return new He(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Eo(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class ga{}function Bm(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new qc(n.key,He.none()):new wi(n.key,n.data,He.none());{const e=n.data,s=ge.empty();let r=new Bt(zt.comparator);for(let i of t.fields)if(!r.has(i)){let a=e.field(i);a===null&&i.length>1&&(i=i.popLast(),a=e.field(i)),a===null?s.delete(i):s.set(i,a),r=r.add(i)}return new rs(n.key,s,new Ie(r.toArray()),He.none())}}function ob(n,t,e){n instanceof wi?function(r,i,a){const l=r.value.clone(),c=xf(r.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,t,e):n instanceof rs?function(r,i,a){if(!Eo(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=xf(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(jm(r)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,t,e):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,e)}function ii(n,t,e,s){return n instanceof wi?function(i,a,l,c){if(!Eo(i.precondition,a))return l;const h=i.value.clone(),d=Lf(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null}(n,t,e,s):n instanceof rs?function(i,a,l,c){if(!Eo(i.precondition,a))return l;const h=Lf(i.fieldTransforms,c,a),d=a.data;return d.setAll(jm(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(n,t,e,s):function(i,a,l){return Eo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(n,t,e)}function ab(n,t){let e=null;for(const s of n.fieldTransforms){const r=t.data.field(s.field),i=km(s.transform,r||null);i!=null&&(e===null&&(e=ge.empty()),e.set(s.field,i))}return e||null}function Vf(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ir(s,r,(i,a)=>rb(i,a))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class wi extends ga{constructor(t,e,s,r=[]){super(),this.key=t,this.value=e,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class rs extends ga{constructor(t,e,s,r,i=[]){super(),this.key=t,this.data=e,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function jm(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const s=n.data.field(e);t.set(e,s)}}),t}function xf(n,t,e){const s=new Map;bt(n.length===e.length);for(let r=0;r<e.length;r++){const i=n[r],a=i.transform,l=t.data.field(i.field);s.set(i.field,sb(a,l,e[r]))}return s}function Lf(n,t,e){const s=new Map;for(const r of n){const i=r.transform,a=e.data.field(r.field);s.set(r.field,nb(i,a,t))}return s}class qc extends ga{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends ga{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(t,e,s,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(t,e){const s=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(t.key)&&ob(i,t,s[r])}}applyToLocalView(t,e){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(e=ii(s,t,e,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(e=ii(s,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const s=Lm();return this.mutations.forEach(r=>{const i=t.get(r.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=e.has(r.key)?null:l;const c=Bm(a,l);c!==null&&s.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(lt.min())}),s}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),mt())}isEqual(t){return this.batchId===t.batchId&&ir(this.mutations,t.mutations,(e,s)=>Vf(e,s))&&ir(this.baseMutations,t.baseMutations,(e,s)=>Vf(e,s))}}class zc{constructor(t,e,s,r){this.batch=t,this.commitVersion=e,this.mutationResults=s,this.docVersions=r}static from(t,e,s){bt(t.mutations.length===s.length);let r=function(){return XA}();const i=t.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,s[a].version);return new zc(t,e,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,_t;function fb(n){switch(n){case M.OK:return ot();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return ot()}}function Hm(n){if(n===void 0)return vn("GRPC error has no .code"),M.UNKNOWN;switch(n){case Mt.OK:return M.OK;case Mt.CANCELLED:return M.CANCELLED;case Mt.UNKNOWN:return M.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return M.INTERNAL;case Mt.UNAVAILABLE:return M.UNAVAILABLE;case Mt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Mt.NOT_FOUND:return M.NOT_FOUND;case Mt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Mt.ABORTED:return M.ABORTED;case Mt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Mt.DATA_LOSS:return M.DATA_LOSS;default:return ot()}}(_t=Mt||(Mt={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Bn([4294967295,4294967295],0);function Mf(n){const t=db().encode(n),e=new am;return e.update(t),new Uint8Array(e.digest())}function kf(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),s=t.getUint32(4,!0),r=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Bn([e,s],0),new Bn([r,i],0)]}class Gc{constructor(t,e,s){if(this.bitmap=t,this.padding=e,this.hashCount=s,e<0||e>=8)throw new Gr(`Invalid padding: ${e}`);if(s<0)throw new Gr(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${s}`);if(t.length===0&&e!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${e}`);this.Ee=8*t.length-e,this.de=Bn.fromNumber(this.Ee)}Ae(t,e,s){let r=t.add(e.multiply(Bn.fromNumber(s)));return r.compare(pb)===1&&(r=new Bn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.Ee===0)return!1;const e=Mf(t),[s,r]=kf(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);if(!this.Re(a))return!1}return!0}static create(t,e,s){const r=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Gc(i,r,e);return s.forEach(l=>a.insert(l)),a}insert(t){if(this.Ee===0)return;const e=Mf(t),[s,r]=kf(e);for(let i=0;i<this.hashCount;i++){const a=this.Ae(s,r,i);this.Ve(a)}}Ve(t){const e=Math.floor(t/8),s=t%8;this.bitmap[e]|=1<<s}}class Gr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t,e,s,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,e,s){const r=new Map;return r.set(t,Ii.createSynthesizedTargetChangeForCurrentChange(t,e,s)),new _a(lt.min(),r,new Ot(gt),Tn(),mt())}}class Ii{constructor(t,e,s,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,e,s){return new Ii(s,e,mt(),mt(),mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,e,s,r){this.me=t,this.removedTargetIds=e,this.key=s,this.fe=r}}class Km{constructor(t,e){this.targetId=t,this.ge=e}}class Wm{constructor(t,e,s=Gt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=s,this.cause=r}}class $f{constructor(){this.pe=0,this.ye=Ff(),this.we=Gt.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.we=t)}Fe(){let t=mt(),e=mt(),s=mt();return this.ye.forEach((r,i)=>{switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:s=s.add(r);break;default:ot()}}),new Ii(this.we,this.be,t,e,s)}Me(){this.Se=!1,this.ye=Ff()}xe(t,e){this.Se=!0,this.ye=this.ye.insert(t,e)}Oe(t){this.Se=!0,this.ye=this.ye.remove(t)}Ne(){this.pe+=1}Be(){this.pe-=1,bt(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class mb{constructor(t){this.ke=t,this.qe=new Map,this.Qe=Tn(),this.$e=eo(),this.Ke=eo(),this.Ue=new Ot(gt)}We(t){for(const e of t.me)t.fe&&t.fe.isFoundDocument()?this.Ge(e,t.fe):this.ze(e,t.key,t.fe);for(const e of t.removedTargetIds)this.ze(e,t.key,t.fe)}je(t){this.forEachTarget(t,e=>{const s=this.He(e);switch(t.state){case 0:this.Je(e)&&s.Ce(t.resumeToken);break;case 1:s.Be(),s.De||s.Me(),s.Ce(t.resumeToken);break;case 2:s.Be(),s.De||this.removeTarget(e);break;case 3:this.Je(e)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.Je(e)&&(this.Ye(e),s.Ce(t.resumeToken));break;default:ot()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.qe.forEach((s,r)=>{this.Je(r)&&e(r)})}Ze(t){const e=t.targetId,s=t.ge.count,r=this.Xe(e);if(r){const i=r.target;if(Zl(i))if(s===0){const a=new rt(i.path);this.ze(e,a,ie.newNoDocument(a,lt.min()))}else bt(s===1);else{const a=this.et(e);if(a!==s){const l=this.tt(t),c=l?this.nt(l,t,a):1;if(c!==0){this.Ye(e);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(e,h)}}}}}tt(t){const e=t.ge.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=e;let a,l;try{a=zn(s).toUint8Array()}catch(c){if(c instanceof _m)return rr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gc(a,r,i)}catch(c){return rr(c instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ee===0?null:l}nt(t,e,s){return e.ge.count===s-this.st(t,e.targetId)?0:2}st(t,e){const s=this.ke.getRemoteKeysForTarget(e);let r=0;return s.forEach(i=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.ze(e,i,null),r++)}),r}ot(t){const e=new Map;this.qe.forEach((i,a)=>{const l=this.Xe(a);if(l){if(i.current&&Zl(l.target)){const c=new rt(l.target.path);this._t(c).has(a)||this.ut(a,c)||this.ze(a,c,ie.newNoDocument(c,t))}i.ve&&(e.set(a,i.Fe()),i.Me())}});let s=mt();this.Ke.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const h=this.Xe(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.Qe.forEach((i,a)=>a.setReadTime(t));const r=new _a(t,e,this.Ue,this.Qe,s);return this.Qe=Tn(),this.$e=eo(),this.Ke=eo(),this.Ue=new Ot(gt),r}Ge(t,e){if(!this.Je(t))return;const s=this.ut(t,e.key)?2:0;this.He(t).xe(e.key,s),this.Qe=this.Qe.insert(e.key,e),this.$e=this.$e.insert(e.key,this._t(e.key).add(t)),this.Ke=this.Ke.insert(e.key,this.ct(e.key).add(t))}ze(t,e,s){if(!this.Je(t))return;const r=this.He(t);this.ut(t,e)?r.xe(e,1):r.Oe(e),this.Ke=this.Ke.insert(e,this.ct(e).delete(t)),this.Ke=this.Ke.insert(e,this.ct(e).add(t)),s&&(this.Qe=this.Qe.insert(e,s))}removeTarget(t){this.qe.delete(t)}et(t){const e=this.He(t).Fe();return this.ke.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ne(t){this.He(t).Ne()}He(t){let e=this.qe.get(t);return e||(e=new $f,this.qe.set(t,e)),e}ct(t){let e=this.Ke.get(t);return e||(e=new Bt(gt),this.Ke=this.Ke.insert(t,e)),e}_t(t){let e=this.$e.get(t);return e||(e=new Bt(gt),this.$e=this.$e.insert(t,e)),e}Je(t){const e=this.Xe(t)!==null;return e||Q("WatchChangeAggregator","Detected inactive target",t),e}Xe(t){const e=this.qe.get(t);return e&&e.De?null:this.ke.lt(t)}Ye(t){this.qe.set(t,new $f),this.ke.getRemoteKeysForTarget(t).forEach(e=>{this.ze(t,e,null)})}ut(t,e){return this.ke.getRemoteKeysForTarget(t).has(e)}}function eo(){return new Ot(rt.comparator)}function Ff(){return new Ot(rt.comparator)}const gb={asc:"ASCENDING",desc:"DESCENDING"},_b={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yb={and:"AND",or:"OR"};class Eb{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ec(n,t){return n.useProto3Json||ua(t)?t:{value:t}}function Ho(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function qm(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function vb(n,t){return Ho(n,t.toTimestamp())}function tn(n){return bt(!!n),lt.fromTimestamp(function(e){const s=qn(e);return new Ut(s.seconds,s.nanos)}(n))}function Qc(n,t){return nc(n,t).canonicalString()}function nc(n,t){const e=function(r){return new Dt(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function zm(n){const t=Dt.fromString(n);return bt(Jm(t)),t}function sc(n,t){return Qc(n.databaseId,t.path)}function fl(n,t){const e=zm(t);if(e.get(1)!==n.databaseId.projectId)throw new J(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new J(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new rt(Qm(e))}function Gm(n,t){return Qc(n.databaseId,t)}function Tb(n){const t=zm(n);return t.length===4?Dt.emptyPath():Qm(t)}function rc(n){return new Dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Qm(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Uf(n,t,e){return{name:sc(n,t),fields:e.value.mapValue.fields}}function Ab(n,t){let e;if("targetChange"in t){t.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:ot()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],i=function(h,d){return h.useProto3Json?(bt(d===void 0||typeof d=="string"),Gt.fromBase64String(d||"")):(bt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Gt.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(h){const d=h.code===void 0?M.UNKNOWN:Hm(h.code);return new J(d,h.message||"")}(a);e=new Wm(s,r,i,l||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const r=fl(n,s.document.name),i=tn(s.document.updateTime),a=s.document.createTime?tn(s.document.createTime):lt.min(),l=new ge({mapValue:{fields:s.document.fields}}),c=ie.newFoundDocument(r,i,a,l),h=s.targetIds||[],d=s.removedTargetIds||[];e=new vo(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const r=fl(n,s.document),i=s.readTime?tn(s.readTime):lt.min(),a=ie.newNoDocument(r,i),l=s.removedTargetIds||[];e=new vo([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const r=fl(n,s.document),i=s.removedTargetIds||[];e=new vo([],i,r,null)}else{if(!("filter"in t))return ot();{t.filter;const s=t.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,a=new hb(r,i),l=s.targetId;e=new Km(l,a)}}return e}function bb(n,t){let e;if(t instanceof wi)e={update:Uf(n,t.key,t.value)};else if(t instanceof qc)e={delete:sc(n,t.key)};else if(t instanceof rs)e={update:Uf(n,t.key,t.data),updateMask:Ob(t.fieldMask)};else{if(!(t instanceof lb))return ot();e={verify:sc(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof Bo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ei)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jo)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw ot()}(0,s))),t.precondition.isNone||(e.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:vb(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ot()}(n,t.precondition)),e}function wb(n,t){return n&&n.length>0?(bt(t!==void 0),n.map(e=>function(r,i){let a=r.updateTime?tn(r.updateTime):tn(i);return a.isEqual(lt.min())&&(a=tn(i)),new ib(a,r.transformResults||[])}(e,t))):[]}function Ib(n,t){return{documents:[Gm(n,t.path)]}}function Sb(n,t){const e={structuredQuery:{}},s=t.path;let r;t.collectionGroup!==null?(r=s,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=s.popLast(),e.structuredQuery.from=[{collectionId:s.lastSegment()}]),e.parent=Gm(n,r);const i=function(h){if(h.length!==0)return Xm(on.create(h,"and"))}(t.filters);i&&(e.structuredQuery.where=i);const a=function(h){if(h.length!==0)return h.map(d=>function(_){return{field:Ks(_.field),direction:Pb(_.dir)}}(d))}(t.orderBy);a&&(e.structuredQuery.orderBy=a);const l=ec(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ht:e,parent:r}}function Cb(n){let t=Tb(n.parent);const e=n.structuredQuery,s=e.from?e.from.length:0;let r=null;if(s>0){bt(s===1);const d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let i=[];e.where&&(i=function(p){const _=Ym(p);return _ instanceof on&&Cm(_)?_.getFilters():[_]}(e.where));let a=[];e.orderBy&&(a=function(p){return p.map(_=>function(D){return new Uo(Ws(D.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(_))}(e.orderBy));let l=null;e.limit&&(l=function(p){let _;return _=typeof p=="object"?p.value:p,ua(_)?null:_}(e.limit));let c=null;e.startAt&&(c=function(p){const _=!!p.before,b=p.values||[];return new Fo(b,_)}(e.startAt));let h=null;return e.endAt&&(h=function(p){const _=!p.before,b=p.values||[];return new Fo(b,_)}(e.endAt)),WA(t,r,a,i,l,"F",c,h)}function Rb(n,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Ym(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const s=Ws(e.unaryFilter.field);return Ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Ws(e.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ws(e.unaryFilter.field);return Ft.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ws(e.unaryFilter.field);return Ft.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):n.fieldFilter!==void 0?function(e){return Ft.create(Ws(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return on.create(e.compositeFilter.filters.map(s=>Ym(s)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(n):ot()}function Pb(n){return gb[n]}function Db(n){return _b[n]}function Nb(n){return yb[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Ws(n){return zt.fromServerFormat(n.fieldPath)}function Xm(n){return n instanceof Ft?function(e){if(e.op==="=="){if(Cf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NAN"}};if(Sf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Cf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NOT_NAN"}};if(Sf(e.value))return{unaryFilter:{field:Ks(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(e.field),op:Db(e.op),value:e.value}}}(n):n instanceof on?function(e){const s=e.getFilters().map(r=>Xm(r));return s.length===1?s[0]:{compositeFilter:{op:Nb(e.op),filters:s}}}(n):ot()}function Ob(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Jm(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(t,e,s,r,i=lt.min(),a=lt.min(),l=Gt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new kn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new kn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(t){this.Tt=t}}function xb(n){const t=Cb({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?tc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(){this.Tn=new Mb}addToCollectionParentIndex(t,e){return this.Tn.add(e),V.resolve()}getCollectionParents(t,e){return V.resolve(this.Tn.getEntries(e))}addFieldIndex(t,e){return V.resolve()}deleteFieldIndex(t,e){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,e){return V.resolve()}getDocumentsMatchingTarget(t,e){return V.resolve(null)}getIndexType(t,e){return V.resolve(0)}getFieldIndexes(t,e){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,e){return V.resolve(Wn.min())}getMinOffsetFromCollectionGroup(t,e){return V.resolve(Wn.min())}updateCollectionGroup(t,e,s){return V.resolve()}updateIndexEntries(t,e){return V.resolve()}}class Mb{constructor(){this.index={}}add(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e]||new Bt(Dt.comparator),i=!r.has(s);return this.index[e]=r.add(s),i}has(t){const e=t.lastSegment(),s=t.popLast(),r=this.index[e];return r&&r.has(s)}getEntries(t){return(this.index[t]||new Bt(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zm=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,e,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(Zm,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(t){this.$n=t}next(){return this.$n+=2,this.$n}static Kn(){return new lr(0)}static Un(){return new lr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="LruGarbageCollector",kb=1048576;function Hf([n,t],[e,s]){const r=gt(n,e);return r===0?gt(t,s):r}class $b{constructor(t){this.Hn=t,this.buffer=new Bt(Hf),this.Jn=0}Yn(){return++this.Jn}Zn(t){const e=[t,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(e);else{const s=this.buffer.last();Hf(e,s)<0&&(this.buffer=this.buffer.delete(s).add(e))}}get maxValue(){return this.buffer.last()[0]}}class Fb{constructor(t,e,s){this.garbageCollector=t,this.asyncQueue=e,this.localStore=s,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(t){Q(jf,`Garbage collection scheduled in ${t}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Tr(e)?Q(jf,"Ignoring IndexedDB error during garbage collection: ",e):await vr(e)}await this.er(3e5)})}}class Ub{constructor(t,e){this.tr=t,this.params=e}calculateTargetCount(t,e){return this.tr.nr(t).next(s=>Math.floor(e/100*s))}nthSequenceNumber(t,e){if(e===0)return V.resolve(ca.ae);const s=new $b(e);return this.tr.forEachTarget(t,r=>s.Zn(r.sequenceNumber)).next(()=>this.tr.rr(t,r=>s.Zn(r))).next(()=>s.maxValue)}removeTargets(t,e,s){return this.tr.removeTargets(t,e,s)}removeOrphanedDocuments(t,e){return this.tr.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Bf)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bf):this.ir(t,e))}getCacheSize(t){return this.tr.getCacheSize(t)}ir(t,e){let s,r,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,a=Date.now(),this.nthSequenceNumber(t,r))).next(p=>(s=p,l=Date.now(),this.removeTargets(t,s,e))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,s))).next(p=>(h=Date.now(),js()<=yt.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${r} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:p})))}}function Bb(n,t){return new Ub(n,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(){this.changes=new Ps(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const s=this.changes.get(e);return s!==void 0?V.resolve(s):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(t,e,s,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=s,this.indexManager=r}getDocument(t,e){let s=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(s=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(s!==null&&ii(s.mutation,r,Ie.empty(),Ut.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.getLocalViewOfDocuments(t,s,mt()).next(()=>s))}getLocalViewOfDocuments(t,e,s=mt()){const r=_s();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,s).next(i=>{let a=zr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,e){const s=_s();return this.populateOverlays(t,s,e).next(()=>this.computeViews(t,e,s,mt()))}populateOverlays(t,e,s){const r=[];return s.forEach(i=>{e.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(t,r).next(i=>{i.forEach((a,l)=>{e.set(a,l)})})}computeViews(t,e,s,r){let i=Tn();const a=ri(),l=function(){return ri()}();return e.forEach((c,h)=>{const d=s.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof rs)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),ii(d.mutation,h,d.mutation.getFieldMask(),Ut.now())):a.set(h.key,Ie.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((h,d)=>a.set(h,d)),e.forEach((h,d)=>{var p;return l.set(h,new Hb(d,(p=a.get(h))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,e){const s=ri();let r=new Ot((a,l)=>a-l),i=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(a=>{for(const l of a)l.keys().forEach(c=>{const h=e.get(c);if(h===null)return;let d=s.get(c)||Ie.empty();d=l.applyToLocalView(h,d),s.set(c,d);const p=(r.get(l.batchId)||mt()).add(c);r=r.insert(l.batchId,p)})}).next(()=>{const a=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=Lm();d.forEach(_=>{if(!i.has(_)){const b=Bm(e.get(_),s.get(_));b!==null&&p.set(_,b),i=i.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return V.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,e,s,r){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):qA(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,s,r):this.getDocumentsMatchingCollectionQuery(t,e,s,r)}getNextDocuments(t,e,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,s,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,s.largestBatchId,r-i.size):V.resolve(_s());let l=mi,c=i;return a.next(h=>V.forEach(h,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next(_=>{c=c.insert(d,_)}))).next(()=>this.populateOverlays(t,h,i)).next(()=>this.computeViews(t,c,h,mt())).next(d=>({batchId:l,changes:xm(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(s=>{let r=zr();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,s,r){const i=e.collectionGroup;let a=zr();return this.indexManager.getCollectionParents(t,i).next(l=>V.forEach(l,c=>{const h=function(p,_){return new fa(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(e,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,s,r).next(d=>{d.forEach((p,_)=>{a=a.insert(p,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,e,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,s,i,r))).next(a=>{i.forEach((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))});let l=zr();return a.forEach((c,h)=>{const d=i.get(c);d!==void 0&&ii(d.mutation,h,Ie.empty(),Ut.now()),pa(e,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(t){this.serializer=t,this.dr=new Map,this.Ar=new Map}getBundleMetadata(t,e){return V.resolve(this.dr.get(e))}saveBundleMetadata(t,e){return this.dr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:tn(r.createTime)}}(e)),V.resolve()}getNamedQuery(t,e){return V.resolve(this.Ar.get(e))}saveNamedQuery(t,e){return this.Ar.set(e.name,function(r){return{name:r.name,query:xb(r.bundledQuery),readTime:tn(r.readTime)}}(e)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.overlays=new Ot(rt.comparator),this.Rr=new Map}getOverlay(t,e){return V.resolve(this.overlays.get(e))}getOverlays(t,e){const s=_s();return V.forEach(e,r=>this.getOverlay(t,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(t,e,s){return s.forEach((r,i)=>{this.Et(t,e,i)}),V.resolve()}removeOverlaysForBatchId(t,e,s){const r=this.Rr.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Rr.delete(s)),V.resolve()}getOverlaysForCollection(t,e,s){const r=_s(),i=e.length+1,a=new rt(e.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return V.resolve(r)}getOverlaysForCollectionGroup(t,e,s,r){let i=new Ot((h,d)=>h-d);const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>s){let d=i.get(h.largestBatchId);d===null&&(d=_s(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=_s(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return V.resolve(l)}Et(t,e,s){const r=this.overlays.get(s.key);if(r!==null){const a=this.Rr.get(r.largestBatchId).delete(s.key);this.Rr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new ub(e,s));let i=this.Rr.get(e);i===void 0&&(i=mt(),this.Rr.set(e,i)),this.Rr.set(e,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.Vr=new Bt(jt.mr),this.gr=new Bt(jt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(t,e){const s=new jt(t,e);this.Vr=this.Vr.add(s),this.gr=this.gr.add(s)}yr(t,e){t.forEach(s=>this.addReference(s,e))}removeReference(t,e){this.wr(new jt(t,e))}br(t,e){t.forEach(s=>this.removeReference(s,e))}Sr(t){const e=new rt(new Dt([])),s=new jt(e,t),r=new jt(e,t+1),i=[];return this.gr.forEachInRange([s,r],a=>{this.wr(a),i.push(a.key)}),i}Dr(){this.Vr.forEach(t=>this.wr(t))}wr(t){this.Vr=this.Vr.delete(t),this.gr=this.gr.delete(t)}vr(t){const e=new rt(new Dt([])),s=new jt(e,t),r=new jt(e,t+1);let i=mt();return this.gr.forEachInRange([s,r],a=>{i=i.add(a.key)}),i}containsKey(t){const e=new jt(t,0),s=this.Vr.firstAfterOrEqual(e);return s!==null&&t.isEqual(s.key)}}class jt{constructor(t,e){this.key=t,this.Cr=e}static mr(t,e){return rt.comparator(t.key,e.key)||gt(t.Cr,e.Cr)}static pr(t,e){return gt(t.Cr,e.Cr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Fr=1,this.Mr=new Bt(jt.mr)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,s,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new cb(i,e,s,r);this.mutationQueue.push(a);for(const l of r)this.Mr=this.Mr.add(new jt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,e){return V.resolve(this.Or(e))}getNextMutationBatchAfterBatchId(t,e){const s=e+1,r=this.Nr(s),i=r<0?0:r;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?Fc:this.Fr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const s=new jt(e,0),r=new jt(e,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([s,r],a=>{const l=this.Or(a.Cr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,e){let s=new Bt(gt);return e.forEach(r=>{const i=new jt(r,0),a=new jt(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([i,a],l=>{s=s.add(l.Cr)})}),V.resolve(this.Br(s))}getAllMutationBatchesAffectingQuery(t,e){const s=e.path,r=s.length+1;let i=s;rt.isDocumentKey(i)||(i=i.child(""));const a=new jt(new rt(i),0);let l=new Bt(gt);return this.Mr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(l=l.add(c.Cr)),!0)},a),V.resolve(this.Br(l))}Br(t){const e=[];return t.forEach(s=>{const r=this.Or(s);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){bt(this.Lr(e.batchId,"removed")===0),this.mutationQueue.shift();let s=this.Mr;return V.forEach(e.mutations,r=>{const i=new jt(r.key,e.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Mr=s})}qn(t){}containsKey(t,e){const s=new jt(e,0),r=this.Mr.firstAfterOrEqual(s);return V.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}Lr(t,e){return this.Nr(t)}Nr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Or(t){const e=this.Nr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(t){this.kr=t,this.docs=function(){return new Ot(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const s=e.key,r=this.docs.get(s),i=r?r.size:0,a=this.kr(e);return this.docs=this.docs.insert(s,{document:e.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const s=this.docs.get(e);return V.resolve(s?s.document.mutableCopy():ie.newInvalidDocument(e))}getEntries(t,e){let s=Tn();return e.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():ie.newInvalidDocument(r))}),V.resolve(s)}getDocumentsMatchingQuery(t,e,s,r){let i=Tn();const a=e.path,l=new rt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||bA(AA(d),s)<=0||(r.has(d.key)||pa(e,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,e,s,r){ot()}qr(t,e){return V.forEach(this.docs,s=>e(s))}newChangeBuffer(t){return new Yb(this)}getSize(t){return V.resolve(this.size)}}class Yb extends jb{constructor(t){super(),this.Ir=t}applyChanges(t){const e=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?e.push(this.Ir.addEntry(t,r)):this.Ir.removeEntry(s)}),V.waitFor(e)}getFromCache(t,e){return this.Ir.getEntry(t,e)}getAllFromCache(t,e){return this.Ir.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t){this.persistence=t,this.Qr=new Ps(e=>jc(e),Hc),this.lastRemoteSnapshotVersion=lt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Yc,this.targetCount=0,this.Ur=lr.Kn()}forEachTarget(t,e){return this.Qr.forEach((s,r)=>e(r)),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.$r)}allocateTargetId(t){return this.highestTargetId=this.Ur.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,e,s){return s&&(this.lastRemoteSnapshotVersion=s),e>this.$r&&(this.$r=e),V.resolve()}zn(t){this.Qr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ur=new lr(e),this.highestTargetId=e),t.sequenceNumber>this.$r&&(this.$r=t.sequenceNumber)}addTargetData(t,e){return this.zn(e),this.targetCount+=1,V.resolve()}updateTargetData(t,e){return this.zn(e),V.resolve()}removeTargetData(t,e){return this.Qr.delete(e.target),this.Kr.Sr(e.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,e,s){let r=0;const i=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=e&&s.get(l.targetId)===null&&(this.Qr.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),V.waitFor(i).next(()=>r)}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,e){const s=this.Qr.get(e)||null;return V.resolve(s)}addMatchingKeys(t,e,s){return this.Kr.yr(e,s),V.resolve()}removeMatchingKeys(t,e,s){this.Kr.br(e,s);const r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(a=>{i.push(r.markPotentiallyOrphaned(t,a))}),V.waitFor(i)}removeMatchingKeysForTargetId(t,e){return this.Kr.Sr(e),V.resolve()}getMatchingKeysForTargetId(t,e){const s=this.Kr.vr(e);return V.resolve(s)}containsKey(t,e){return V.resolve(this.Kr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,e){this.Wr={},this.overlays={},this.Gr=new ca(0),this.zr=!1,this.zr=!0,this.jr=new zb,this.referenceDelegate=t(this),this.Hr=new Xb(this),this.indexManager=new Lb,this.remoteDocumentCache=function(r){return new Qb(r)}(s=>this.referenceDelegate.Jr(s)),this.serializer=new Vb(e),this.Yr=new Wb(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new qb,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let s=this.Wr[t.toKey()];return s||(s=new Gb(e,this.referenceDelegate),this.Wr[t.toKey()]=s),s}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(t,e,s){Q("MemoryPersistence","Starting transaction:",t);const r=new Jb(this.Gr.next());return this.referenceDelegate.Zr(),s(r).next(i=>this.referenceDelegate.Xr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}ei(t,e){return V.or(Object.values(this.Wr).map(s=>()=>s.containsKey(t,e)))}}class Jb extends IA{constructor(t){super(),this.currentSequenceNumber=t}}class Xc{constructor(t){this.persistence=t,this.ti=new Yc,this.ni=null}static ri(t){return new Xc(t)}get ii(){if(this.ni)return this.ni;throw ot()}addReference(t,e,s){return this.ti.addReference(s,e),this.ii.delete(s.toString()),V.resolve()}removeReference(t,e,s){return this.ti.removeReference(s,e),this.ii.add(s.toString()),V.resolve()}markPotentiallyOrphaned(t,e){return this.ii.add(e.toString()),V.resolve()}removeTarget(t,e){this.ti.Sr(e.targetId).forEach(r=>this.ii.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(i=>this.ii.add(i.toString()))}).next(()=>s.removeTargetData(t,e))}Zr(){this.ni=new Set}Xr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ii,s=>{const r=rt.fromPath(s);return this.si(t,r).next(i=>{i||e.removeEntry(r,lt.min())})}).next(()=>(this.ni=null,e.apply(t)))}updateLimboDocument(t,e){return this.si(t,e).next(s=>{s?this.ii.delete(e.toString()):this.ii.add(e.toString())})}Jr(t){return 0}si(t,e){return V.or([()=>V.resolve(this.ti.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.ei(t,e)])}}class Ko{constructor(t,e){this.persistence=t,this.oi=new Ps(s=>RA(s.path),(s,r)=>s.isEqual(r)),this.garbageCollector=Bb(this,e)}static ri(t,e){return new Ko(t,e)}Zr(){}Xr(t){return V.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}nr(t){const e=this.sr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>e.next(r=>s+r))}sr(t){let e=0;return this.rr(t,s=>{e++}).next(()=>e)}rr(t,e){return V.forEach(this.oi,(s,r)=>this.ar(t,s,r).next(i=>i?V.resolve():e(r)))}removeTargets(t,e,s){return this.persistence.getTargetCache().removeTargets(t,e,s)}removeOrphanedDocuments(t,e){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(t,a=>this.ar(t,a,e).next(l=>{l||(s++,i.removeEntry(a,lt.min()))})).next(()=>i.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}removeTarget(t,e){const s=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}removeReference(t,e,s){return this.oi.set(s,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,e){return this.oi.set(e,t.currentSequenceNumber),V.resolve()}Jr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=_o(t.data.value)),e}ar(t,e,s){return V.or([()=>this.persistence.ei(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const r=this.oi.get(e);return V.resolve(r!==void 0&&r>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e,s,r){this.targetId=t,this.fromCache=e,this.Hi=s,this.Ji=r}static Yi(t,e){let s=mt(),r=mt();for(const i of e.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Jc(t,e.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return zv()?8:SA(Wv())>0?6:4}()}initialize(t,e){this.ns=t,this.indexManager=e,this.Zi=!0}getDocumentsMatchingQuery(t,e,s,r){const i={result:null};return this.rs(t,e).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ss(t,e,r,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Zb;return this._s(t,e,a).next(l=>{if(i.result=l,this.Xi)return this.us(t,e,a,l.size)})}).next(()=>i.result)}us(t,e,s,r){return s.documentReadCount<this.es?(js()<=yt.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Hs(e),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),V.resolve()):(js()<=yt.DEBUG&&Q("QueryEngine","Query:",Hs(e),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.ts*r?(js()<=yt.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Hs(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ze(e))):V.resolve())}rs(t,e){if(Nf(e))return V.resolve(null);let s=Ze(e);return this.indexManager.getIndexType(t,s).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=tc(e,null,"F"),s=Ze(e)),this.indexManager.getDocumentsMatchingTarget(t,s).next(i=>{const a=mt(...i);return this.ns.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,s).next(c=>{const h=this.cs(e,l);return this.ls(e,h,a,c.readTime)?this.rs(t,tc(e,null,"F")):this.hs(t,h,e,c)}))})))}ss(t,e,s,r){return Nf(e)||r.isEqual(lt.min())?V.resolve(null):this.ns.getDocuments(t,s).next(i=>{const a=this.cs(e,i);return this.ls(e,a,s,r)?V.resolve(null):(js()<=yt.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hs(e)),this.hs(t,a,e,TA(r,mi)).next(l=>l))})}cs(t,e){let s=new Bt(Om(t));return e.forEach((r,i)=>{pa(t,i)&&(s=s.add(i))}),s}ls(t,e,s,r){if(t.limit===null)return!1;if(s.size!==e.size)return!0;const i=t.limitType==="F"?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(t,e,s){return js()<=yt.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Hs(e)),this.ns.getDocumentsMatchingQuery(t,e,Wn.min(),s)}hs(t,e,s,r){return this.ns.getDocumentsMatchingQuery(t,s,r).next(i=>(e.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="LocalStore",ew=3e8;class nw{constructor(t,e,s,r){this.persistence=t,this.Ps=e,this.serializer=r,this.Ts=new Ot(gt),this.Is=new Ps(i=>jc(i),Hc),this.Es=new Map,this.ds=t.getRemoteDocumentCache(),this.Hr=t.getTargetCache(),this.Yr=t.getBundleCache(),this.As(s)}As(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kb(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ts))}}function sw(n,t,e,s){return new nw(n,t,e,s)}async function eg(n,t){const e=ut(n);return await e.persistence.runTransaction("Handle user change","readonly",s=>{let r;return e.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,e.As(t),e.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let c=mt();for(const h of r){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(s,c).next(h=>({Rs:h,removedBatchIds:a,addedBatchIds:l}))})})}function rw(n,t){const e=ut(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=t.batch.keys(),i=e.ds.newChangeBuffer({trackRemovals:!0});return function(l,c,h,d){const p=h.batch,_=p.keys();let b=V.resolve();return _.forEach(D=>{b=b.next(()=>d.getEntry(c,D)).next(N=>{const O=h.docVersions.get(D);bt(O!==null),N.version.compareTo(O)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),d.addEntry(N)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(e,s,t,i).next(()=>i.apply(s)).next(()=>e.mutationQueue.performConsistencyCheck(s)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(s,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let c=mt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(t))).next(()=>e.localDocuments.getDocuments(s,r))})}function ng(n){const t=ut(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function iw(n,t){const e=ut(n),s=t.snapshotVersion;let r=e.Ts;return e.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=e.ds.newChangeBuffer({trackRemovals:!0});r=e.Ts;const l=[];t.targetChanges.forEach((d,p)=>{const _=r.get(p);if(!_)return;l.push(e.Hr.removeMatchingKeys(i,d.removedDocuments,p).next(()=>e.Hr.addMatchingKeys(i,d.addedDocuments,p)));let b=_.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?b=b.withResumeToken(Gt.EMPTY_BYTE_STRING,lt.min()).withLastLimboFreeSnapshotVersion(lt.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,s)),r=r.insert(p,b),function(N,O,H){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=ew?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(_,b,d)&&l.push(e.Hr.updateTargetData(i,b))});let c=Tn(),h=mt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(ow(i,a,t.documentUpdates).next(d=>{c=d.Vs,h=d.fs})),!s.isEqual(lt.min())){const d=e.Hr.getLastRemoteSnapshotVersion(i).next(p=>e.Hr.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(d)}return V.waitFor(l).next(()=>a.apply(i)).next(()=>e.localDocuments.getLocalViewOfDocuments(i,c,h)).next(()=>c)}).then(i=>(e.Ts=r,i))}function ow(n,t,e){let s=mt(),r=mt();return e.forEach(i=>s=s.add(i)),t.getEntries(n,s).next(i=>{let a=Tn();return e.forEach((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(lt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Q(Zc,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Vs:a,fs:r}})}function aw(n,t){const e=ut(n);return e.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Fc),e.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function lw(n,t){const e=ut(n);return e.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return e.Hr.getTargetData(s,t).next(i=>i?(r=i,V.resolve(r)):e.Hr.allocateTargetId(s).next(a=>(r=new kn(t,a,"TargetPurposeListen",s.currentSequenceNumber),e.Hr.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=e.Ts.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.Ts=e.Ts.insert(s.targetId,s),e.Is.set(t,s.targetId)),s})}async function ic(n,t,e){const s=ut(n),r=s.Ts.get(t),i=e?"readwrite":"readwrite-primary";try{e||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Tr(a))throw a;Q(Zc,`Failed to update sequence numbers for target ${t}: ${a}`)}s.Ts=s.Ts.remove(t),s.Is.delete(r.target)}function Kf(n,t,e){const s=ut(n);let r=lt.min(),i=mt();return s.persistence.runTransaction("Execute query","readwrite",a=>function(c,h,d){const p=ut(c),_=p.Is.get(d);return _!==void 0?V.resolve(p.Ts.get(_)):p.Hr.getTargetData(h,d)}(s,a,Ze(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Hr.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>s.Ps.getDocumentsMatchingQuery(a,t,e?r:lt.min(),e?i:mt())).next(l=>(cw(s,GA(t),l),{documents:l,gs:i})))}function cw(n,t,e){let s=n.Es.get(t)||lt.min();e.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),n.Es.set(t,s)}class Wf{constructor(){this.activeTargetIds=tb()}Ds(t){this.activeTargetIds=this.activeTargetIds.add(t)}vs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ss(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class uw{constructor(){this.ho=new Wf,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,s){}addLocalQueryTarget(t,e=!0){return e&&this.ho.Ds(t),this.Po[t]||"not-current"}updateQueryState(t,e,s){this.Po[t]=e}removeLocalQueryTarget(t){this.ho.vs(t)}isLocalQueryTarget(t){return this.ho.activeTargetIds.has(t)}clearQueryState(t){delete this.Po[t]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(t){return this.ho.activeTargetIds.has(t)}start(){return this.ho=new Wf,Promise.resolve()}handleUserChange(t,e,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{To(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf="ConnectivityMonitor";class zf{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(t){this.Vo.push(t)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Q(qf,"Network connectivity changed: AVAILABLE");for(const t of this.Vo)t(0)}Ro(){Q(qf,"Network connectivity changed: UNAVAILABLE");for(const t of this.Vo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no=null;function oc(){return no===null?no=function(){return 268435456+Math.round(2147483648*Math.random())}():no++,"0x"+no.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl="RestConnection",fw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dw{get fo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=e+"://"+t.host,this.yo=`projects/${s}/databases/${r}`,this.wo=this.databaseId.database===ko?`project_id=${s}`:`project_id=${s}&database_id=${r}`}bo(t,e,s,r,i){const a=oc(),l=this.So(t,e.toUriEncodedString());Q(dl,`Sending RPC '${t}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(c,r,i),this.vo(t,l,c,s).then(h=>(Q(dl,`Received RPC '${t}' ${a}: `,h),h),h=>{throw rr(dl,`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Co(t,e,s,r,i,a){return this.bo(t,e,s,r,i)}Do(t,e,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Er}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,i)=>t[i]=r),s&&s.headers.forEach((r,i)=>t[i]=r)}So(t,e){const s=fw[t];return`${this.po}/v1/${e}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(t){this.Fo=t.Fo,this.Mo=t.Mo}xo(t){this.Oo=t}No(t){this.Bo=t}Lo(t){this.ko=t}onMessage(t){this.qo=t}close(){this.Mo()}send(t){this.Fo(t)}Qo(){this.Oo()}$o(){this.Bo()}Ko(t){this.ko(t)}Uo(t){this.qo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class mw extends dw{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}vo(t,e,s,r){const i=oc();return new Promise((a,l)=>{const c=new lm;c.setWithCredentials(!0),c.listenOnce(cm.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case go.NO_ERROR:const d=c.getResponseJson();Q(ee,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(d)),a(d);break;case go.TIMEOUT:Q(ee,`RPC '${t}' ${i} timed out`),l(new J(M.DEADLINE_EXCEEDED,"Request time out"));break;case go.HTTP_ERROR:const p=c.getStatus();if(Q(ee,`RPC '${t}' ${i} failed with status:`,p,"response text:",c.getResponseText()),p>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const b=_==null?void 0:_.error;if(b&&b.status&&b.message){const D=function(O){const H=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(H)>=0?H:M.UNKNOWN}(b.status);l(new J(D,b.message))}else l(new J(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new J(M.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Q(ee,`RPC '${t}' ${i} completed.`)}});const h=JSON.stringify(r);Q(ee,`RPC '${t}' ${i} sending request:`,r),c.send(e,"POST",h,s,15)})}Wo(t,e,s){const r=oc(),i=[this.po,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=fm(),l=hm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,e,s),c.encodeInitMessageHeaders=!0;const d=i.join("");Q(ee,`Creating RPC '${t}' stream ${r}: ${d}`,c);const p=a.createWebChannel(d,c);let _=!1,b=!1;const D=new pw({Fo:O=>{b?Q(ee,`Not sending because RPC '${t}' stream ${r} is closed:`,O):(_||(Q(ee,`Opening RPC '${t}' stream ${r} transport.`),p.open(),_=!0),Q(ee,`RPC '${t}' stream ${r} sending:`,O),p.send(O))},Mo:()=>p.close()}),N=(O,H,z)=>{O.listen(H,G=>{try{z(G)}catch(L){setTimeout(()=>{throw L},0)}})};return N(p,qr.EventType.OPEN,()=>{b||(Q(ee,`RPC '${t}' stream ${r} transport opened.`),D.Qo())}),N(p,qr.EventType.CLOSE,()=>{b||(b=!0,Q(ee,`RPC '${t}' stream ${r} transport closed`),D.Ko())}),N(p,qr.EventType.ERROR,O=>{b||(b=!0,rr(ee,`RPC '${t}' stream ${r} transport errored:`,O),D.Ko(new J(M.UNAVAILABLE,"The operation could not be completed")))}),N(p,qr.EventType.MESSAGE,O=>{var H;if(!b){const z=O.data[0];bt(!!z);const G=z,L=(G==null?void 0:G.error)||((H=G[0])===null||H===void 0?void 0:H.error);if(L){Q(ee,`RPC '${t}' stream ${r} received error:`,L);const X=L.status;let Z=function(E){const T=Mt[E];if(T!==void 0)return Hm(T)}(X),A=L.message;Z===void 0&&(Z=M.INTERNAL,A="Unknown error status: "+X+" with message "+L.message),b=!0,D.Ko(new J(Z,A)),p.close()}else Q(ee,`RPC '${t}' stream ${r} received:`,z),D.Uo(z)}}),N(l,um.STAT_EVENT,O=>{O.stat===Ql.PROXY?Q(ee,`RPC '${t}' stream ${r} detected buffering proxy`):O.stat===Ql.NOPROXY&&Q(ee,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{D.$o()},0),D}}function pl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(n){return new Eb(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,e,s=1e3,r=1.5,i=6e4){this.Ti=t,this.timerId=e,this.Go=s,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(t){this.cancel();const e=Math.floor(this.Ho+this.e_()),s=Math.max(0,Date.now()-this.Yo),r=Math.max(0,e-s);r>0&&Q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${e} ms, last attempt: ${s} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),t())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="PersistentStream";class rg{constructor(t,e,s,r,i,a,l,c){this.Ti=t,this.n_=s,this.r_=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new sg(t,e)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(t){this.E_(),this.stream.send(t)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(t,e){this.E_(),this.d_(),this.a_.cancel(),this.i_++,t!==4?this.a_.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(vn(e.toString()),vn("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):e&&e.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Lo(e)}A_(){}auth(){this.state=1;const t=this.R_(this.i_),e=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.i_===e&&this.V_(s,r)},s=>{t(()=>{const r=new J(M.UNKNOWN,"Fetching auth token failed: "+s.message);return this.m_(r)})})}V_(t,e){const s=this.R_(this.i_);this.stream=this.f_(t,e),this.stream.xo(()=>{s(()=>this.listener.xo())}),this.stream.No(()=>{s(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{s(()=>this.m_(r))}),this.stream.onMessage(r=>{s(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(t){return Q(Gf,`close with error: ${t}`),this.stream=null,this.close(4,t)}R_(t){return e=>{this.Ti.enqueueAndForget(()=>this.i_===t?e():(Q(Gf,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gw extends rg{constructor(t,e,s,r,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,s,r,a),this.serializer=i}f_(t,e){return this.connection.Wo("Listen",t,e)}g_(t){return this.onNext(t)}onNext(t){this.a_.reset();const e=Ab(this.serializer,t),s=function(i){if(!("targetChange"in i))return lt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?lt.min():a.readTime?tn(a.readTime):lt.min()}(t);return this.listener.p_(e,s)}y_(t){const e={};e.database=rc(this.serializer),e.addTarget=function(i,a){let l;const c=a.target;if(l=Zl(c)?{documents:Ib(i,c)}:{query:Sb(i,c).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=qm(i,a.resumeToken);const h=ec(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(lt.min())>0){l.readTime=Ho(i,a.snapshotVersion.toTimestamp());const h=ec(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,t);const s=Rb(this.serializer,t);s&&(e.labels=s),this.I_(e)}w_(t){const e={};e.database=rc(this.serializer),e.removeTarget=t,this.I_(e)}}class _w extends rg{constructor(t,e,s,r,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,s,r,a),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(t,e){return this.connection.Wo("Write",t,e)}g_(t){return bt(!!t.streamToken),this.lastStreamToken=t.streamToken,bt(!t.writeResults||t.writeResults.length===0),this.listener.D_()}onNext(t){bt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.a_.reset();const e=wb(t.writeResults,t.commitTime),s=tn(t.commitTime);return this.listener.v_(s,e)}C_(){const t={};t.database=rc(this.serializer),this.I_(t)}S_(t){const e={streamToken:this.lastStreamToken,writes:t.map(s=>bb(this.serializer,s))};this.I_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{}class Ew extends yw{constructor(t,e,s,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=s,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new J(M.FAILED_PRECONDITION,"The client has already been terminated.")}bo(t,e,s,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.bo(t,nc(e,s),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(M.UNKNOWN,i.toString())})}Co(t,e,s,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(t,nc(e,s),r,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(M.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class vw{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(t){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.L_("Offline")))}set(t){this.Q_(),this.x_=0,t==="Online"&&(this.N_=!1),this.L_(t)}L_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}k_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(vn(e),this.N_=!1):Q("OnlineStateTracker",e)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="RemoteStore";class Tw{constructor(t,e,s,r,i){this.localStore=t,this.datastore=e,this.asyncQueue=s,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(a=>{s.enqueueAndForget(async()=>{Ds(this)&&(Q(Is,"Restarting streams for network reachability change."),await async function(c){const h=ut(c);h.W_.add(4),await Si(h),h.j_.set("Unknown"),h.W_.delete(4),await Ea(h)}(this))})}),this.j_=new vw(s,r)}}async function Ea(n){if(Ds(n))for(const t of n.G_)await t(!0)}async function Si(n){for(const t of n.G_)await t(!1)}function ig(n,t){const e=ut(n);e.U_.has(t.targetId)||(e.U_.set(t.targetId,t),su(e)?nu(e):Ar(e).c_()&&eu(e,t))}function tu(n,t){const e=ut(n),s=Ar(e);e.U_.delete(t),s.c_()&&og(e,t),e.U_.size===0&&(s.c_()?s.P_():Ds(e)&&e.j_.set("Unknown"))}function eu(n,t){if(n.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(lt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Ar(n).y_(t)}function og(n,t){n.H_.Ne(t),Ar(n).w_(t)}function nu(n){n.H_=new mb({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>n.U_.get(t)||null,it:()=>n.datastore.serializer.databaseId}),Ar(n).start(),n.j_.B_()}function su(n){return Ds(n)&&!Ar(n).u_()&&n.U_.size>0}function Ds(n){return ut(n).W_.size===0}function ag(n){n.H_=void 0}async function Aw(n){n.j_.set("Online")}async function bw(n){n.U_.forEach((t,e)=>{eu(n,t)})}async function ww(n,t){ag(n),su(n)?(n.j_.q_(t),nu(n)):n.j_.set("Unknown")}async function Iw(n,t,e){if(n.j_.set("Online"),t instanceof Wm&&t.state===2&&t.cause)try{await async function(r,i){const a=i.cause;for(const l of i.targetIds)r.U_.has(l)&&(await r.remoteSyncer.rejectListen(l,a),r.U_.delete(l),r.H_.removeTarget(l))}(n,t)}catch(s){Q(Is,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Wo(n,s)}else if(t instanceof vo?n.H_.We(t):t instanceof Km?n.H_.Ze(t):n.H_.je(t),!e.isEqual(lt.min()))try{const s=await ng(n.localStore);e.compareTo(s)>=0&&await function(i,a){const l=i.H_.ot(a);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.U_.get(h);d&&i.U_.set(h,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,h)=>{const d=i.U_.get(c);if(!d)return;i.U_.set(c,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),og(i,c);const p=new kn(d.target,c,h,d.sequenceNumber);eu(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(s){Q(Is,"Failed to raise snapshot:",s),await Wo(n,s)}}async function Wo(n,t,e){if(!Tr(t))throw t;n.W_.add(1),await Si(n),n.j_.set("Offline"),e||(e=()=>ng(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Q(Is,"Retrying IndexedDB access"),await e(),n.W_.delete(1),await Ea(n)})}function lg(n,t){return t().catch(e=>Wo(n,e,t))}async function va(n){const t=ut(n),e=Qn(t);let s=t.K_.length>0?t.K_[t.K_.length-1].batchId:Fc;for(;Sw(t);)try{const r=await aw(t.localStore,s);if(r===null){t.K_.length===0&&e.P_();break}s=r.batchId,Cw(t,r)}catch(r){await Wo(t,r)}cg(t)&&ug(t)}function Sw(n){return Ds(n)&&n.K_.length<10}function Cw(n,t){n.K_.push(t);const e=Qn(n);e.c_()&&e.b_&&e.S_(t.mutations)}function cg(n){return Ds(n)&&!Qn(n).u_()&&n.K_.length>0}function ug(n){Qn(n).start()}async function Rw(n){Qn(n).C_()}async function Pw(n){const t=Qn(n);for(const e of n.K_)t.S_(e.mutations)}async function Dw(n,t,e){const s=n.K_.shift(),r=zc.from(s,t,e);await lg(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await va(n)}async function Nw(n,t){t&&Qn(n).b_&&await async function(s,r){if(function(a){return fb(a)&&a!==M.ABORTED}(r.code)){const i=s.K_.shift();Qn(s).h_(),await lg(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r)),await va(s)}}(n,t),cg(n)&&ug(n)}async function Qf(n,t){const e=ut(n);e.asyncQueue.verifyOperationInProgress(),Q(Is,"RemoteStore received new credentials");const s=Ds(e);e.W_.add(3),await Si(e),s&&e.j_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.W_.delete(3),await Ea(e)}async function Ow(n,t){const e=ut(n);t?(e.W_.delete(2),await Ea(e)):t||(e.W_.add(2),await Si(e),e.j_.set("Unknown"))}function Ar(n){return n.J_||(n.J_=function(e,s,r){const i=ut(e);return i.M_(),new gw(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{xo:Aw.bind(null,n),No:bw.bind(null,n),Lo:ww.bind(null,n),p_:Iw.bind(null,n)}),n.G_.push(async t=>{t?(n.J_.h_(),su(n)?nu(n):n.j_.set("Unknown")):(await n.J_.stop(),ag(n))})),n.J_}function Qn(n){return n.Y_||(n.Y_=function(e,s,r){const i=ut(e);return i.M_(),new _w(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:Rw.bind(null,n),Lo:Nw.bind(null,n),D_:Pw.bind(null,n),v_:Dw.bind(null,n)}),n.G_.push(async t=>{t?(n.Y_.h_(),await va(n)):(await n.Y_.stop(),n.K_.length>0&&(Q(Is,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t,e,s,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,s,r,i){const a=Date.now()+s,l=new ru(t,e,a,r,i);return l.start(s),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iu(n,t){if(vn("AsyncQueue",`${t}: ${n}`),Tr(n))return new J(M.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{static emptySet(t){return new nr(t.comparator)}constructor(t){this.comparator=t?(e,s)=>t(e,s)||rt.comparator(e.key,s.key):(e,s)=>rt.comparator(e.key,s.key),this.keyedMap=zr(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,s)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof nr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const s=new nr;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=e,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.Z_=new Ot(rt.comparator)}track(t){const e=t.doc.key,s=this.Z_.get(e);s?t.type!==0&&s.type===3?this.Z_=this.Z_.insert(e,t):t.type===3&&s.type!==1?this.Z_=this.Z_.insert(e,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.Z_=this.Z_.insert(e,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.Z_=this.Z_.remove(e):t.type===1&&s.type===2?this.Z_=this.Z_.insert(e,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.Z_=this.Z_.insert(e,{type:2,doc:t.doc}):ot():this.Z_=this.Z_.insert(e,t)}X_(){const t=[];return this.Z_.inorderTraversal((e,s)=>{t.push(s)}),t}}class cr{constructor(t,e,s,r,i,a,l,c,h){this.query=t,this.docs=e,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,e,s,r,i){const a=[];return e.forEach(l=>{a.push({type:0,doc:l})}),new cr(t,e,nr.emptySet(e),a,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&da(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,s=t.docChanges;if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==s[r].type||!e[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(t=>t.ra())}}class xw{constructor(){this.queries=Xf(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(e,s){const r=ut(e),i=r.queries;r.queries=Xf(),i.forEach((a,l)=>{for(const c of l.ta)c.onError(s)})})(this,new J(M.ABORTED,"Firestore shutting down"))}}function Xf(){return new Ps(n=>Nm(n),da)}async function hg(n,t){const e=ut(n);let s=3;const r=t.query;let i=e.queries.get(r);i?!i.na()&&t.ra()&&(s=2):(i=new Vw,s=t.ra()?0:1);try{switch(s){case 0:i.ea=await e.onListen(r,!0);break;case 1:i.ea=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(a){const l=iu(a,`Initialization of query '${Hs(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,i),i.ta.push(t),t.sa(e.onlineState),i.ea&&t.oa(i.ea)&&ou(e)}async function fg(n,t){const e=ut(n),s=t.query;let r=3;const i=e.queries.get(s);if(i){const a=i.ta.indexOf(t);a>=0&&(i.ta.splice(a,1),i.ta.length===0?r=t.ra()?0:1:!i.na()&&t.ra()&&(r=2))}switch(r){case 0:return e.queries.delete(s),e.onUnlisten(s,!0);case 1:return e.queries.delete(s),e.onUnlisten(s,!1);case 2:return e.onLastRemoteStoreUnlisten(s);default:return}}function Lw(n,t){const e=ut(n);let s=!1;for(const r of t){const i=r.query,a=e.queries.get(i);if(a){for(const l of a.ta)l.oa(r)&&(s=!0);a.ea=r}}s&&ou(e)}function Mw(n,t,e){const s=ut(n),r=s.queries.get(t);if(r)for(const i of r.ta)i.onError(e);s.queries.delete(t)}function ou(n){n.ia.forEach(t=>{t.next()})}var ac,Jf;(Jf=ac||(ac={}))._a="default",Jf.Cache="cache";class dg{constructor(t,e,s){this.query=t,this.aa=e,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=s||{}}oa(t){if(!this.options.includeMetadataChanges){const s=[];for(const r of t.docChanges)r.type!==3&&s.push(r);t=new cr(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ua?this.la(t)&&(this.aa.next(t),e=!0):this.ha(t,this.onlineState)&&(this.Pa(t),e=!0),this.ca=t,e}onError(t){this.aa.error(t)}sa(t){this.onlineState=t;let e=!1;return this.ca&&!this.ua&&this.ha(this.ca,t)&&(this.Pa(this.ca),e=!0),e}ha(t,e){if(!t.fromCache||!this.ra())return!0;const s=e!=="Offline";return(!this.options.Ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}la(t){if(t.docChanges.length>0)return!0;const e=this.ca&&this.ca.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Pa(t){t=cr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ua=!0,this.aa.next(t)}ra(){return this.options.source!==ac.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t){this.key=t}}class mg{constructor(t){this.key=t}}class kw{constructor(t,e){this.query=t,this.fa=e,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=mt(),this.mutatedKeys=mt(),this.ya=Om(t),this.wa=new nr(this.ya)}get ba(){return this.fa}Sa(t,e){const s=e?e.Da:new Yf,r=e?e.wa:this.wa;let i=e?e.mutatedKeys:this.mutatedKeys,a=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,p)=>{const _=r.get(d),b=pa(this.query,p)?p:null,D=!!_&&this.mutatedKeys.has(_.key),N=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let O=!1;_&&b?_.data.isEqual(b.data)?D!==N&&(s.track({type:3,doc:b}),O=!0):this.va(_,b)||(s.track({type:2,doc:b}),O=!0,(c&&this.ya(b,c)>0||h&&this.ya(b,h)<0)&&(l=!0)):!_&&b?(s.track({type:0,doc:b}),O=!0):_&&!b&&(s.track({type:1,doc:_}),O=!0,(c||h)&&(l=!0)),O&&(b?(a=a.add(b),i=N?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),s.track({type:1,doc:d})}return{wa:a,Da:s,ls:l,mutatedKeys:i}}va(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,s,r){const i=this.wa;this.wa=t.wa,this.mutatedKeys=t.mutatedKeys;const a=t.Da.X_();a.sort((d,p)=>function(b,D){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return N(b)-N(D)}(d.type,p.type)||this.ya(d.doc,p.doc)),this.Ca(s),r=r!=null&&r;const l=e&&!r?this.Fa():[],c=this.pa.size===0&&this.current&&!r?1:0,h=c!==this.ga;return this.ga=c,a.length!==0||h?{snapshot:new cr(this.query,t.wa,i,a,t.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new Yf,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(t){return!this.fa.has(t)&&!!this.wa.has(t)&&!this.wa.get(t).hasLocalMutations}Ca(t){t&&(t.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=t.current)}Fa(){if(!this.current)return[];const t=this.pa;this.pa=mt(),this.wa.forEach(s=>{this.xa(s.key)&&(this.pa=this.pa.add(s.key))});const e=[];return t.forEach(s=>{this.pa.has(s)||e.push(new mg(s))}),this.pa.forEach(s=>{t.has(s)||e.push(new pg(s))}),e}Oa(t){this.fa=t.gs,this.pa=mt();const e=this.Sa(t.documents);return this.applyChanges(e,!0)}Na(){return cr.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const au="SyncEngine";class $w{constructor(t,e,s){this.query=t,this.targetId=e,this.view=s}}class Fw{constructor(t){this.key=t,this.Ba=!1}}class Uw{constructor(t,e,s,r,i,a){this.localStore=t,this.remoteStore=e,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Ps(l=>Nm(l),da),this.qa=new Map,this.Qa=new Set,this.$a=new Ot(rt.comparator),this.Ka=new Map,this.Ua=new Yc,this.Wa={},this.Ga=new Map,this.za=lr.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function Bw(n,t,e=!0){const s=Tg(n);let r;const i=s.ka.get(t);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Na()):r=await gg(s,t,e,!0),r}async function jw(n,t){const e=Tg(n);await gg(e,t,!0,!1)}async function gg(n,t,e,s){const r=await lw(n.localStore,Ze(t)),i=r.targetId,a=n.sharedClientState.addLocalQueryTarget(i,e);let l;return s&&(l=await Hw(n,t,i,a==="current",r.resumeToken)),n.isPrimaryClient&&e&&ig(n.remoteStore,r),l}async function Hw(n,t,e,s,r){n.Ha=(p,_,b)=>async function(N,O,H,z){let G=O.view.Sa(H);G.ls&&(G=await Kf(N.localStore,O.query,!1).then(({documents:A})=>O.view.Sa(A,G)));const L=z&&z.targetChanges.get(O.targetId),X=z&&z.targetMismatches.get(O.targetId)!=null,Z=O.view.applyChanges(G,N.isPrimaryClient,L,X);return td(N,O.targetId,Z.Ma),Z.snapshot}(n,p,_,b);const i=await Kf(n.localStore,t,!0),a=new kw(t,i.gs),l=a.Sa(i.documents),c=Ii.createSynthesizedTargetChangeForCurrentChange(e,s&&n.onlineState!=="Offline",r),h=a.applyChanges(l,n.isPrimaryClient,c);td(n,e,h.Ma);const d=new $w(t,e,a);return n.ka.set(t,d),n.qa.has(e)?n.qa.get(e).push(t):n.qa.set(e,[t]),h.snapshot}async function Kw(n,t,e){const s=ut(n),r=s.ka.get(t),i=s.qa.get(r.targetId);if(i.length>1)return s.qa.set(r.targetId,i.filter(a=>!da(a,t))),void s.ka.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await ic(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),e&&tu(s.remoteStore,r.targetId),lc(s,r.targetId)}).catch(vr)):(lc(s,r.targetId),await ic(s.localStore,r.targetId,!0))}async function Ww(n,t){const e=ut(n),s=e.ka.get(t),r=e.qa.get(s.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(s.targetId),tu(e.remoteStore,s.targetId))}async function qw(n,t,e){const s=Zw(n);try{const r=await function(a,l){const c=ut(a),h=Ut.now(),d=l.reduce((b,D)=>b.add(D.key),mt());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",b=>{let D=Tn(),N=mt();return c.ds.getEntries(b,d).next(O=>{D=O,D.forEach((H,z)=>{z.isValidDocument()||(N=N.add(H))})}).next(()=>c.localDocuments.getOverlayedDocuments(b,D)).next(O=>{p=O;const H=[];for(const z of l){const G=ab(z,p.get(z.key).overlayedDocument);G!=null&&H.push(new rs(z.key,G,wm(G.value.mapValue),He.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,H,l)}).next(O=>{_=O;const H=O.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(b,O.batchId,H)})}).then(()=>({batchId:_.batchId,changes:xm(p)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(r.batchId),function(a,l,c){let h=a.Wa[a.currentUser.toKey()];h||(h=new Ot(gt)),h=h.insert(l,c),a.Wa[a.currentUser.toKey()]=h}(s,r.batchId,e),await Ci(s,r.changes),await va(s.remoteStore)}catch(r){const i=iu(r,"Failed to persist write");e.reject(i)}}async function _g(n,t){const e=ut(n);try{const s=await iw(e.localStore,t);t.targetChanges.forEach((r,i)=>{const a=e.Ka.get(i);a&&(bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.Ba=!0:r.modifiedDocuments.size>0?bt(a.Ba):r.removedDocuments.size>0&&(bt(a.Ba),a.Ba=!1))}),await Ci(e,s,t)}catch(s){await vr(s)}}function Zf(n,t,e){const s=ut(n);if(s.isPrimaryClient&&e===0||!s.isPrimaryClient&&e===1){const r=[];s.ka.forEach((i,a)=>{const l=a.view.sa(t);l.snapshot&&r.push(l.snapshot)}),function(a,l){const c=ut(a);c.onlineState=l;let h=!1;c.queries.forEach((d,p)=>{for(const _ of p.ta)_.sa(l)&&(h=!0)}),h&&ou(c)}(s.eventManager,t),r.length&&s.La.p_(r),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function zw(n,t,e){const s=ut(n);s.sharedClientState.updateQueryState(t,"rejected",e);const r=s.Ka.get(t),i=r&&r.key;if(i){let a=new Ot(rt.comparator);a=a.insert(i,ie.newNoDocument(i,lt.min()));const l=mt().add(i),c=new _a(lt.min(),new Map,new Ot(gt),a,l);await _g(s,c),s.$a=s.$a.remove(i),s.Ka.delete(t),lu(s)}else await ic(s.localStore,t,!1).then(()=>lc(s,t,e)).catch(vr)}async function Gw(n,t){const e=ut(n),s=t.batch.batchId;try{const r=await rw(e.localStore,t);Eg(e,s,null),yg(e,s),e.sharedClientState.updateMutationState(s,"acknowledged"),await Ci(e,r)}catch(r){await vr(r)}}async function Qw(n,t,e){const s=ut(n);try{const r=await function(a,l){const c=ut(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next(p=>(bt(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(s.localStore,t);Eg(s,t,e),yg(s,t),s.sharedClientState.updateMutationState(t,"rejected",e),await Ci(s,r)}catch(r){await vr(r)}}function yg(n,t){(n.Ga.get(t)||[]).forEach(e=>{e.resolve()}),n.Ga.delete(t)}function Eg(n,t,e){const s=ut(n);let r=s.Wa[s.currentUser.toKey()];if(r){const i=r.get(t);i&&(e?i.reject(e):i.resolve(),r=r.remove(t)),s.Wa[s.currentUser.toKey()]=r}}function lc(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const s of n.qa.get(t))n.ka.delete(s),e&&n.La.Ja(s,e);n.qa.delete(t),n.isPrimaryClient&&n.Ua.Sr(t).forEach(s=>{n.Ua.containsKey(s)||vg(n,s)})}function vg(n,t){n.Qa.delete(t.path.canonicalString());const e=n.$a.get(t);e!==null&&(tu(n.remoteStore,e),n.$a=n.$a.remove(t),n.Ka.delete(e),lu(n))}function td(n,t,e){for(const s of e)s instanceof pg?(n.Ua.addReference(s.key,t),Yw(n,s)):s instanceof mg?(Q(au,"Document no longer in limbo: "+s.key),n.Ua.removeReference(s.key,t),n.Ua.containsKey(s.key)||vg(n,s.key)):ot()}function Yw(n,t){const e=t.key,s=e.path.canonicalString();n.$a.get(e)||n.Qa.has(s)||(Q(au,"New document in limbo: "+e),n.Qa.add(s),lu(n))}function lu(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const t=n.Qa.values().next().value;n.Qa.delete(t);const e=new rt(Dt.fromString(t)),s=n.za.next();n.Ka.set(s,new Fw(e)),n.$a=n.$a.insert(e,s),ig(n.remoteStore,new kn(Ze(Kc(e.path)),s,"TargetPurposeLimboResolution",ca.ae))}}async function Ci(n,t,e){const s=ut(n),r=[],i=[],a=[];s.ka.isEmpty()||(s.ka.forEach((l,c)=>{a.push(s.Ha(c,t,e).then(h=>{var d;if((h||e)&&s.isPrimaryClient){const p=h?!h.fromCache:(d=e==null?void 0:e.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;s.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(h){r.push(h);const p=Jc.Yi(c.targetId,h);i.push(p)}}))}),await Promise.all(a),s.La.p_(r),await async function(c,h){const d=ut(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>V.forEach(h,_=>V.forEach(_.Hi,b=>d.persistence.referenceDelegate.addReference(p,_.targetId,b)).next(()=>V.forEach(_.Ji,b=>d.persistence.referenceDelegate.removeReference(p,_.targetId,b)))))}catch(p){if(!Tr(p))throw p;Q(Zc,"Failed to update sequence numbers: "+p)}for(const p of h){const _=p.targetId;if(!p.fromCache){const b=d.Ts.get(_),D=b.snapshotVersion,N=b.withLastLimboFreeSnapshotVersion(D);d.Ts=d.Ts.insert(_,N)}}}(s.localStore,i))}async function Xw(n,t){const e=ut(n);if(!e.currentUser.isEqual(t)){Q(au,"User change. New user:",t.toKey());const s=await eg(e.localStore,t);e.currentUser=t,function(i,a){i.Ga.forEach(l=>{l.forEach(c=>{c.reject(new J(M.CANCELLED,a))})}),i.Ga.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ci(e,s.Rs)}}function Jw(n,t){const e=ut(n),s=e.Ka.get(t);if(s&&s.Ba)return mt().add(s.key);{let r=mt();const i=e.qa.get(t);if(!i)return r;for(const a of i){const l=e.ka.get(a);r=r.unionWith(l.view.ba)}return r}}function Tg(n){const t=ut(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=_g.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zw.bind(null,t),t.La.p_=Lw.bind(null,t.eventManager),t.La.Ja=Mw.bind(null,t.eventManager),t}function Zw(n){const t=ut(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gw.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qw.bind(null,t),t}class qo{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ya(t.databaseInfo.databaseId),this.sharedClientState=this.Za(t),this.persistence=this.Xa(t),await this.persistence.start(),this.localStore=this.eu(t),this.gcScheduler=this.tu(t,this.localStore),this.indexBackfillerScheduler=this.nu(t,this.localStore)}tu(t,e){return null}nu(t,e){return null}eu(t){return sw(this.persistence,new tw,t.initialUser,this.serializer)}Xa(t){return new tg(Xc.ri,this.serializer)}Za(t){return new uw}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qo.provider={build:()=>new qo};class tI extends qo{constructor(t){super(),this.cacheSizeBytes=t}tu(t,e){bt(this.persistence.referenceDelegate instanceof Ko);const s=this.persistence.referenceDelegate.garbageCollector;return new Fb(s,t.asyncQueue,e)}Xa(t){const e=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new tg(s=>Ko.ri(s,e),this.serializer)}}class cc{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Zf(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xw.bind(null,this.syncEngine),await Ow(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new xw}()}createDatastore(t){const e=ya(t.databaseInfo.databaseId),s=function(i){return new mw(i)}(t.databaseInfo);return function(i,a,l,c){return new Ew(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,s,e)}createRemoteStore(t){return function(s,r,i,a,l){return new Tw(s,r,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Zf(this.syncEngine,e,0),function(){return zf.D()?new zf:new hw}())}createSyncEngine(t,e){return function(r,i,a,l,c,h,d){const p=new Uw(r,i,a,l,c,h);return d&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(r){const i=ut(r);Q(Is,"RemoteStore shutting down."),i.W_.add(5),await Si(i),i.z_.shutdown(),i.j_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}cc.provider={build:()=>new cc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.iu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.iu(this.observer.error,t):vn("Uncaught Error in snapshot listener:",t.toString()))}su(){this.muted=!0}iu(t,e){setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn="FirestoreClient";class eI{constructor(t,e,s,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=s,this.databaseInfo=r,this.user=ne.UNAUTHENTICATED,this.clientId=pm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{Q(Yn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(Q(Yn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const s=iu(e,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function ml(n,t){n.asyncQueue.verifyOperationInProgress(),Q(Yn,"Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let s=e.initialUser;n.setCredentialChangeListener(async r=>{s.isEqual(r)||(await eg(t.localStore,r),s=r)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function ed(n,t){n.asyncQueue.verifyOperationInProgress();const e=await nI(n);Q(Yn,"Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(s=>Qf(t.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Qf(t.remoteStore,r)),n._onlineComponents=t}async function nI(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q(Yn,"Using user provided OfflineComponentProvider");try{await ml(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!function(r){return r.name==="FirebaseError"?r.code===M.FAILED_PRECONDITION||r.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(e))throw e;rr("Error using user provided cache. Falling back to memory cache: "+e),await ml(n,new qo)}}else Q(Yn,"Using default OfflineComponentProvider"),await ml(n,new tI(void 0));return n._offlineComponents}async function bg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q(Yn,"Using user provided OnlineComponentProvider"),await ed(n,n._uninitializedComponentsProvider._online)):(Q(Yn,"Using default OnlineComponentProvider"),await ed(n,new cc))),n._onlineComponents}function sI(n){return bg(n).then(t=>t.syncEngine)}async function wg(n){const t=await bg(n),e=t.eventManager;return e.onListen=Bw.bind(null,t.syncEngine),e.onUnlisten=Kw.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=jw.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Ww.bind(null,t.syncEngine),e}function rI(n,t,e={}){const s=new gn;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new Ag({next:_=>{d.su(),a.enqueueAndForget(()=>fg(i,p));const b=_.docs.has(l);!b&&_.fromCache?h.reject(new J(M.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&_.fromCache&&c&&c.source==="server"?h.reject(new J(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new dg(Kc(l.path),d,{includeMetadataChanges:!0,Ta:!0});return hg(i,p)}(await wg(n),n.asyncQueue,t,e,s)),s.promise}function iI(n,t,e={}){const s=new gn;return n.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,h){const d=new Ag({next:_=>{d.su(),a.enqueueAndForget(()=>fg(i,p)),_.fromCache&&c.source==="server"?h.reject(new J(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(_)},error:_=>h.reject(_)}),p=new dg(l,d,{includeMetadataChanges:!0,Ta:!0});return hg(i,p)}(await wg(n),n.asyncQueue,t,e,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(n,t,e){if(!e)throw new J(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function oI(n,t,e,s){if(t===!0&&s===!0)throw new J(M.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function sd(n){if(!rt.isDocumentKey(n))throw new J(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rd(n){if(rt.isDocumentKey(n))throw new J(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":ot()}function An(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new J(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=cu(n);throw new J(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="firestore.googleapis.com",id=!0;class od{constructor(t){var e,s;if(t.host===void 0){if(t.ssl!==void 0)throw new J(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Cg,this.ssl=id}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:id;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Zm;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<kb)throw new J(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}oI("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ig((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new J(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,r){return s.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ta{constructor(t,e,s,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new od({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new J(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new od(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new dA;switch(s.type){case"firstParty":return new _A(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new J(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const s=nd.get(e);s&&(Q("ComponentProvider","Removing Datastore"),nd.delete(e),s.terminate())}(this),Promise.resolve()}}function aI(n,t,e,s={}){var r;const i=(n=An(n,Ta))._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:n._getEmulatorOptions()}),l=`${t}:${e}`;i.host!==Cg&&i.host!==l&&rr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},i),{host:l,ssl:!1,emulatorOptions:s});if(!Vo(c,a)&&(n._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=ne.MOCK_USER;else{h=Kv(s.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const p=s.mockUserToken.sub||s.mockUserToken.user_id;if(!p)throw new J(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new ne(p)}n._authCredentials=new pA(new dm(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(t,e,s){this.converter=e,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Aa(this.firestore,t,this._query)}}class Se{constructor(t,e,s){this.converter=e,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Se(this.firestore,t,this._key)}}class jn extends Aa{constructor(t,e,s){super(t,e,Kc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Se(this.firestore,null,new rt(t))}withConverter(t){return new jn(this.firestore,t,this._path)}}function lI(n,t,...e){if(n=Kn(n),Sg("collection","path",t),n instanceof Ta){const s=Dt.fromString(t,...e);return rd(s),new jn(n,null,s)}{if(!(n instanceof Se||n instanceof jn))throw new J(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Dt.fromString(t,...e));return rd(s),new jn(n.firestore,null,s)}}function To(n,t,...e){if(n=Kn(n),arguments.length===1&&(t=pm.newId()),Sg("doc","path",t),n instanceof Ta){const s=Dt.fromString(t,...e);return sd(s),new Se(n,null,new rt(s))}{if(!(n instanceof Se||n instanceof jn))throw new J(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Dt.fromString(t,...e));return sd(s),new Se(n.firestore,n instanceof jn?n.converter:null,new rt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="AsyncQueue";class ld{constructor(t=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new sg(this,"async_queue_retry"),this.bu=()=>{const s=pl();s&&Q(ad,"Visibility state changed to "+s.visibilityState),this.a_.t_()},this.Su=t;const e=pl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Du(),this.vu(t)}enterRestrictedMode(t){if(!this.mu){this.mu=!0,this.yu=t||!1;const e=pl();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.bu)}}enqueue(t){if(this.Du(),this.mu)return new Promise(()=>{});const e=new gn;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Vu.push(t),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(t){if(!Tr(t))throw t;Q(ad,"Operation failed with retryable error: "+t)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(t){const e=this.Su.then(()=>(this.pu=!0,t().catch(s=>{this.gu=s,this.pu=!1;const r=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(s);throw vn("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.pu=!1,s))));return this.Su=e,e}enqueueAfterDelay(t,e,s){this.Du(),this.wu.indexOf(t)>-1&&(e=0);const r=ru.createAndSchedule(this,t,e,s,i=>this.Fu(i));return this.fu.push(r),r}Du(){this.gu&&ot()}verifyOperationInProgress(){}async Mu(){let t;do t=this.Su,await t;while(t!==this.Su)}xu(t){for(const e of this.fu)if(e.timerId===t)return!0;return!1}Ou(t){return this.Mu().then(()=>{this.fu.sort((e,s)=>e.targetTimeMs-s.targetTimeMs);for(const e of this.fu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Mu()})}Nu(t){this.wu.push(t)}Fu(t){const e=this.fu.indexOf(t);this.fu.splice(e,1)}}class br extends Ta{constructor(t,e,s,r){super(t,e,s,r),this.type="firestore",this._queue=new ld,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new ld(t),this._firestoreClient=void 0,await t}}}function cI(n,t){const e=typeof n=="object"?n:tA(),s=typeof n=="string"?n:ko,r=QT(e,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=jv("firestore");i&&aI(r,...i)}return r}function uu(n){if(n._terminated)throw new J(M.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||uI(n),n._firestoreClient}function uI(n){var t,e,s;const r=n._freezeSettings(),i=function(l,c,h,d){return new NA(l,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ig(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((s=r.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new eI(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ur(Gt.fromBase64String(t))}catch(e){throw new J(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ur(Gt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new J(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new J(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new J(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gt(this._lat,t._lat)||gt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=/^__.*__$/;class fI{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return this.fieldMask!==null?new rs(t,this.data,this.fieldMask,e,this.fieldTransforms):new wi(t,this.data,e,this.fieldTransforms)}}class Rg{constructor(t,e,s){this.data=t,this.fieldMask=e,this.fieldTransforms=s}toMutation(t,e){return new rs(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Pg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class pu{constructor(t,e,s,r,i,a){this.settings=t,this.databaseId=e,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(t){return new pu(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.$u(t),r}Ku(t){var e;const s=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.ku({path:s,Qu:!1});return r.Bu(),r}Uu(t){return this.ku({path:void 0,Qu:!0})}Wu(t){return zo(t,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Bu(){if(this.path)for(let t=0;t<this.path.length;t++)this.$u(this.path.get(t))}$u(t){if(t.length===0)throw this.Wu("Document fields must not be empty");if(Pg(this.Lu)&&hI.test(t))throw this.Wu('Document fields cannot begin and end with "__"')}}class dI{constructor(t,e,s){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=s||ya(t)}ju(t,e,s,r=!1){return new pu({Lu:t,methodName:e,zu:s,path:zt.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dg(n){const t=n._freezeSettings(),e=ya(n._databaseId);return new dI(n._databaseId,!!t.ignoreUndefinedProperties,e)}function pI(n,t,e,s,r,i={}){const a=n.ju(i.merge||i.mergeFields?2:0,t,e,r);mu("Data must be an object, but it was:",a,s);const l=Ng(s,a);let c,h;if(i.merge)c=new Ie(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const _=uc(t,p,e);if(!a.contains(_))throw new J(M.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);Vg(d,_)||d.push(_)}c=new Ie(d),h=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=a.fieldTransforms;return new fI(new ge(l),c,h)}class wa extends hu{_toFieldTransform(t){if(t.Lu!==2)throw t.Lu===1?t.Wu(`${this._methodName}() can only appear at the top level of your update data`):t.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof wa}}function mI(n,t,e,s){const r=n.ju(1,t,e);mu("Data must be an object, but it was:",r,s);const i=[],a=ge.empty();ss(s,(c,h)=>{const d=gu(t,c,e);h=Kn(h);const p=r.Ku(d);if(h instanceof wa)i.push(d);else{const _=Ia(h,p);_!=null&&(i.push(d),a.set(d,_))}});const l=new Ie(i);return new Rg(a,l,r.fieldTransforms)}function gI(n,t,e,s,r,i){const a=n.ju(1,t,e),l=[uc(t,s,e)],c=[r];if(i.length%2!=0)throw new J(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<i.length;_+=2)l.push(uc(t,i[_])),c.push(i[_+1]);const h=[],d=ge.empty();for(let _=l.length-1;_>=0;--_)if(!Vg(h,l[_])){const b=l[_];let D=c[_];D=Kn(D);const N=a.Ku(b);if(D instanceof wa)h.push(b);else{const O=Ia(D,N);O!=null&&(h.push(b),d.set(b,O))}}const p=new Ie(h);return new Rg(d,p,a.fieldTransforms)}function Ia(n,t){if(Og(n=Kn(n)))return mu("Unsupported field value:",t,n),Ng(n,t);if(n instanceof hu)return function(s,r){if(!Pg(r.Lu))throw r.Wu(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Qu&&t.Lu!==4)throw t.Wu("Nested arrays are not supported");return function(s,r){const i=[];let a=0;for(const l of s){let c=Ia(l,r.Uu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(n,t)}return function(s,r){if((s=Kn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return eb(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ut.fromDate(s);return{timestampValue:Ho(r.serializer,i)}}if(s instanceof Ut){const i=new Ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Ho(r.serializer,i)}}if(s instanceof fu)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ur)return{bytesValue:qm(r.serializer,s._byteString)};if(s instanceof Se){const i=r.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw r.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qc(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof du)return function(a,l){return{mapValue:{fields:{[Am]:{stringValue:bm},[$o]:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw l.Wu("VectorValues must only contain numeric values.");return Wc(l.serializer,h)})}}}}}}(s,r);throw r.Wu(`Unsupported field value: ${cu(s)}`)}(n,t)}function Ng(n,t){const e={};return gm(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ss(n,(s,r)=>{const i=Ia(r,t.qu(s));i!=null&&(e[s]=i)}),{mapValue:{fields:e}}}function Og(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ut||n instanceof fu||n instanceof ur||n instanceof Se||n instanceof hu||n instanceof du)}function mu(n,t,e){if(!Og(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const s=cu(e);throw s==="an object"?t.Wu(n+" a custom object"):t.Wu(n+" "+s)}}function uc(n,t,e){if((t=Kn(t))instanceof ba)return t._internalPath;if(typeof t=="string")return gu(n,t);throw zo("Field path arguments must be of type string or ",n,!1,void 0,e)}const _I=new RegExp("[~\\*/\\[\\]]");function gu(n,t,e){if(t.search(_I)>=0)throw zo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ba(...t.split("."))._internalPath}catch{throw zo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function zo(n,t,e,s,r){const i=s&&!s.isEmpty(),a=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${s}`),a&&(c+=` in document ${r}`),c+=")"),new J(M.INVALID_ARGUMENT,l+n+c)}function Vg(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,e,s,r,i){this._firestore=t,this._userDataWriter=e,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Lg("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class yI extends xg{data(){return super.data()}}function Lg(n,t){return typeof t=="string"?gu(n,t):t instanceof ba?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vI{convertValue(t,e="none"){switch(Gn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(zn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw ot()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const s={};return ss(t,(r,i)=>{s[r]=this.convertValue(i,e)}),s}convertVectorValue(t){var e,s,r;const i=(r=(s=(e=t.fields)===null||e===void 0?void 0:e[$o].arrayValue)===null||s===void 0?void 0:s.values)===null||r===void 0?void 0:r.map(a=>Lt(a.doubleValue));return new du(i)}convertGeoPoint(t){return new fu(Lt(t.latitude),Lt(t.longitude))}convertArray(t,e){return(t.values||[]).map(s=>this.convertValue(s,e))}convertServerTimestamp(t,e){switch(e){case"previous":const s=ha(t);return s==null?null:this.convertValue(s,e);case"estimate":return this.convertTimestamp(gi(t));default:return null}}convertTimestamp(t){const e=qn(t);return new Ut(e.seconds,e.nanos)}convertDocumentKey(t,e){const s=Dt.fromString(t);bt(Jm(s));const r=new _i(s.get(1),s.get(3)),i=new rt(s.popFirst(5));return r.isEqual(e)||vn(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(n,t,e){let s;return s=n?n.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mg extends xg{constructor(t,e,s,r,i,a){super(t,e,s,r,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ao(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const s=this._document.data.field(Lg("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,e.serverTimestamps)}}}class Ao extends Mg{data(t={}){return super.data(t)}}class AI{constructor(t,e,s,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Qr(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(s=>{t.call(e,new Ao(this._firestore,this._userDataWriter,s.key,s,new Qr(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new J(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>{const c=new Ao(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ao(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Qr(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:bI(l.type),doc:c,oldIndex:h,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function bI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n){n=An(n,Se);const t=An(n.firestore,br);return rI(uu(t),n._key).then(e=>PI(t,n,e))}class kg extends vI{constructor(t){super(),this.firestore=t}convertBytes(t){return new ur(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Se(this.firestore,null,e)}}function II(n){n=An(n,Aa);const t=An(n.firestore,br),e=uu(t),s=new kg(t);return EI(n._query),iI(e,n._query).then(r=>new AI(t,s,n,r))}function SI(n,t,e,...s){n=An(n,Se);const r=An(n.firestore,br),i=Dg(r);let a;return a=typeof(t=Kn(t))=="string"||t instanceof ba?gI(i,"updateDoc",n._key,t,e,s):mI(i,"updateDoc",n._key,t),_u(r,[a.toMutation(n._key,He.exists(!0))])}function CI(n){return _u(An(n.firestore,br),[new qc(n._key,He.none())])}function RI(n,t){const e=An(n.firestore,br),s=To(n),r=TI(n.converter,t);return _u(e,[pI(Dg(n.firestore),"addDoc",s._key,r,n.converter!==null,{}).toMutation(s._key,He.exists(!1))]).then(()=>s)}function _u(n,t){return function(s,r){const i=new gn;return s.asyncQueue.enqueueAndForget(async()=>qw(await sI(s),r,i)),i.promise}(uu(n),t)}function PI(n,t,e){const s=e.docs.get(t._key),r=new kg(n);return new Mg(n,r,t._key,s,new Qr(e.hasPendingWrites,e.fromCache),t.converter)}(function(t,e=!0){(function(r){Er=r})(ZT),Lo(new di("firestore",(s,{instanceIdentifier:r,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new br(new mA(s.getProvider("auth-internal")),new yA(a,s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new J(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _i(h.options.projectId,d)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),er(mf,gf,t),er(mf,gf,"esm2017")})();const DI={apiKey:"AIzaSyDveetVj4JbKJDam72kgwwfddoC-mYvapY",authDomain:"her-pretty-booklist.firebaseapp.com",projectId:"her-pretty-booklist",storageBucket:"her-pretty-booklist.firebasestorage.app",messagingSenderId:"503348876388",appId:"1:503348876388:web:fa53422d48686753437b71"},NI=rm(DI),OI=cI(NI);class VI{constructor(){Ch(this,"booksCollection");this.booksCollection=lI(OI,"books")}async addBook(t){try{const e=await RI(this.booksCollection,t);return console.log("Documento escrito con ID: ",e.id),e.id}catch(e){console.error("Error añadiendo registro: ",e)}}async readAll(){try{const e=(await II(this.booksCollection)).docs.map(s=>({id:s.id,...s.data()}));return console.log("Documentos:",e),e}catch(t){console.error("Error obteniendo documentos: ",t)}}async update(t,e){try{const s=To(this.booksCollection,t);await SI(s,e),console.log("Documento actualizado con ID: ",t)}catch(s){console.error("Error actualizando documento: ",s)}}async delete(t){try{const e=To(this.booksCollection,t);await CI(e),console.log("Se borró esa vaina")}catch{console.error("No se borró ninguna mondá")}}async getFile(t){try{const e=To(this.booksCollection,t);return(await wI(e)).data()}catch(e){console.error("No se obtuvo la información: "+e)}}}const xI="/her-pretty-booklist/check-bought.webp",LI=["src","alt"],MI={class:"col"},kI={key:0},$I={key:1},FI={key:0,class:"col d-flex justify-content-center align-items-center"},UI=Vc({__name:"BookItem",props:["book","db"],setup(n){const t=n,e=ze(t.book.bought);function s(){e.value=!e.value;const r=t.book;r.bought=e.value,t.db.update(r.id,r)}return(r,i)=>(mn(),gs("li",{class:na("row my-5 p-3 rounded border "+(e.value?"bg-success-subtle":"bg-light"))},[nt("img",{src:n.book.cover_url,alt:n.book.title+" cover",class:"col-2 img-fluid rounded"},null,8,LI),nt("div",MI,[nt("h1",null,xn(n.book.title),1),nt("h2",null,"Por "+xn(n.book.author),1),nt("p",null,[i[0]||(i[0]=nt("b",null,"Editorial:",-1)),po(" "+xn(n.book.editorial),1)]),nt("p",null,[i[1]||(i[1]=nt("b",null,"Idioma:",-1)),po(" "+xn(n.book.language),1)]),nt("p",null,[nt("b",null,xn(n.book.cover_type),1)]),n.book.saga?(mn(),gs("p",kI,[i[2]||(i[2]=nt("b",null,"Saga:",-1)),po(" "+xn(n.book.saga),1)])):rl("",!0),n.book.notes?(mn(),gs("h5",$I,xn(n.book.notes),1)):rl("",!0)]),e.value?(mn(),gs("div",FI,i[3]||(i[3]=[nt("img",{src:xI,alt:"Bought check",class:"img-fluid w-50"},null,-1)]))):rl("",!0),nt("div",{class:"col-2"},[nt("div",{class:"d-flex flex-column justify-content-center align-items-center h-100"},[nt("button",{class:"btn btn-success w-100",onClick:s},"Marcar")])])],2))}}),BI=(n,t)=>{const e=n.__vccOpts||n;for(const[s,r]of t)e[s]=r;return e},jI=BI(UI,[["__scopeId","data-v-d615cfd7"]]),HI={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},KI={class:"modal-dialog"},WI={class:"modal-content"},qI={class:"modal-body"},zI={class:"form-floating mb-3"},GI={class:"form-floating mb-3"},QI={class:"form-floating mb-3"},YI={class:"form-floating mb-3"},XI={class:"form-floating mb-3"},JI={class:"form-floating mb-3"},ZI={class:"form-floating mb-3"},tS={class:"form-floating mb-3"},eS=Vc({__name:"AddBook",props:["db"],setup(n){const t=ze(""),e=ze(""),s=ze(""),r=ze(""),i=ze(""),a=ze(""),l=ze(""),c=ze("");function h(){const d={title:t.value,author:e.value,saga:s.value,editorial:r.value,language:i.value,notes:a.value,cover_type:l.value,cover_url:c.value,bought:!1};console.log(d),n.db.addBook(d)}return(d,p)=>(mn(),gs(Be,null,[p[18]||(p[18]=nt("button",{type:"button",class:"btn btn-primary w-100","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Añadir libro ",-1)),nt("div",HI,[nt("div",KI,[nt("div",WI,[p[17]||(p[17]=nt("div",{class:"modal-header"},[nt("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Añadiendo un libro"),nt("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),nt("form",{onSubmit:Sv(h,["prevent"]),class:"form"},[nt("div",qI,[nt("div",zI,[Nn(nt("input",{type:"text",id:"title","onUpdate:modelValue":p[0]||(p[0]=_=>t.value=_),class:"form-control"},null,512),[[On,t.value]]),p[8]||(p[8]=nt("label",{for:"title"},"Title",-1))]),nt("div",GI,[Nn(nt("input",{type:"text",id:"author","onUpdate:modelValue":p[1]||(p[1]=_=>e.value=_),class:"form-control"},null,512),[[On,e.value]]),p[9]||(p[9]=nt("label",{for:"author"},"Author",-1))]),nt("div",QI,[Nn(nt("input",{type:"text",id:"editorial","onUpdate:modelValue":p[2]||(p[2]=_=>r.value=_),class:"form-control"},null,512),[[On,r.value]]),p[10]||(p[10]=nt("label",{for:"editorial"},"Editorial",-1))]),nt("div",YI,[Nn(nt("input",{type:"text",id:"saga","onUpdate:modelValue":p[3]||(p[3]=_=>s.value=_),class:"form-control"},null,512),[[On,s.value]]),p[11]||(p[11]=nt("label",{for:"saga"},"Saga",-1))]),nt("div",XI,[Nn(nt("input",{type:"text",id:"language","onUpdate:modelValue":p[4]||(p[4]=_=>i.value=_),class:"form-control"},null,512),[[On,i.value]]),p[12]||(p[12]=nt("label",{for:"language"},"Language",-1))]),nt("div",JI,[Nn(nt("input",{type:"text",id:"cover_type","onUpdate:modelValue":p[5]||(p[5]=_=>l.value=_),class:"form-control"},null,512),[[On,l.value]]),p[13]||(p[13]=nt("label",{for:"cover_type"},"Cover type",-1))]),nt("div",ZI,[Nn(nt("input",{type:"text",id:"cover_url","onUpdate:modelValue":p[6]||(p[6]=_=>c.value=_),class:"form-control"},null,512),[[On,c.value]]),p[14]||(p[14]=nt("label",{for:"cover_url"},"Cover url",-1))]),nt("div",tS,[Nn(nt("textarea",{id:"notes","onUpdate:modelValue":p[7]||(p[7]=_=>a.value=_),class:"form-control"},null,512),[[On,a.value]]),p[15]||(p[15]=nt("label",{for:"notes"},"Extra notes",-1))])]),p[16]||(p[16]=nt("div",{class:"modal-footer"},[nt("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Cerrar"),nt("input",{type:"submit",value:"Añadir libro",class:"btn btn-primary"})],-1))],32)])])])],64))}}),nS={class:"container pb-3"},sS=Vc({__name:"App",setup(n){const t=new VI,e=ze([]);return wp(async()=>{const s=await t.readAll();s&&s.forEach(async r=>{e.value.push(r)})}),(s,r)=>(mn(),gs("div",nS,[nt("ul",null,[(mn(!0),gs(Be,null,pE(e.value,i=>(mn(),Wp(jI,{book:i,db:kl(t)},null,8,["book","db"]))),256))]),Je(eS,{db:kl(t)},null,8,["db"])]))}});var fe="top",Ce="bottom",Re="right",de="left",Sa="auto",wr=[fe,Ce,Re,de],Ss="start",hr="end",$g="clippingParents",yu="viewport",qs="popper",Fg="reference",hc=wr.reduce(function(n,t){return n.concat([t+"-"+Ss,t+"-"+hr])},[]),Eu=[].concat(wr,[Sa]).reduce(function(n,t){return n.concat([t,t+"-"+Ss,t+"-"+hr])},[]),Ug="beforeRead",Bg="read",jg="afterRead",Hg="beforeMain",Kg="main",Wg="afterMain",qg="beforeWrite",zg="write",Gg="afterWrite",Qg=[Ug,Bg,jg,Hg,Kg,Wg,qg,zg,Gg];function an(n){return n?(n.nodeName||"").toLowerCase():null}function Pe(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var t=n.ownerDocument;return t&&t.defaultView||window}return n}function Cs(n){var t=Pe(n).Element;return n instanceof t||n instanceof Element}function Me(n){var t=Pe(n).HTMLElement;return n instanceof t||n instanceof HTMLElement}function vu(n){if(typeof ShadowRoot>"u")return!1;var t=Pe(n).ShadowRoot;return n instanceof t||n instanceof ShadowRoot}function rS(n){var t=n.state;Object.keys(t.elements).forEach(function(e){var s=t.styles[e]||{},r=t.attributes[e]||{},i=t.elements[e];!Me(i)||!an(i)||(Object.assign(i.style,s),Object.keys(r).forEach(function(a){var l=r[a];l===!1?i.removeAttribute(a):i.setAttribute(a,l===!0?"":l)}))})}function iS(n){var t=n.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(s){var r=t.elements[s],i=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:e[s]),l=a.reduce(function(c,h){return c[h]="",c},{});!Me(r)||!an(r)||(Object.assign(r.style,l),Object.keys(i).forEach(function(c){r.removeAttribute(c)}))})}}const Tu={name:"applyStyles",enabled:!0,phase:"write",fn:rS,effect:iS,requires:["computeStyles"]};function en(n){return n.split("-")[0]}var Ts=Math.max,Go=Math.min,fr=Math.round;function fc(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Yg(){return!/^((?!chrome|android).)*safari/i.test(fc())}function dr(n,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var s=n.getBoundingClientRect(),r=1,i=1;t&&Me(n)&&(r=n.offsetWidth>0&&fr(s.width)/n.offsetWidth||1,i=n.offsetHeight>0&&fr(s.height)/n.offsetHeight||1);var a=Cs(n)?Pe(n):window,l=a.visualViewport,c=!Yg()&&e,h=(s.left+(c&&l?l.offsetLeft:0))/r,d=(s.top+(c&&l?l.offsetTop:0))/i,p=s.width/r,_=s.height/i;return{width:p,height:_,top:d,right:h+p,bottom:d+_,left:h,x:h,y:d}}function Au(n){var t=dr(n),e=n.offsetWidth,s=n.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:n.offsetLeft,y:n.offsetTop,width:e,height:s}}function Xg(n,t){var e=t.getRootNode&&t.getRootNode();if(n.contains(t))return!0;if(e&&vu(e)){var s=t;do{if(s&&n.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function bn(n){return Pe(n).getComputedStyle(n)}function oS(n){return["table","td","th"].indexOf(an(n))>=0}function is(n){return((Cs(n)?n.ownerDocument:n.document)||window.document).documentElement}function Ca(n){return an(n)==="html"?n:n.assignedSlot||n.parentNode||(vu(n)?n.host:null)||is(n)}function cd(n){return!Me(n)||bn(n).position==="fixed"?null:n.offsetParent}function aS(n){var t=/firefox/i.test(fc()),e=/Trident/i.test(fc());if(e&&Me(n)){var s=bn(n);if(s.position==="fixed")return null}var r=Ca(n);for(vu(r)&&(r=r.host);Me(r)&&["html","body"].indexOf(an(r))<0;){var i=bn(r);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return r;r=r.parentNode}return null}function Ri(n){for(var t=Pe(n),e=cd(n);e&&oS(e)&&bn(e).position==="static";)e=cd(e);return e&&(an(e)==="html"||an(e)==="body"&&bn(e).position==="static")?t:e||aS(n)||t}function bu(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function oi(n,t,e){return Ts(n,Go(t,e))}function lS(n,t,e){var s=oi(n,t,e);return s>e?e:s}function Jg(){return{top:0,right:0,bottom:0,left:0}}function Zg(n){return Object.assign({},Jg(),n)}function t_(n,t){return t.reduce(function(e,s){return e[s]=n,e},{})}var cS=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Zg(typeof t!="number"?t:t_(t,wr))};function uS(n){var t,e=n.state,s=n.name,r=n.options,i=e.elements.arrow,a=e.modifiersData.popperOffsets,l=en(e.placement),c=bu(l),h=[de,Re].indexOf(l)>=0,d=h?"height":"width";if(!(!i||!a)){var p=cS(r.padding,e),_=Au(i),b=c==="y"?fe:de,D=c==="y"?Ce:Re,N=e.rects.reference[d]+e.rects.reference[c]-a[c]-e.rects.popper[d],O=a[c]-e.rects.reference[c],H=Ri(i),z=H?c==="y"?H.clientHeight||0:H.clientWidth||0:0,G=N/2-O/2,L=p[b],X=z-_[d]-p[D],Z=z/2-_[d]/2+G,A=oi(L,Z,X),g=c;e.modifiersData[s]=(t={},t[g]=A,t.centerOffset=A-Z,t)}}function hS(n){var t=n.state,e=n.options,s=e.element,r=s===void 0?"[data-popper-arrow]":s;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Xg(t.elements.popper,r)&&(t.elements.arrow=r))}const e_={name:"arrow",enabled:!0,phase:"main",fn:uS,effect:hS,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pr(n){return n.split("-")[1]}var fS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function dS(n,t){var e=n.x,s=n.y,r=t.devicePixelRatio||1;return{x:fr(e*r)/r||0,y:fr(s*r)/r||0}}function ud(n){var t,e=n.popper,s=n.popperRect,r=n.placement,i=n.variation,a=n.offsets,l=n.position,c=n.gpuAcceleration,h=n.adaptive,d=n.roundOffsets,p=n.isFixed,_=a.x,b=_===void 0?0:_,D=a.y,N=D===void 0?0:D,O=typeof d=="function"?d({x:b,y:N}):{x:b,y:N};b=O.x,N=O.y;var H=a.hasOwnProperty("x"),z=a.hasOwnProperty("y"),G=de,L=fe,X=window;if(h){var Z=Ri(e),A="clientHeight",g="clientWidth";if(Z===Pe(e)&&(Z=is(e),bn(Z).position!=="static"&&l==="absolute"&&(A="scrollHeight",g="scrollWidth")),Z=Z,r===fe||(r===de||r===Re)&&i===hr){L=Ce;var E=p&&Z===X&&X.visualViewport?X.visualViewport.height:Z[A];N-=E-s.height,N*=c?1:-1}if(r===de||(r===fe||r===Ce)&&i===hr){G=Re;var T=p&&Z===X&&X.visualViewport?X.visualViewport.width:Z[g];b-=T-s.width,b*=c?1:-1}}var w=Object.assign({position:l},h&&fS),S=d===!0?dS({x:b,y:N},Pe(e)):{x:b,y:N};if(b=S.x,N=S.y,c){var y;return Object.assign({},w,(y={},y[L]=z?"0":"",y[G]=H?"0":"",y.transform=(X.devicePixelRatio||1)<=1?"translate("+b+"px, "+N+"px)":"translate3d("+b+"px, "+N+"px, 0)",y))}return Object.assign({},w,(t={},t[L]=z?N+"px":"",t[G]=H?b+"px":"",t.transform="",t))}function pS(n){var t=n.state,e=n.options,s=e.gpuAcceleration,r=s===void 0?!0:s,i=e.adaptive,a=i===void 0?!0:i,l=e.roundOffsets,c=l===void 0?!0:l,h={placement:en(t.placement),variation:pr(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,ud(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,ud(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const wu={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:pS,data:{}};var so={passive:!0};function mS(n){var t=n.state,e=n.instance,s=n.options,r=s.scroll,i=r===void 0?!0:r,a=s.resize,l=a===void 0?!0:a,c=Pe(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&h.forEach(function(d){d.addEventListener("scroll",e.update,so)}),l&&c.addEventListener("resize",e.update,so),function(){i&&h.forEach(function(d){d.removeEventListener("scroll",e.update,so)}),l&&c.removeEventListener("resize",e.update,so)}}const Iu={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:mS,data:{}};var gS={left:"right",right:"left",bottom:"top",top:"bottom"};function bo(n){return n.replace(/left|right|bottom|top/g,function(t){return gS[t]})}var _S={start:"end",end:"start"};function hd(n){return n.replace(/start|end/g,function(t){return _S[t]})}function Su(n){var t=Pe(n),e=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:e,scrollTop:s}}function Cu(n){return dr(is(n)).left+Su(n).scrollLeft}function yS(n,t){var e=Pe(n),s=is(n),r=e.visualViewport,i=s.clientWidth,a=s.clientHeight,l=0,c=0;if(r){i=r.width,a=r.height;var h=Yg();(h||!h&&t==="fixed")&&(l=r.offsetLeft,c=r.offsetTop)}return{width:i,height:a,x:l+Cu(n),y:c}}function ES(n){var t,e=is(n),s=Su(n),r=(t=n.ownerDocument)==null?void 0:t.body,i=Ts(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=Ts(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-s.scrollLeft+Cu(n),c=-s.scrollTop;return bn(r||e).direction==="rtl"&&(l+=Ts(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:a,x:l,y:c}}function Ru(n){var t=bn(n),e=t.overflow,s=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+r+s)}function n_(n){return["html","body","#document"].indexOf(an(n))>=0?n.ownerDocument.body:Me(n)&&Ru(n)?n:n_(Ca(n))}function ai(n,t){var e;t===void 0&&(t=[]);var s=n_(n),r=s===((e=n.ownerDocument)==null?void 0:e.body),i=Pe(s),a=r?[i].concat(i.visualViewport||[],Ru(s)?s:[]):s,l=t.concat(a);return r?l:l.concat(ai(Ca(a)))}function dc(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function vS(n,t){var e=dr(n,!1,t==="fixed");return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function fd(n,t,e){return t===yu?dc(yS(n,e)):Cs(t)?vS(t,e):dc(ES(is(n)))}function TS(n){var t=ai(Ca(n)),e=["absolute","fixed"].indexOf(bn(n).position)>=0,s=e&&Me(n)?Ri(n):n;return Cs(s)?t.filter(function(r){return Cs(r)&&Xg(r,s)&&an(r)!=="body"}):[]}function AS(n,t,e,s){var r=t==="clippingParents"?TS(n):[].concat(t),i=[].concat(r,[e]),a=i[0],l=i.reduce(function(c,h){var d=fd(n,h,s);return c.top=Ts(d.top,c.top),c.right=Go(d.right,c.right),c.bottom=Go(d.bottom,c.bottom),c.left=Ts(d.left,c.left),c},fd(n,a,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function s_(n){var t=n.reference,e=n.element,s=n.placement,r=s?en(s):null,i=s?pr(s):null,a=t.x+t.width/2-e.width/2,l=t.y+t.height/2-e.height/2,c;switch(r){case fe:c={x:a,y:t.y-e.height};break;case Ce:c={x:a,y:t.y+t.height};break;case Re:c={x:t.x+t.width,y:l};break;case de:c={x:t.x-e.width,y:l};break;default:c={x:t.x,y:t.y}}var h=r?bu(r):null;if(h!=null){var d=h==="y"?"height":"width";switch(i){case Ss:c[h]=c[h]-(t[d]/2-e[d]/2);break;case hr:c[h]=c[h]+(t[d]/2-e[d]/2);break}}return c}function mr(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=s===void 0?n.placement:s,i=e.strategy,a=i===void 0?n.strategy:i,l=e.boundary,c=l===void 0?$g:l,h=e.rootBoundary,d=h===void 0?yu:h,p=e.elementContext,_=p===void 0?qs:p,b=e.altBoundary,D=b===void 0?!1:b,N=e.padding,O=N===void 0?0:N,H=Zg(typeof O!="number"?O:t_(O,wr)),z=_===qs?Fg:qs,G=n.rects.popper,L=n.elements[D?z:_],X=AS(Cs(L)?L:L.contextElement||is(n.elements.popper),c,d,a),Z=dr(n.elements.reference),A=s_({reference:Z,element:G,placement:r}),g=dc(Object.assign({},G,A)),E=_===qs?g:Z,T={top:X.top-E.top+H.top,bottom:E.bottom-X.bottom+H.bottom,left:X.left-E.left+H.left,right:E.right-X.right+H.right},w=n.modifiersData.offset;if(_===qs&&w){var S=w[r];Object.keys(T).forEach(function(y){var xt=[Re,Ce].indexOf(y)>=0?1:-1,Qt=[fe,Ce].indexOf(y)>=0?"y":"x";T[y]+=S[Qt]*xt})}return T}function bS(n,t){t===void 0&&(t={});var e=t,s=e.placement,r=e.boundary,i=e.rootBoundary,a=e.padding,l=e.flipVariations,c=e.allowedAutoPlacements,h=c===void 0?Eu:c,d=pr(s),p=d?l?hc:hc.filter(function(D){return pr(D)===d}):wr,_=p.filter(function(D){return h.indexOf(D)>=0});_.length===0&&(_=p);var b=_.reduce(function(D,N){return D[N]=mr(n,{placement:N,boundary:r,rootBoundary:i,padding:a})[en(N)],D},{});return Object.keys(b).sort(function(D,N){return b[D]-b[N]})}function wS(n){if(en(n)===Sa)return[];var t=bo(n);return[hd(n),t,hd(t)]}function IS(n){var t=n.state,e=n.options,s=n.name;if(!t.modifiersData[s]._skip){for(var r=e.mainAxis,i=r===void 0?!0:r,a=e.altAxis,l=a===void 0?!0:a,c=e.fallbackPlacements,h=e.padding,d=e.boundary,p=e.rootBoundary,_=e.altBoundary,b=e.flipVariations,D=b===void 0?!0:b,N=e.allowedAutoPlacements,O=t.options.placement,H=en(O),z=H===O,G=c||(z||!D?[bo(O)]:wS(O)),L=[O].concat(G).reduce(function(We,Yt){return We.concat(en(Yt)===Sa?bS(t,{placement:Yt,boundary:d,rootBoundary:p,padding:h,flipVariations:D,allowedAutoPlacements:N}):Yt)},[]),X=t.rects.reference,Z=t.rects.popper,A=new Map,g=!0,E=L[0],T=0;T<L.length;T++){var w=L[T],S=en(w),y=pr(w)===Ss,xt=[fe,Ce].indexOf(S)>=0,Qt=xt?"width":"height",vt=mr(t,{placement:w,boundary:d,rootBoundary:p,altBoundary:_,padding:h}),ft=xt?y?Re:de:y?Ce:fe;X[Qt]>Z[Qt]&&(ft=bo(ft));var dt=bo(ft),$t=[];if(i&&$t.push(vt[S]<=0),l&&$t.push(vt[ft]<=0,vt[dt]<=0),$t.every(function(We){return We})){E=w,g=!1;break}A.set(w,$t)}if(g)for(var De=D?3:1,ye=function(Yt){var Ee=L.find(function(pe){var ve=A.get(pe);if(ve)return ve.slice(0,Yt).every(function(Sn){return Sn})});if(Ee)return E=Ee,"break"},Ct=De;Ct>0;Ct--){var Pt=ye(Ct);if(Pt==="break")break}t.placement!==E&&(t.modifiersData[s]._skip=!0,t.placement=E,t.reset=!0)}}const r_={name:"flip",enabled:!0,phase:"main",fn:IS,requiresIfExists:["offset"],data:{_skip:!1}};function dd(n,t,e){return e===void 0&&(e={x:0,y:0}),{top:n.top-t.height-e.y,right:n.right-t.width+e.x,bottom:n.bottom-t.height+e.y,left:n.left-t.width-e.x}}function pd(n){return[fe,Re,Ce,de].some(function(t){return n[t]>=0})}function SS(n){var t=n.state,e=n.name,s=t.rects.reference,r=t.rects.popper,i=t.modifiersData.preventOverflow,a=mr(t,{elementContext:"reference"}),l=mr(t,{altBoundary:!0}),c=dd(a,s),h=dd(l,r,i),d=pd(c),p=pd(h);t.modifiersData[e]={referenceClippingOffsets:c,popperEscapeOffsets:h,isReferenceHidden:d,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const i_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:SS};function CS(n,t,e){var s=en(n),r=[de,fe].indexOf(s)>=0?-1:1,i=typeof e=="function"?e(Object.assign({},t,{placement:n})):e,a=i[0],l=i[1];return a=a||0,l=(l||0)*r,[de,Re].indexOf(s)>=0?{x:l,y:a}:{x:a,y:l}}function RS(n){var t=n.state,e=n.options,s=n.name,r=e.offset,i=r===void 0?[0,0]:r,a=Eu.reduce(function(d,p){return d[p]=CS(p,t.rects,i),d},{}),l=a[t.placement],c=l.x,h=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=h),t.modifiersData[s]=a}const o_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:RS};function PS(n){var t=n.state,e=n.name;t.modifiersData[e]=s_({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const Pu={name:"popperOffsets",enabled:!0,phase:"read",fn:PS,data:{}};function DS(n){return n==="x"?"y":"x"}function NS(n){var t=n.state,e=n.options,s=n.name,r=e.mainAxis,i=r===void 0?!0:r,a=e.altAxis,l=a===void 0?!1:a,c=e.boundary,h=e.rootBoundary,d=e.altBoundary,p=e.padding,_=e.tether,b=_===void 0?!0:_,D=e.tetherOffset,N=D===void 0?0:D,O=mr(t,{boundary:c,rootBoundary:h,padding:p,altBoundary:d}),H=en(t.placement),z=pr(t.placement),G=!z,L=bu(H),X=DS(L),Z=t.modifiersData.popperOffsets,A=t.rects.reference,g=t.rects.popper,E=typeof N=="function"?N(Object.assign({},t.rects,{placement:t.placement})):N,T=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),w=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,S={x:0,y:0};if(Z){if(i){var y,xt=L==="y"?fe:de,Qt=L==="y"?Ce:Re,vt=L==="y"?"height":"width",ft=Z[L],dt=ft+O[xt],$t=ft-O[Qt],De=b?-g[vt]/2:0,ye=z===Ss?A[vt]:g[vt],Ct=z===Ss?-g[vt]:-A[vt],Pt=t.elements.arrow,We=b&&Pt?Au(Pt):{width:0,height:0},Yt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Jg(),Ee=Yt[xt],pe=Yt[Qt],ve=oi(0,A[vt],We[vt]),Sn=G?A[vt]/2-De-ve-Ee-T.mainAxis:ye-ve-Ee-T.mainAxis,Ne=G?-A[vt]/2+De+ve+pe+T.mainAxis:Ct+ve+pe+T.mainAxis,ln=t.elements.arrow&&Ri(t.elements.arrow),v=ln?L==="y"?ln.clientTop||0:ln.clientLeft||0:0,I=(y=w==null?void 0:w[L])!=null?y:0,P=ft+Sn-I-v,U=ft+Ne-I,x=oi(b?Go(dt,P):dt,ft,b?Ts($t,U):$t);Z[L]=x,S[L]=x-ft}if(l){var F,W=L==="x"?fe:de,j=L==="x"?Ce:Re,B=Z[X],k=X==="y"?"height":"width",tt=B+O[W],q=B-O[j],Y=[fe,de].indexOf(H)!==-1,it=(F=w==null?void 0:w[X])!=null?F:0,et=Y?tt:B-A[k]-g[k]-it+T.altAxis,at=Y?B+A[k]+g[k]-it-T.altAxis:q,pt=b&&Y?lS(et,B,at):oi(b?et:tt,B,b?at:q);Z[X]=pt,S[X]=pt-B}t.modifiersData[s]=S}}const a_={name:"preventOverflow",enabled:!0,phase:"main",fn:NS,requiresIfExists:["offset"]};function OS(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function VS(n){return n===Pe(n)||!Me(n)?Su(n):OS(n)}function xS(n){var t=n.getBoundingClientRect(),e=fr(t.width)/n.offsetWidth||1,s=fr(t.height)/n.offsetHeight||1;return e!==1||s!==1}function LS(n,t,e){e===void 0&&(e=!1);var s=Me(t),r=Me(t)&&xS(t),i=is(t),a=dr(n,r,e),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(s||!s&&!e)&&((an(t)!=="body"||Ru(i))&&(l=VS(t)),Me(t)?(c=dr(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Cu(i))),{x:a.left+l.scrollLeft-c.x,y:a.top+l.scrollTop-c.y,width:a.width,height:a.height}}function MS(n){var t=new Map,e=new Set,s=[];n.forEach(function(i){t.set(i.name,i)});function r(i){e.add(i.name);var a=[].concat(i.requires||[],i.requiresIfExists||[]);a.forEach(function(l){if(!e.has(l)){var c=t.get(l);c&&r(c)}}),s.push(i)}return n.forEach(function(i){e.has(i.name)||r(i)}),s}function kS(n){var t=MS(n);return Qg.reduce(function(e,s){return e.concat(t.filter(function(r){return r.phase===s}))},[])}function $S(n){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(n())})})),t}}function FS(n){var t=n.reduce(function(e,s){var r=e[s.name];return e[s.name]=r?Object.assign({},r,s,{options:Object.assign({},r.options,s.options),data:Object.assign({},r.data,s.data)}):s,e},{});return Object.keys(t).map(function(e){return t[e]})}var md={placement:"bottom",modifiers:[],strategy:"absolute"};function gd(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Ra(n){n===void 0&&(n={});var t=n,e=t.defaultModifiers,s=e===void 0?[]:e,r=t.defaultOptions,i=r===void 0?md:r;return function(l,c,h){h===void 0&&(h=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},md,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},p=[],_=!1,b={state:d,setOptions:function(H){var z=typeof H=="function"?H(d.options):H;N(),d.options=Object.assign({},i,d.options,z),d.scrollParents={reference:Cs(l)?ai(l):l.contextElement?ai(l.contextElement):[],popper:ai(c)};var G=kS(FS([].concat(s,d.options.modifiers)));return d.orderedModifiers=G.filter(function(L){return L.enabled}),D(),b.update()},forceUpdate:function(){if(!_){var H=d.elements,z=H.reference,G=H.popper;if(gd(z,G)){d.rects={reference:LS(z,Ri(G),d.options.strategy==="fixed"),popper:Au(G)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(T){return d.modifiersData[T.name]=Object.assign({},T.data)});for(var L=0;L<d.orderedModifiers.length;L++){if(d.reset===!0){d.reset=!1,L=-1;continue}var X=d.orderedModifiers[L],Z=X.fn,A=X.options,g=A===void 0?{}:A,E=X.name;typeof Z=="function"&&(d=Z({state:d,options:g,name:E,instance:b})||d)}}}},update:$S(function(){return new Promise(function(O){b.forceUpdate(),O(d)})}),destroy:function(){N(),_=!0}};if(!gd(l,c))return b;b.setOptions(h).then(function(O){!_&&h.onFirstUpdate&&h.onFirstUpdate(O)});function D(){d.orderedModifiers.forEach(function(O){var H=O.name,z=O.options,G=z===void 0?{}:z,L=O.effect;if(typeof L=="function"){var X=L({state:d,name:H,instance:b,options:G}),Z=function(){};p.push(X||Z)}})}function N(){p.forEach(function(O){return O()}),p=[]}return b}}var US=Ra(),BS=[Iu,Pu,wu,Tu],jS=Ra({defaultModifiers:BS}),HS=[Iu,Pu,wu,Tu,o_,r_,a_,e_,i_],Du=Ra({defaultModifiers:HS});const l_=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Wg,afterRead:jg,afterWrite:Gg,applyStyles:Tu,arrow:e_,auto:Sa,basePlacements:wr,beforeMain:Hg,beforeRead:Ug,beforeWrite:qg,bottom:Ce,clippingParents:$g,computeStyles:wu,createPopper:Du,createPopperBase:US,createPopperLite:jS,detectOverflow:mr,end:hr,eventListeners:Iu,flip:r_,hide:i_,left:de,main:Kg,modifierPhases:Qg,offset:o_,placements:Eu,popper:qs,popperGenerator:Ra,popperOffsets:Pu,preventOverflow:a_,read:Bg,reference:Fg,right:Re,start:Ss,top:fe,variationPlacements:hc,viewport:yu,write:zg},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Vn=new Map,gl={set(n,t,e){Vn.has(n)||Vn.set(n,new Map);const s=Vn.get(n);if(!s.has(t)&&s.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`);return}s.set(t,e)},get(n,t){return Vn.has(n)&&Vn.get(n).get(t)||null},remove(n,t){if(!Vn.has(n))return;const e=Vn.get(n);e.delete(t),e.size===0&&Vn.delete(n)}},KS=1e6,WS=1e3,pc="transitionend",c_=n=>(n&&window.CSS&&window.CSS.escape&&(n=n.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),n),qS=n=>n==null?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase(),zS=n=>{do n+=Math.floor(Math.random()*KS);while(document.getElementById(n));return n},GS=n=>{if(!n)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(n);const s=Number.parseFloat(t),r=Number.parseFloat(e);return!s&&!r?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*WS)},u_=n=>{n.dispatchEvent(new Event(pc))},_n=n=>!n||typeof n!="object"?!1:(typeof n.jquery<"u"&&(n=n[0]),typeof n.nodeType<"u"),Xn=n=>_n(n)?n.jquery?n[0]:n:typeof n=="string"&&n.length>0?document.querySelector(c_(n)):null,Ir=n=>{if(!_n(n)||n.getClientRects().length===0)return!1;const t=getComputedStyle(n).getPropertyValue("visibility")==="visible",e=n.closest("details:not([open])");if(!e)return t;if(e!==n){const s=n.closest("summary");if(s&&s.parentNode!==e||s===null)return!1}return t},Jn=n=>!n||n.nodeType!==Node.ELEMENT_NODE||n.classList.contains("disabled")?!0:typeof n.disabled<"u"?n.disabled:n.hasAttribute("disabled")&&n.getAttribute("disabled")!=="false",h_=n=>{if(!document.documentElement.attachShadow)return null;if(typeof n.getRootNode=="function"){const t=n.getRootNode();return t instanceof ShadowRoot?t:null}return n instanceof ShadowRoot?n:n.parentNode?h_(n.parentNode):null},Qo=()=>{},Pi=n=>{n.offsetHeight},f_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_l=[],QS=n=>{document.readyState==="loading"?(_l.length||document.addEventListener("DOMContentLoaded",()=>{for(const t of _l)t()}),_l.push(n)):n()},ke=()=>document.documentElement.dir==="rtl",Fe=n=>{QS(()=>{const t=f_();if(t){const e=n.NAME,s=t.fn[e];t.fn[e]=n.jQueryInterface,t.fn[e].Constructor=n,t.fn[e].noConflict=()=>(t.fn[e]=s,n.jQueryInterface)}})},_e=(n,t=[],e=n)=>typeof n=="function"?n(...t):e,d_=(n,t,e=!0)=>{if(!e){_e(n);return}const r=GS(t)+5;let i=!1;const a=({target:l})=>{l===t&&(i=!0,t.removeEventListener(pc,a),_e(n))};t.addEventListener(pc,a),setTimeout(()=>{i||u_(t)},r)},Nu=(n,t,e,s)=>{const r=n.length;let i=n.indexOf(t);return i===-1?!e&&s?n[r-1]:n[0]:(i+=e?1:-1,s&&(i=(i+r)%r),n[Math.max(0,Math.min(i,r-1))])},YS=/[^.]*(?=\..*)\.|.*/,XS=/\..*/,JS=/::\d+$/,yl={};let _d=1;const p_={mouseenter:"mouseover",mouseleave:"mouseout"},ZS=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function m_(n,t){return t&&`${t}::${_d++}`||n.uidEvent||_d++}function g_(n){const t=m_(n);return n.uidEvent=t,yl[t]=yl[t]||{},yl[t]}function tC(n,t){return function e(s){return Ou(s,{delegateTarget:n}),e.oneOff&&$.off(n,s.type,t),t.apply(n,[s])}}function eC(n,t,e){return function s(r){const i=n.querySelectorAll(t);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const l of i)if(l===a)return Ou(r,{delegateTarget:a}),s.oneOff&&$.off(n,r.type,t,e),e.apply(a,[r])}}function __(n,t,e=null){return Object.values(n).find(s=>s.callable===t&&s.delegationSelector===e)}function y_(n,t,e){const s=typeof t=="string",r=s?e:t||e;let i=E_(n);return ZS.has(i)||(i=n),[s,r,i]}function yd(n,t,e,s,r){if(typeof t!="string"||!n)return;let[i,a,l]=y_(t,e,s);t in p_&&(a=(D=>function(N){if(!N.relatedTarget||N.relatedTarget!==N.delegateTarget&&!N.delegateTarget.contains(N.relatedTarget))return D.call(this,N)})(a));const c=g_(n),h=c[l]||(c[l]={}),d=__(h,a,i?e:null);if(d){d.oneOff=d.oneOff&&r;return}const p=m_(a,t.replace(YS,"")),_=i?eC(n,e,a):tC(n,a);_.delegationSelector=i?e:null,_.callable=a,_.oneOff=r,_.uidEvent=p,h[p]=_,n.addEventListener(l,_,i)}function mc(n,t,e,s,r){const i=__(t[e],s,r);i&&(n.removeEventListener(e,i,!!r),delete t[e][i.uidEvent])}function nC(n,t,e,s){const r=t[e]||{};for(const[i,a]of Object.entries(r))i.includes(s)&&mc(n,t,e,a.callable,a.delegationSelector)}function E_(n){return n=n.replace(XS,""),p_[n]||n}const $={on(n,t,e,s){yd(n,t,e,s,!1)},one(n,t,e,s){yd(n,t,e,s,!0)},off(n,t,e,s){if(typeof t!="string"||!n)return;const[r,i,a]=y_(t,e,s),l=a!==t,c=g_(n),h=c[a]||{},d=t.startsWith(".");if(typeof i<"u"){if(!Object.keys(h).length)return;mc(n,c,a,i,r?e:null);return}if(d)for(const p of Object.keys(c))nC(n,c,p,t.slice(1));for(const[p,_]of Object.entries(h)){const b=p.replace(JS,"");(!l||t.includes(b))&&mc(n,c,a,_.callable,_.delegationSelector)}},trigger(n,t,e){if(typeof t!="string"||!n)return null;const s=f_(),r=E_(t),i=t!==r;let a=null,l=!0,c=!0,h=!1;i&&s&&(a=s.Event(t,e),s(n).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented());const d=Ou(new Event(t,{bubbles:l,cancelable:!0}),e);return h&&d.preventDefault(),c&&n.dispatchEvent(d),d.defaultPrevented&&a&&a.preventDefault(),d}};function Ou(n,t={}){for(const[e,s]of Object.entries(t))try{n[e]=s}catch{Object.defineProperty(n,e,{configurable:!0,get(){return s}})}return n}function Ed(n){if(n==="true")return!0;if(n==="false")return!1;if(n===Number(n).toString())return Number(n);if(n===""||n==="null")return null;if(typeof n!="string")return n;try{return JSON.parse(decodeURIComponent(n))}catch{return n}}function El(n){return n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const yn={setDataAttribute(n,t,e){n.setAttribute(`data-bs-${El(t)}`,e)},removeDataAttribute(n,t){n.removeAttribute(`data-bs-${El(t)}`)},getDataAttributes(n){if(!n)return{};const t={},e=Object.keys(n.dataset).filter(s=>s.startsWith("bs")&&!s.startsWith("bsConfig"));for(const s of e){let r=s.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),t[r]=Ed(n.dataset[s])}return t},getDataAttribute(n,t){return Ed(n.getAttribute(`data-bs-${El(t)}`))}};class Di{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const s=_n(e)?yn.getDataAttribute(e,"config"):{};return{...this.constructor.Default,...typeof s=="object"?s:{},..._n(e)?yn.getDataAttributes(e):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[s,r]of Object.entries(e)){const i=t[s],a=_n(i)?"element":qS(i);if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${r}".`)}}}const sC="5.3.3";class Ke extends Di{constructor(t,e){super(),t=Xn(t),t&&(this._element=t,this._config=this._getConfig(e),gl.set(this._element,this.constructor.DATA_KEY,this))}dispose(){gl.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,s=!0){d_(t,e,s)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return gl.get(Xn(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return sC}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const vl=n=>{let t=n.getAttribute("data-bs-target");if(!t||t==="#"){let e=n.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>c_(e)).join(","):null},st={find(n,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,n))},findOne(n,t=document.documentElement){return Element.prototype.querySelector.call(t,n)},children(n,t){return[].concat(...n.children).filter(e=>e.matches(t))},parents(n,t){const e=[];let s=n.parentNode.closest(t);for(;s;)e.push(s),s=s.parentNode.closest(t);return e},prev(n,t){let e=n.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(n,t){let e=n.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(n){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,n).filter(e=>!Jn(e)&&Ir(e))},getSelectorFromElement(n){const t=vl(n);return t&&st.findOne(t)?t:null},getElementFromSelector(n){const t=vl(n);return t?st.findOne(t):null},getMultipleElementsFromSelector(n){const t=vl(n);return t?st.find(t):[]}},Pa=(n,t="hide")=>{const e=`click.dismiss${n.EVENT_KEY}`,s=n.NAME;$.on(document,e,`[data-bs-dismiss="${s}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Jn(this))return;const i=st.getElementFromSelector(this)||this.closest(`.${s}`);n.getOrCreateInstance(i)[t]()})},rC="alert",iC="bs.alert",v_=`.${iC}`,oC=`close${v_}`,aC=`closed${v_}`,lC="fade",cC="show";class Da extends Ke{static get NAME(){return rC}close(){if($.trigger(this._element,oC).defaultPrevented)return;this._element.classList.remove(cC);const e=this._element.classList.contains(lC);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),$.trigger(this._element,aC),this.dispose()}static jQueryInterface(t){return this.each(function(){const e=Da.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Pa(Da,"close");Fe(Da);const uC="button",hC="bs.button",fC=`.${hC}`,dC=".data-api",pC="active",vd='[data-bs-toggle="button"]',mC=`click${fC}${dC}`;class Na extends Ke{static get NAME(){return uC}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(pC))}static jQueryInterface(t){return this.each(function(){const e=Na.getOrCreateInstance(this);t==="toggle"&&e[t]()})}}$.on(document,mC,vd,n=>{n.preventDefault();const t=n.target.closest(vd);Na.getOrCreateInstance(t).toggle()});Fe(Na);const gC="swipe",Sr=".bs.swipe",_C=`touchstart${Sr}`,yC=`touchmove${Sr}`,EC=`touchend${Sr}`,vC=`pointerdown${Sr}`,TC=`pointerup${Sr}`,AC="touch",bC="pen",wC="pointer-event",IC=40,SC={endCallback:null,leftCallback:null,rightCallback:null},CC={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Yo extends Di{constructor(t,e){super(),this._element=t,!(!t||!Yo.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return SC}static get DefaultType(){return CC}static get NAME(){return gC}dispose(){$.off(this._element,Sr)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),_e(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=IC)return;const e=t/this._deltaX;this._deltaX=0,e&&_e(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,vC,t=>this._start(t)),$.on(this._element,TC,t=>this._end(t)),this._element.classList.add(wC)):($.on(this._element,_C,t=>this._start(t)),$.on(this._element,yC,t=>this._move(t)),$.on(this._element,EC,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===bC||t.pointerType===AC)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const RC="carousel",PC="bs.carousel",os=`.${PC}`,T_=".data-api",DC="ArrowLeft",NC="ArrowRight",OC=500,Hr="next",$s="prev",zs="left",wo="right",VC=`slide${os}`,Tl=`slid${os}`,xC=`keydown${os}`,LC=`mouseenter${os}`,MC=`mouseleave${os}`,kC=`dragstart${os}`,$C=`load${os}${T_}`,FC=`click${os}${T_}`,A_="carousel",ro="active",UC="slide",BC="carousel-item-end",jC="carousel-item-start",HC="carousel-item-next",KC="carousel-item-prev",b_=".active",w_=".carousel-item",WC=b_+w_,qC=".carousel-item img",zC=".carousel-indicators",GC="[data-bs-slide], [data-bs-slide-to]",QC='[data-bs-ride="carousel"]',YC={[DC]:wo,[NC]:zs},XC={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},JC={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ni extends Ke{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=st.findOne(zC,this._element),this._addEventListeners(),this._config.ride===A_&&this.cycle()}static get Default(){return XC}static get DefaultType(){return JC}static get NAME(){return RC}next(){this._slide(Hr)}nextWhenVisible(){!document.hidden&&Ir(this._element)&&this.next()}prev(){this._slide($s)}pause(){this._isSliding&&u_(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){$.one(this._element,Tl,()=>this.cycle());return}this.cycle()}}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){$.one(this._element,Tl,()=>this.to(t));return}const s=this._getItemIndex(this._getActive());if(s===t)return;const r=t>s?Hr:$s;this._slide(r,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&$.on(this._element,xC,t=>this._keydown(t)),this._config.pause==="hover"&&($.on(this._element,LC,()=>this.pause()),$.on(this._element,MC,()=>this._maybeEnableCycle())),this._config.touch&&Yo.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const s of st.find(qC,this._element))$.on(s,kC,r=>r.preventDefault());const e={leftCallback:()=>this._slide(this._directionToOrder(zs)),rightCallback:()=>this._slide(this._directionToOrder(wo)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),OC+this._config.interval))}};this._swipeHelper=new Yo(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=YC[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=st.findOne(b_,this._indicatorsElement);e.classList.remove(ro),e.removeAttribute("aria-current");const s=st.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);s&&(s.classList.add(ro),s.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const s=this._getActive(),r=t===Hr,i=e||Nu(this._getItems(),s,r,this._config.wrap);if(i===s)return;const a=this._getItemIndex(i),l=b=>$.trigger(this._element,b,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(s),to:a});if(l(VC).defaultPrevented||!s||!i)return;const h=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(a),this._activeElement=i;const d=r?jC:BC,p=r?HC:KC;i.classList.add(p),Pi(i),s.classList.add(d),i.classList.add(d);const _=()=>{i.classList.remove(d,p),i.classList.add(ro),s.classList.remove(ro,p,d),this._isSliding=!1,l(Tl)};this._queueCallback(_,s,this._isAnimated()),h&&this.cycle()}_isAnimated(){return this._element.classList.contains(UC)}_getActive(){return st.findOne(WC,this._element)}_getItems(){return st.find(w_,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ke()?t===zs?$s:Hr:t===zs?Hr:$s}_orderToDirection(t){return ke()?t===$s?zs:wo:t===$s?wo:zs}static jQueryInterface(t){return this.each(function(){const e=Ni.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(document,FC,GC,function(n){const t=st.getElementFromSelector(this);if(!t||!t.classList.contains(A_))return;n.preventDefault();const e=Ni.getOrCreateInstance(t),s=this.getAttribute("data-bs-slide-to");if(s){e.to(s),e._maybeEnableCycle();return}if(yn.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});$.on(window,$C,()=>{const n=st.find(QC);for(const t of n)Ni.getOrCreateInstance(t)});Fe(Ni);const ZC="collapse",t0="bs.collapse",Oi=`.${t0}`,e0=".data-api",n0=`show${Oi}`,s0=`shown${Oi}`,r0=`hide${Oi}`,i0=`hidden${Oi}`,o0=`click${Oi}${e0}`,Al="show",Qs="collapse",io="collapsing",a0="collapsed",l0=`:scope .${Qs} .${Qs}`,c0="collapse-horizontal",u0="width",h0="height",f0=".collapse.show, .collapse.collapsing",gc='[data-bs-toggle="collapse"]',d0={parent:null,toggle:!0},p0={parent:"(null|element)",toggle:"boolean"};class Ti extends Ke{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const s=st.find(gc);for(const r of s){const i=st.getSelectorFromElement(r),a=st.find(i).filter(l=>l===this._element);i!==null&&a.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return d0}static get DefaultType(){return p0}static get NAME(){return ZC}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(f0).filter(l=>l!==this._element).map(l=>Ti.getOrCreateInstance(l,{toggle:!1}))),t.length&&t[0]._isTransitioning||$.trigger(this._element,n0).defaultPrevented)return;for(const l of t)l.hide();const s=this._getDimension();this._element.classList.remove(Qs),this._element.classList.add(io),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const r=()=>{this._isTransitioning=!1,this._element.classList.remove(io),this._element.classList.add(Qs,Al),this._element.style[s]="",$.trigger(this._element,s0)},a=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback(r,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,r0).defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Pi(this._element),this._element.classList.add(io),this._element.classList.remove(Qs,Al);for(const r of this._triggerArray){const i=st.getElementFromSelector(r);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([r],!1)}this._isTransitioning=!0;const s=()=>{this._isTransitioning=!1,this._element.classList.remove(io),this._element.classList.add(Qs),$.trigger(this._element,i0)};this._element.style[e]="",this._queueCallback(s,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Al)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=Xn(t.parent),t}_getDimension(){return this._element.classList.contains(c0)?u0:h0}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(gc);for(const e of t){const s=st.getElementFromSelector(e);s&&this._addAriaAndCollapsedClass([e],this._isShown(s))}}_getFirstLevelChildren(t){const e=st.find(l0,this._config.parent);return st.find(t,this._config.parent).filter(s=>!e.includes(s))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(a0,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){const s=Ti.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t]()}})}}$.on(document,o0,gc,function(n){(n.target.tagName==="A"||n.delegateTarget&&n.delegateTarget.tagName==="A")&&n.preventDefault();for(const t of st.getMultipleElementsFromSelector(this))Ti.getOrCreateInstance(t,{toggle:!1}).toggle()});Fe(Ti);const Td="dropdown",m0="bs.dropdown",Ns=`.${m0}`,Vu=".data-api",g0="Escape",Ad="Tab",_0="ArrowUp",bd="ArrowDown",y0=2,E0=`hide${Ns}`,v0=`hidden${Ns}`,T0=`show${Ns}`,A0=`shown${Ns}`,I_=`click${Ns}${Vu}`,S_=`keydown${Ns}${Vu}`,b0=`keyup${Ns}${Vu}`,Gs="show",w0="dropup",I0="dropend",S0="dropstart",C0="dropup-center",R0="dropdown-center",ys='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',P0=`${ys}.${Gs}`,Io=".dropdown-menu",D0=".navbar",N0=".navbar-nav",O0=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",V0=ke()?"top-end":"top-start",x0=ke()?"top-start":"top-end",L0=ke()?"bottom-end":"bottom-start",M0=ke()?"bottom-start":"bottom-end",k0=ke()?"left-start":"right-start",$0=ke()?"right-start":"left-start",F0="top",U0="bottom",B0={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},j0={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class nn extends Ke{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=st.next(this._element,Io)[0]||st.prev(this._element,Io)[0]||st.findOne(Io,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return B0}static get DefaultType(){return j0}static get NAME(){return Td}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Jn(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!$.trigger(this._element,T0,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(N0))for(const s of[].concat(...document.body.children))$.on(s,"mouseover",Qo);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Gs),this._element.classList.add(Gs),$.trigger(this._element,A0,t)}}hide(){if(Jn(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!$.trigger(this._element,E0,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))$.off(s,"mouseover",Qo);this._popper&&this._popper.destroy(),this._menu.classList.remove(Gs),this._element.classList.remove(Gs),this._element.setAttribute("aria-expanded","false"),yn.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,v0,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!_n(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Td.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof l_>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:_n(this._config.reference)?t=Xn(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Du(t,this._menu,e)}_isShown(){return this._menu.classList.contains(Gs)}_getPlacement(){const t=this._parent;if(t.classList.contains(I0))return k0;if(t.classList.contains(S0))return $0;if(t.classList.contains(C0))return F0;if(t.classList.contains(R0))return U0;const e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(w0)?e?x0:V0:e?M0:L0}_detectNavbar(){return this._element.closest(D0)!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(yn.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..._e(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const s=st.find(O0,this._menu).filter(r=>Ir(r));s.length&&Nu(s,e,t===bd,!s.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){const e=nn.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===y0||t.type==="keyup"&&t.key!==Ad)return;const e=st.find(P0);for(const s of e){const r=nn.getInstance(s);if(!r||r._config.autoClose===!1)continue;const i=t.composedPath(),a=i.includes(r._menu);if(i.includes(r._element)||r._config.autoClose==="inside"&&!a||r._config.autoClose==="outside"&&a||r._menu.contains(t.target)&&(t.type==="keyup"&&t.key===Ad||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const l={relatedTarget:r._element};t.type==="click"&&(l.clickEvent=t),r._completeHide(l)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),s=t.key===g0,r=[_0,bd].includes(t.key);if(!r&&!s||e&&!s)return;t.preventDefault();const i=this.matches(ys)?this:st.prev(this,ys)[0]||st.next(this,ys)[0]||st.findOne(ys,t.delegateTarget.parentNode),a=nn.getOrCreateInstance(i);if(r){t.stopPropagation(),a.show(),a._selectMenuItem(t);return}a._isShown()&&(t.stopPropagation(),a.hide(),i.focus())}}$.on(document,S_,ys,nn.dataApiKeydownHandler);$.on(document,S_,Io,nn.dataApiKeydownHandler);$.on(document,I_,nn.clearMenus);$.on(document,b0,nn.clearMenus);$.on(document,I_,ys,function(n){n.preventDefault(),nn.getOrCreateInstance(this).toggle()});Fe(nn);const C_="backdrop",H0="fade",wd="show",Id=`mousedown.bs.${C_}`,K0={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},W0={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class R_ extends Di{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return K0}static get DefaultType(){return W0}static get NAME(){return C_}show(t){if(!this._config.isVisible){_e(t);return}this._append();const e=this._getElement();this._config.isAnimated&&Pi(e),e.classList.add(wd),this._emulateAnimation(()=>{_e(t)})}hide(t){if(!this._config.isVisible){_e(t);return}this._getElement().classList.remove(wd),this._emulateAnimation(()=>{this.dispose(),_e(t)})}dispose(){this._isAppended&&($.off(this._element,Id),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(H0),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Xn(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),$.on(t,Id,()=>{_e(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){d_(t,this._getElement(),this._config.isAnimated)}}const q0="focustrap",z0="bs.focustrap",Xo=`.${z0}`,G0=`focusin${Xo}`,Q0=`keydown.tab${Xo}`,Y0="Tab",X0="forward",Sd="backward",J0={autofocus:!0,trapElement:null},Z0={autofocus:"boolean",trapElement:"element"};class P_ extends Di{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return J0}static get DefaultType(){return Z0}static get NAME(){return q0}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,Xo),$.on(document,G0,t=>this._handleFocusin(t)),$.on(document,Q0,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,Xo))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const s=st.focusableChildren(e);s.length===0?e.focus():this._lastTabNavDirection===Sd?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){t.key===Y0&&(this._lastTabNavDirection=t.shiftKey?Sd:X0)}}const Cd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Rd=".sticky-top",oo="padding-right",Pd="margin-right";class _c{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,oo,e=>e+t),this._setElementAttributes(Cd,oo,e=>e+t),this._setElementAttributes(Rd,Pd,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,oo),this._resetElementAttributes(Cd,oo),this._resetElementAttributes(Rd,Pd)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,s){const r=this.getWidth(),i=a=>{if(a!==this._element&&window.innerWidth>a.clientWidth+r)return;this._saveInitialAttribute(a,e);const l=window.getComputedStyle(a).getPropertyValue(e);a.style.setProperty(e,`${s(Number.parseFloat(l))}px`)};this._applyManipulationCallback(t,i)}_saveInitialAttribute(t,e){const s=t.style.getPropertyValue(e);s&&yn.setDataAttribute(t,e,s)}_resetElementAttributes(t,e){const s=r=>{const i=yn.getDataAttribute(r,e);if(i===null){r.style.removeProperty(e);return}yn.removeDataAttribute(r,e),r.style.setProperty(e,i)};this._applyManipulationCallback(t,s)}_applyManipulationCallback(t,e){if(_n(t)){e(t);return}for(const s of st.find(t,this._element))e(s)}}const tR="modal",eR="bs.modal",$e=`.${eR}`,nR=".data-api",sR="Escape",rR=`hide${$e}`,iR=`hidePrevented${$e}`,D_=`hidden${$e}`,N_=`show${$e}`,oR=`shown${$e}`,aR=`resize${$e}`,lR=`click.dismiss${$e}`,cR=`mousedown.dismiss${$e}`,uR=`keydown.dismiss${$e}`,hR=`click${$e}${nR}`,Dd="modal-open",fR="fade",Nd="show",bl="modal-static",dR=".modal.show",pR=".modal-dialog",mR=".modal-body",gR='[data-bs-toggle="modal"]',_R={backdrop:!0,focus:!0,keyboard:!0},yR={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class gr extends Ke{constructor(t,e){super(t,e),this._dialog=st.findOne(pR,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new _c,this._addEventListeners()}static get Default(){return _R}static get DefaultType(){return yR}static get NAME(){return tR}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||$.trigger(this._element,N_,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Dd),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||$.trigger(this._element,rR).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Nd),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){$.off(window,$e),$.off(this._dialog,$e),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new R_({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new P_({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=st.findOne(mR,this._dialog);e&&(e.scrollTop=0),Pi(this._element),this._element.classList.add(Nd);const s=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,oR,{relatedTarget:t})};this._queueCallback(s,this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,uR,t=>{if(t.key===sR){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),$.on(window,aR,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,cR,t=>{$.one(this._element,lR,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Dd),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,D_)})}_isAnimated(){return this._element.classList.contains(fR)}_triggerBackdropTransition(){if($.trigger(this._element,iR).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,s=this._element.style.overflowY;s==="hidden"||this._element.classList.contains(bl)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(bl),this._queueCallback(()=>{this._element.classList.remove(bl),this._queueCallback(()=>{this._element.style.overflowY=s},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),s=e>0;if(s&&!t){const r=ke()?"paddingLeft":"paddingRight";this._element.style[r]=`${e}px`}if(!s&&t){const r=ke()?"paddingRight":"paddingLeft";this._element.style[r]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){const s=gr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof s[t]>"u")throw new TypeError(`No method named "${t}"`);s[t](e)}})}}$.on(document,hR,gR,function(n){const t=st.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&n.preventDefault(),$.one(t,N_,r=>{r.defaultPrevented||$.one(t,D_,()=>{Ir(this)&&this.focus()})});const e=st.findOne(dR);e&&gr.getInstance(e).hide(),gr.getOrCreateInstance(t).toggle(this)});Pa(gr);Fe(gr);const ER="offcanvas",vR="bs.offcanvas",In=`.${vR}`,O_=".data-api",TR=`load${In}${O_}`,AR="Escape",Od="show",Vd="showing",xd="hiding",bR="offcanvas-backdrop",V_=".offcanvas.show",wR=`show${In}`,IR=`shown${In}`,SR=`hide${In}`,Ld=`hidePrevented${In}`,x_=`hidden${In}`,CR=`resize${In}`,RR=`click${In}${O_}`,PR=`keydown.dismiss${In}`,DR='[data-bs-toggle="offcanvas"]',NR={backdrop:!0,keyboard:!0,scroll:!1},OR={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Zn extends Ke{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return NR}static get DefaultType(){return OR}static get NAME(){return ER}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||$.trigger(this._element,wR,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new _c().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Vd);const s=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Od),this._element.classList.remove(Vd),$.trigger(this._element,IR,{relatedTarget:t})};this._queueCallback(s,this._element,!0)}hide(){if(!this._isShown||$.trigger(this._element,SR).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(xd),this._backdrop.hide();const e=()=>{this._element.classList.remove(Od,xd),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new _c().reset(),$.trigger(this._element,x_)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{if(this._config.backdrop==="static"){$.trigger(this._element,Ld);return}this.hide()},e=!!this._config.backdrop;return new R_({className:bR,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new P_({trapElement:this._element})}_addEventListeners(){$.on(this._element,PR,t=>{if(t.key===AR){if(this._config.keyboard){this.hide();return}$.trigger(this._element,Ld)}})}static jQueryInterface(t){return this.each(function(){const e=Zn.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}$.on(document,RR,DR,function(n){const t=st.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Jn(this))return;$.one(t,x_,()=>{Ir(this)&&this.focus()});const e=st.findOne(V_);e&&e!==t&&Zn.getInstance(e).hide(),Zn.getOrCreateInstance(t).toggle(this)});$.on(window,TR,()=>{for(const n of st.find(V_))Zn.getOrCreateInstance(n).show()});$.on(window,CR,()=>{for(const n of st.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(n).position!=="fixed"&&Zn.getOrCreateInstance(n).hide()});Pa(Zn);Fe(Zn);const VR=/^aria-[\w-]*$/i,L_={"*":["class","dir","id","lang","role",VR],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},xR=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),LR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,MR=(n,t)=>{const e=n.nodeName.toLowerCase();return t.includes(e)?xR.has(e)?!!LR.test(n.nodeValue):!0:t.filter(s=>s instanceof RegExp).some(s=>s.test(e))};function kR(n,t,e){if(!n.length)return n;if(e&&typeof e=="function")return e(n);const r=new window.DOMParser().parseFromString(n,"text/html"),i=[].concat(...r.body.querySelectorAll("*"));for(const a of i){const l=a.nodeName.toLowerCase();if(!Object.keys(t).includes(l)){a.remove();continue}const c=[].concat(...a.attributes),h=[].concat(t["*"]||[],t[l]||[]);for(const d of c)MR(d,h)||a.removeAttribute(d.nodeName)}return r.body.innerHTML}const $R="TemplateFactory",FR={allowList:L_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},UR={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},BR={entry:"(string|element|function|null)",selector:"(string|element)"};class jR extends Di{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return FR}static get DefaultType(){return UR}static get NAME(){return $R}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[r,i]of Object.entries(this._config.content))this._setContent(t,i,r);const e=t.children[0],s=this._resolvePossibleFunction(this._config.extraClass);return s&&e.classList.add(...s.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,s]of Object.entries(t))super._typeCheckConfig({selector:e,entry:s},BR)}_setContent(t,e,s){const r=st.findOne(s,t);if(r){if(e=this._resolvePossibleFunction(e),!e){r.remove();return}if(_n(e)){this._putElementInTemplate(Xn(e),r);return}if(this._config.html){r.innerHTML=this._maybeSanitize(e);return}r.textContent=e}}_maybeSanitize(t){return this._config.sanitize?kR(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return _e(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const HR="tooltip",KR=new Set(["sanitize","allowList","sanitizeFn"]),wl="fade",WR="modal",ao="show",qR=".tooltip-inner",Md=`.${WR}`,kd="hide.bs.modal",Kr="hover",Il="focus",zR="click",GR="manual",QR="hide",YR="hidden",XR="show",JR="shown",ZR="inserted",tP="click",eP="focusin",nP="focusout",sP="mouseenter",rP="mouseleave",iP={AUTO:"auto",TOP:"top",RIGHT:ke()?"left":"right",BOTTOM:"bottom",LEFT:ke()?"right":"left"},oP={allowList:L_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},aP={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Cr extends Ke{constructor(t,e){if(typeof l_>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return oP}static get DefaultType(){return aP}static get NAME(){return HR}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(Md),kd,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const t=$.trigger(this._element,this.constructor.eventName(XR)),s=(h_(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!s)return;this._disposePopper();const r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(r),$.trigger(this._element,this.constructor.eventName(ZR))),this._popper=this._createPopper(r),r.classList.add(ao),"ontouchstart"in document.documentElement)for(const l of[].concat(...document.body.children))$.on(l,"mouseover",Qo);const a=()=>{$.trigger(this._element,this.constructor.eventName(JR)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(a,this.tip,this._isAnimated())}hide(){if(!this._isShown()||$.trigger(this._element,this.constructor.eventName(QR)).defaultPrevented)return;if(this._getTipElement().classList.remove(ao),"ontouchstart"in document.documentElement)for(const r of[].concat(...document.body.children))$.off(r,"mouseover",Qo);this._activeTrigger[zR]=!1,this._activeTrigger[Il]=!1,this._activeTrigger[Kr]=!1,this._isHovered=null;const s=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName(YR)))};this._queueCallback(s,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(wl,ao),e.classList.add(`bs-${this.constructor.NAME}-auto`);const s=zS(this.constructor.NAME).toString();return e.setAttribute("id",s),this._isAnimated()&&e.classList.add(wl),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new jR({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[qR]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(wl)}_isShown(){return this.tip&&this.tip.classList.contains(ao)}_createPopper(t){const e=_e(this._config.placement,[this,t,this._element]),s=iP[e.toUpperCase()];return Du(this._element,t,this._getPopperConfig(s))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return _e(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:s=>{this._getTipElement().setAttribute("data-popper-placement",s.state.placement)}}]};return{...e,..._e(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if(e==="click")$.on(this._element,this.constructor.eventName(tP),this._config.selector,s=>{this._initializeOnDelegatedTarget(s).toggle()});else if(e!==GR){const s=e===Kr?this.constructor.eventName(sP):this.constructor.eventName(eP),r=e===Kr?this.constructor.eventName(rP):this.constructor.eventName(nP);$.on(this._element,s,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusin"?Il:Kr]=!0,a._enter()}),$.on(this._element,r,this._config.selector,i=>{const a=this._initializeOnDelegatedTarget(i);a._activeTrigger[i.type==="focusout"?Il:Kr]=a._element.contains(i.relatedTarget),a._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(Md),kd,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=yn.getDataAttributes(this._element);for(const s of Object.keys(e))KR.has(s)&&delete e[s];return t={...e,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:Xn(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,s]of Object.entries(this._config))this.constructor.Default[e]!==s&&(t[e]=s);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const e=Cr.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Fe(Cr);const lP="popover",cP=".popover-header",uP=".popover-body",hP={...Cr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},fP={...Cr.DefaultType,content:"(null|string|element|function)"};class xu extends Cr{static get Default(){return hP}static get DefaultType(){return fP}static get NAME(){return lP}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[cP]:this._getTitle(),[uP]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const e=xu.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t]()}})}}Fe(xu);const dP="scrollspy",pP="bs.scrollspy",Lu=`.${pP}`,mP=".data-api",gP=`activate${Lu}`,$d=`click${Lu}`,_P=`load${Lu}${mP}`,yP="dropdown-item",Fs="active",EP='[data-bs-spy="scroll"]',Sl="[href]",vP=".nav, .list-group",Fd=".nav-link",TP=".nav-item",AP=".list-group-item",bP=`${Fd}, ${TP} > ${Fd}, ${AP}`,wP=".dropdown",IP=".dropdown-toggle",SP={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},CP={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Oa extends Ke{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return SP}static get DefaultType(){return CP}static get NAME(){return dP}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Xn(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,$d),$.on(this._config.target,$d,Sl,t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const s=this._rootElement||window,r=e.offsetTop-this._element.offsetTop;if(s.scrollTo){s.scrollTo({top:r,behavior:"smooth"});return}s.scrollTop=r}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){const e=a=>this._targetLinks.get(`#${a.target.id}`),s=a=>{this._previousScrollData.visibleEntryTop=a.target.offsetTop,this._process(e(a))},r=(this._rootElement||document.documentElement).scrollTop,i=r>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=r;for(const a of t){if(!a.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(a));continue}const l=a.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&l){if(s(a),!r)return;continue}!i&&!l&&s(a)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=st.find(Sl,this._config.target);for(const e of t){if(!e.hash||Jn(e))continue;const s=st.findOne(decodeURI(e.hash),this._element);Ir(s)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,s))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Fs),this._activateParents(t),$.trigger(this._element,gP,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(yP)){st.findOne(IP,t.closest(wP)).classList.add(Fs);return}for(const e of st.parents(t,vP))for(const s of st.prev(e,bP))s.classList.add(Fs)}_clearActiveClass(t){t.classList.remove(Fs);const e=st.find(`${Sl}.${Fs}`,t);for(const s of e)s.classList.remove(Fs)}static jQueryInterface(t){return this.each(function(){const e=Oa.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(window,_P,()=>{for(const n of st.find(EP))Oa.getOrCreateInstance(n)});Fe(Oa);const RP="tab",PP="bs.tab",Os=`.${PP}`,DP=`hide${Os}`,NP=`hidden${Os}`,OP=`show${Os}`,VP=`shown${Os}`,xP=`click${Os}`,LP=`keydown${Os}`,MP=`load${Os}`,kP="ArrowLeft",Ud="ArrowRight",$P="ArrowUp",Bd="ArrowDown",Cl="Home",jd="End",Es="active",Hd="fade",Rl="show",FP="dropdown",M_=".dropdown-toggle",UP=".dropdown-menu",Pl=`:not(${M_})`,BP='.list-group, .nav, [role="tablist"]',jP=".nav-item, .list-group-item",HP=`.nav-link${Pl}, .list-group-item${Pl}, [role="tab"]${Pl}`,k_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Dl=`${HP}, ${k_}`,KP=`.${Es}[data-bs-toggle="tab"], .${Es}[data-bs-toggle="pill"], .${Es}[data-bs-toggle="list"]`;class _r extends Ke{constructor(t){super(t),this._parent=this._element.closest(BP),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,LP,e=>this._keydown(e)))}static get NAME(){return RP}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),s=e?$.trigger(e,DP,{relatedTarget:t}):null;$.trigger(t,OP,{relatedTarget:e}).defaultPrevented||s&&s.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Es),this._activate(st.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(Rl);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),$.trigger(t,VP,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Hd))}_deactivate(t,e){if(!t)return;t.classList.remove(Es),t.blur(),this._deactivate(st.getElementFromSelector(t));const s=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(Rl);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),$.trigger(t,NP,{relatedTarget:e})};this._queueCallback(s,t,t.classList.contains(Hd))}_keydown(t){if(![kP,Ud,$P,Bd,Cl,jd].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter(r=>!Jn(r));let s;if([Cl,jd].includes(t.key))s=e[t.key===Cl?0:e.length-1];else{const r=[Ud,Bd].includes(t.key);s=Nu(e,t.target,r,!0)}s&&(s.focus({preventScroll:!0}),_r.getOrCreateInstance(s).show())}_getChildren(){return st.find(Dl,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const s of e)this._setInitialAttributesOnChild(s)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),s=this._getOuterElement(t);t.setAttribute("aria-selected",e),s!==t&&this._setAttributeIfNotExists(s,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=st.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const s=this._getOuterElement(t);if(!s.classList.contains(FP))return;const r=(i,a)=>{const l=st.findOne(i,s);l&&l.classList.toggle(a,e)};r(M_,Es),r(UP,Rl),s.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,s){t.hasAttribute(e)||t.setAttribute(e,s)}_elemIsActive(t){return t.classList.contains(Es)}_getInnerElement(t){return t.matches(Dl)?t:st.findOne(Dl,t)}_getOuterElement(t){return t.closest(jP)||t}static jQueryInterface(t){return this.each(function(){const e=_r.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}}$.on(document,xP,k_,function(n){["A","AREA"].includes(this.tagName)&&n.preventDefault(),!Jn(this)&&_r.getOrCreateInstance(this).show()});$.on(window,MP,()=>{for(const n of st.find(KP))_r.getOrCreateInstance(n)});Fe(_r);const WP="toast",qP="bs.toast",as=`.${qP}`,zP=`mouseover${as}`,GP=`mouseout${as}`,QP=`focusin${as}`,YP=`focusout${as}`,XP=`hide${as}`,JP=`hidden${as}`,ZP=`show${as}`,tD=`shown${as}`,eD="fade",Kd="hide",lo="show",co="showing",nD={animation:"boolean",autohide:"boolean",delay:"number"},sD={animation:!0,autohide:!0,delay:5e3};class Va extends Ke{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return sD}static get DefaultType(){return nD}static get NAME(){return WP}show(){if($.trigger(this._element,ZP).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(eD);const e=()=>{this._element.classList.remove(co),$.trigger(this._element,tD),this._maybeScheduleHide()};this._element.classList.remove(Kd),Pi(this._element),this._element.classList.add(lo,co),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||$.trigger(this._element,XP).defaultPrevented)return;const e=()=>{this._element.classList.add(Kd),this._element.classList.remove(co,lo),$.trigger(this._element,JP)};this._element.classList.add(co),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(lo),super.dispose()}isShown(){return this._element.classList.contains(lo)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}const s=t.relatedTarget;this._element===s||this._element.contains(s)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,zP,t=>this._onInteraction(t,!0)),$.on(this._element,GP,t=>this._onInteraction(t,!1)),$.on(this._element,QP,t=>this._onInteraction(t,!0)),$.on(this._element,YP,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const e=Va.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]>"u")throw new TypeError(`No method named "${t}"`);e[t](this)}})}}Pa(Va);Fe(Va);const rD=Pv(sS);rD.mount("#app");
